import{c as H,a as c,f as b,t as q}from"../chunks/BNXAmcI_.js";import{i as k}from"../chunks/CsVMf1gv.js";import{h as M,C as V,a2 as W,t as w,v as N,x as y,y as u,z as p,w as I,A as h,av as S,N as A,l as D,M as B}from"../chunks/_yfJwgyk.js";import{s as C,e as g}from"../chunks/Cyjm9et-.js";import{i as x,s as Z,a as G,p as T}from"../chunks/CT0Wj-GA.js";import{w as J,c as P,o as Q}from"../chunks/eLtsEgJi.js";function X(a,t,e,o,r){M&&V();var n=t.$$slots?.[e],i=!1;n===!0&&(n=t.children,i=!0),n===void 0||n(a,i?()=>o:o)}function Y(a,t,e){var o=a==null?"":""+a;return o=o?o+" "+t:t,o===""?null:o}function ee(a,t,e,o,r,n){var i=a.__className;if(M||i!==e||i===void 0){var s=Y(e,o);(!M||s!==a.getAttribute("class"))&&(s==null?a.removeAttribute("class"):a.className=s),a.__className=e}return n}function te(a){return function(...t){var e=t[0];return e.stopPropagation(),a?.apply(this,t)}}function ae(a,t){var e=a.$$events?.[t.type],o=W(e)?e.slice():e==null?[]:[e];for(var r of o)r.call(this,t)}const z=J(null);function oe(a,t="info",e=2500){z.set({message:a,type:t}),e&&setTimeout(()=>z.set(null),e)}var ne=b("<div> </div>");function ie(a,t){w(t,!1);const e=()=>G(z,"$toast",o),[o,r]=Z();k();var n=H(),i=N(n);{var s=l=>{var d=ne(),v=u(d,!0);p(d),I(()=>{ee(d,1,`toast ${e().type??""}`,"svelte-1fk2ial"),C(v,e().message)}),c(l,d)};x(i,l=>{e()&&l(s)})}c(a,n),y(),r()}var se=b('<div class="backdrop svelte-9pi54v"><div class="modal svelte-9pi54v"><header class="modal-header svelte-9pi54v"><div class="modal-title svelte-9pi54v"><!></div> <button class="close-button svelte-9pi54v" aria-label="Close">×</button></header> <div class="modal-body svelte-9pi54v"><!></div></div></div>');function F(a,t){w(t,!1);let e=T(t,"open",8,!1),o=T(t,"title",8,"");const r=P();function n(){r("close")}function i(v){v.key==="Escape"&&n()}Q(()=>(window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i))),k();var s=H(),l=N(s);{var d=v=>{var f=se(),_=u(f),m=u(_),j=u(m),K=u(j);{var O=$=>{var E=q();I(()=>C(E,o())),c($,E)};x(K,$=>{o()&&$(O)})}p(j);var U=h(j,2);p(m);var L=h(m,2),R=u(L);X(R,t,"default",{}),p(L),p(_),p(f),g("click",U,n),g("click",_,te(function($){ae.call(this,t,$)})),g("click",f,n),c(v,f)};x(l,v=>{e()&&v(d)})}c(a,s),y()}function re(){return"showDirectoryPicker"in window}var le=b("<button>Load</button>");function de(a,t){w(t,!1);const e=P();async function o(){if(re()){const n=await window.showDirectoryPicker(),i=new Map;for await(const s of n.values())if(s.kind==="file"){const l=await s.getFile();i.set(l.name,l)}e("load",{files:i,dir:n})}else{const n=document.createElement("input");n.type="file",n.webkitdirectory=!0,n.multiple=!0,n.onchange=()=>{const i=new Map(Array.from(n.files).map(s=>[s.name,s]));e("load",{files:i,dir:null})},n.click()}}k();var r=le();g("click",r,o),c(a,r),y()}var ce=b("<button>Save</button>");function ve(a,t){w(t,!1);const e=P();let o=T(t,"disabled",8,!1);k();var r=ce();I(()=>r.disabled=o()),g("click",r,()=>e("save")),c(a,r),y()}var ue=b('<header class="header svelte-zne36e"><div class="actions svelte-zne36e"><!> <!> <button>Help</button> <button>About</button></div> <div class="title svelte-zne36e"><a href="https://github.com/UoMLibrary/uom-open-annotator/" target="_blank" rel="noopener noreferrer" class="svelte-zne36e">Image Alignment Tool</a></div></header>');function pe(a,t){w(t,!1);const e=P();k();var o=ue(),r=u(o),n=u(r);de(n,{$$events:{load:d=>e("load-project",d.detail)}});var i=h(n,2);ve(i,{$$events:{save:()=>e("save-project")}});var s=h(i,2),l=h(s,2);p(r),S(2),p(o),g("click",s,()=>e("help")),g("click",l,()=>e("about")),c(a,o),y()}var fe=b(`<p>This tool allows you to compare pairs of images using overlays and add structured annotations
			for visual analysis.</p> <h3>Basic usage</h3> <ul><li>Select an image pair from the left sidebar</li> <li>Pan and zoom images in sync</li> <li>Add annotations directly in the viewer</li> <li>Annotations are saved per image pair</li></ul> <h3>Keyboard & mouse controls</h3> <ul><li><kbd>[</kbd> — Open image pair sidebar</li> <li><kbd>]</kbd> — Open annotations sidebar</li> <li><kbd>Escape</kbd> or <kbd>1</kbd> — Pan image mode</li> <li><kbd>B</kbd> or <kbd>2</kbd> — Rectangle annotation mode</li> <li><kbd>P</kbd> or <kbd>3</kbd> — Polygon annotation mode</li> <li><kbd>Mouse wheel</kbd> — Zoom</li> <li><kbd>Shift</kbd> + <kbd>Mouse wheel</kbd> — Fade between images</li></ul>`,1),he=b(`<p>Designed for visual comparison, this application allows pairs of images to be overlaid and
			annotated to support detailed analysis.</p> <p>It runs entirely in the browser and can load projects directly from a local folder, with
			annotations saved back to the project file where the browser allows.</p> <h3>Technologies used</h3> <ul><li><a href="https://svelte.dev/docs/kit/introduction" target="_blank" rel="noopener noreferrer">SvelteKit</a> — application framework and UI architecture</li> <li><a href="https://openseadragon.github.io/" target="_blank" rel="noopener noreferrer">OpenSeadragon</a> — high-resolution image viewing and deep zoom</li> <li><a href="https://annotorious.dev/" target="_blank" rel="noopener noreferrer">Annotorious</a> — annotation primitives and interaction models</li></ul> <p>Rather than acting as a single, all-in-one solution, the tool is intended to form part of a
			broader workflow. Additional tools are planned to support related stages, such as image
			alignment, comparison preparation, and transformation of annotation outputs for downstream
			use.</p> <p class="muted">This is an experimental application and a work in progress, intended for research,
			exploration, and prototyping workflows.</p> <p class="muted">For any enquiries or suggestions for further development, please contact Christopher Wilson —
			Software Developer, Artificial Intelligence and Ideas Adoption (AIIA), The University of
			Manchester.</p>`,1),be=b('<div class="app"><!> <!> <div class="workspace"></div> <!> <!></div>');function me(a,t){w(t,!1);let e=B(!1),o=B(!1);async function r(){console.log("Load project triggered")}async function n(){console.log("Save project triggered"),oe("Project saved successfully!")}k();var i=be(),s=u(i);ie(s,{});var l=h(s,2);pe(l,{$$events:{"load-project":r,"save-project":n,help:()=>A(e,!0),about:()=>A(o,!0)}});var d=h(l,4);F(d,{get open(){return D(e)},title:"How to use this tool",$$events:{close:()=>A(e,!1)},children:(f,_)=>{var m=fe();S(8),c(f,m)},$$slots:{default:!0}});var v=h(d,2);F(v,{get open(){return D(o)},title:"About this tool",$$events:{close:()=>A(o,!1)},children:(f,_)=>{var m=he();S(12),c(f,m)},$$slots:{default:!0}}),p(i),c(a,i),y()}function Ae(a){me(a,{})}export{Ae as component};
