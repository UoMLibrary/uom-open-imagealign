import{c as Ye,a as B,f as Z,t as Jr}from"../chunks/DSmiDE27.js";import{i as he}from"../chunks/DlD1Y5cZ.js";import{h as qe,j as Rr,k as As,a as kr,O as xa,f as Ms,z,Q as Cs,R as Ds,S as ln,i as Nr,e as gt,C as zs,aN as Vs,ay as fn,c as He,b as Wr,s as Us,a6 as yr,ac as Qr,aL as xr,aU as Fs,am as mn,aV as Ls,aW as Hs,W as me,aX as Ge,r as es,p as ts,aY as Or,aZ as Ks,aK as Gs,d as Bs,q as Js,g as Ws,a_ as rs,a$ as Ys,b0 as ns,aP as as,b1 as ss,b2 as Zs,b3 as Xs,T as Qs,aR as xs,w as te,ak as eo,E as pe,F as De,I as ve,J as W,K as J,G as $e,M as X,az as $r,X as ue,b4 as ze,A as Ke,b5 as xe,b6 as to,b7 as ro}from"../chunks/yzV3oM-X.js";import{s as hn,r as en,a as no,h as ao}from"../chunks/Dg0E0pEZ.js";import{i as ce,s as Ve,a as be,p as we}from"../chunks/BGqQhh8U.js";import{s as ke,e as fe}from"../chunks/B74FiJFk.js";import{w as et,c as pt,o as os,d as Be,g as is,a as so}from"../chunks/CBmR02Jt.js";function pn(e,t){return t}function oo(e,t,a){for(var n=[],l=t.length,r,s=t.length,o=0;o<l;o++){let w=t[o];ts(w,()=>{if(r){if(r.pending.delete(w),r.done.add(w),r.pending.size===0){var v=e.outrogroups;Yr(xr(r.done)),v.delete(r),v.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var u=n.length===0&&a!==null;if(u){var p=a,m=p.parentNode;Gs(m),m.append(p),e.items.clear()}Yr(t,!u)}else r={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(r)}function Yr(e,t=!0){for(var a=0;a<e.length;a++)Bs(e[a],t)}var vn;function ht(e,t,a,n,l,r=null){var s=e,o=new Map,u=(t&rs)!==0;if(u){var p=e;s=qe?Rr(As(p)):p.appendChild(kr())}qe&&xa();var m=null,w=yr(()=>{var h=a();return Qr(h)?h:h==null?[]:xr(h)}),v,y=!0;function $(){i.fallback=m,io(i,v,s,t,n),m!==null&&(v.length===0?(m.f&Ge)===0?es(m):(m.f^=Ge,lt(m,null,s)):ts(m,()=>{m=null}))}var E=Ms(()=>{v=z(w);var h=v.length;let c=!1;if(qe){var f=Cs(s)===Ds;f!==(h===0)&&(s=ln(),Rr(s),Nr(!1),c=!0)}for(var g=new Set,d=He,_=Us(),S=0;S<h;S+=1){qe&&gt.nodeType===zs&&gt.data===Vs&&(s=gt,c=!0,Nr(!1));var R=v[S],q=n(R,S),C=y?null:o.get(q);C?(C.v&&fn(C.v,R),C.i&&fn(C.i,S),_&&d.unskip_effect(C.e)):(C=co(o,y?s:vn??=kr(),R,q,S,l,t,a),y||(C.e.f|=Ge),o.set(q,C)),g.add(q)}if(h===0&&r&&!m&&(y?m=Wr(()=>r(s)):(m=Wr(()=>r(vn??=kr())),m.f|=Ge)),qe&&h>0&&Rr(ln()),!y)if(_){for(const[O,V]of o)g.has(O)||d.skip_effect(V.e);d.oncommit($),d.ondiscard(()=>{})}else $();c&&Nr(!0),z(w)}),i={effect:E,items:o,outrogroups:null,fallback:m};y=!1,qe&&(s=gt)}function it(e){for(;e!==null&&(e.f&Ks)===0;)e=e.next;return e}function io(e,t,a,n,l){var r=(n&Ys)!==0,s=t.length,o=e.items,u=it(e.effect.first),p,m=null,w,v=[],y=[],$,E,i,h;if(r)for(h=0;h<s;h+=1)$=t[h],E=l($,h),i=o.get(E).e,(i.f&Ge)===0&&(i.nodes?.a?.measure(),(w??=new Set).add(i));for(h=0;h<s;h+=1){if($=t[h],E=l($,h),i=o.get(E).e,e.outrogroups!==null)for(const C of e.outrogroups)C.pending.delete(i),C.done.delete(i);if((i.f&Ge)!==0)if(i.f^=Ge,i===u)lt(i,null,a);else{var c=m?m.next:u;i===e.effect.last&&(e.effect.last=i.prev),i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),Je(e,m,i),Je(e,i,c),lt(i,c,a),m=i,v=[],y=[],u=it(m.next);continue}if((i.f&Or)!==0&&(es(i),r&&(i.nodes?.a?.unfix(),(w??=new Set).delete(i))),i!==u){if(p!==void 0&&p.has(i)){if(v.length<y.length){var f=y[0],g;m=f.prev;var d=v[0],_=v[v.length-1];for(g=0;g<v.length;g+=1)lt(v[g],f,a);for(g=0;g<y.length;g+=1)p.delete(y[g]);Je(e,d.prev,_.next),Je(e,m,d),Je(e,_,f),u=f,m=_,h-=1,v=[],y=[]}else p.delete(i),lt(i,u,a),Je(e,i.prev,i.next),Je(e,i,m===null?e.effect.first:m.next),Je(e,m,i),m=i;continue}for(v=[],y=[];u!==null&&u!==i;)(p??=new Set).add(u),y.push(u),u=it(u.next);if(u===null)continue}(i.f&Ge)===0&&v.push(i),m=i,u=it(i.next)}if(e.outrogroups!==null){for(const C of e.outrogroups)C.pending.size===0&&(Yr(xr(C.done)),e.outrogroups?.delete(C));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||p!==void 0){var S=[];if(p!==void 0)for(i of p)(i.f&Or)===0&&S.push(i);for(;u!==null;)(u.f&Or)===0&&u!==e.fallback&&S.push(u),u=it(u.next);var R=S.length;if(R>0){var q=(n&rs)!==0&&s===0?a:null;if(r){for(h=0;h<R;h+=1)S[h].nodes?.a?.measure();for(h=0;h<R;h+=1)S[h].nodes?.a?.fix()}oo(e,S,q)}}r&&Js(()=>{if(w!==void 0)for(i of w)i.nodes?.a?.apply()})}function co(e,t,a,n,l,r,s,o){var u=(s&Ls)!==0?(s&Hs)===0?me(a,!1,!1):mn(a):null,p=(s&Fs)!==0?mn(l):null;return{v:u,i:p,e:Wr(()=>(r(t,u??a,p??l,o),()=>{e.delete(n)}))}}function lt(e,t,a){if(e.nodes)for(var n=e.nodes.start,l=e.nodes.end,r=t&&(t.f&Ge)===0?t.nodes.start:a;n!==null;){var s=Ws(n);if(r.before(n),n===l)return;n=s}}function Je(e,t,a){t===null?e.effect.first=a:t.next=a,a===null?e.effect.last=t:a.prev=t}function Zr(e,t,a,n,l){qe&&xa();var r=t.$$slots?.[a],s=!1;r===!0&&(r=t[a==="default"?"children":a],s=!0),r===void 0||r(e,s?()=>n:n)}const yn=[...` 	
\r\f \v\uFEFF`];function uo(e,t,a){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),a){for(var l in a)if(a[l])n=n?n+" "+l:l;else if(n.length)for(var r=l.length,s=0;(s=n.indexOf(l,s))>=0;){var o=s+r;(s===0||yn.includes(n[s-1]))&&(o===n.length||yn.includes(n[o]))?n=(s===0?"":n.substring(0,s))+n.substring(o+1):s=o}}return n===""?null:n}function lo(e,t){return e==null?null:String(e)}function tn(e,t,a,n,l,r){var s=e.__className;if(qe||s!==a||s===void 0){var o=uo(a,n,r);(!qe||o!==e.getAttribute("class"))&&(o==null?e.removeAttribute("class"):e.className=o),e.__className=a}else if(r&&l!==r)for(var u in r){var p=!!r[u];(l==null||p!==!!l[u])&&e.classList.toggle(u,p)}return r}function fo(e,t,a,n){var l=e.__style;if(qe||l!==t){var r=lo(t);(!qe||r!==e.getAttribute("style"))&&(r==null?e.removeAttribute("style"):e.style.cssText=r),e.__style=t}return n}function cs(e,t,a=!1){if(e.multiple){if(t==null)return;if(!Qr(t))return Zs();for(var n of e.options)n.selected=t.includes(ft(n));return}for(n of e.options){var l=ft(n);if(Xs(l,t)){n.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function mo(e){var t=new MutationObserver(()=>{cs(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Qs(()=>{t.disconnect()})}function ho(e,t,a=t){var n=new WeakSet,l=!0;ns(e,"change",r=>{var s=r?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(s),ft);else{var u=e.querySelector(s)??e.querySelector("option:not([disabled])");o=u&&ft(u)}a(o),He!==null&&n.add(He)}),as(()=>{var r=t();if(e===document.activeElement){var s=ss??He;if(n.has(s))return}if(cs(e,r,l),l&&r===void 0){var o=e.querySelector(":checked");o!==null&&(r=ft(o),a(r))}e.__value=r,l=!1}),mo(e)}function ft(e){return"__value"in e?e.__value:e.value}function us(e,t,a=t){var n=new WeakSet;ns(e,"input",async l=>{var r=l?e.defaultValue:e.value;if(r=qr(e)?Tr(r):r,a(r),He!==null&&n.add(He),await xs(),r!==(r=t())){var s=e.selectionStart,o=e.selectionEnd,u=e.value.length;if(e.value=r??"",o!==null){var p=e.value.length;s===o&&o===u&&p>u?(e.selectionStart=p,e.selectionEnd=p):(e.selectionStart=s,e.selectionEnd=Math.min(o,p))}}}),(qe&&e.defaultValue!==e.value||te(t)==null&&e.value)&&(a(qr(e)?Tr(e.value):e.value),He!==null&&n.add(He)),eo(()=>{var l=t();if(e===document.activeElement){var r=ss??He;if(n.has(r))return}qr(e)&&l===Tr(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function qr(e){var t=e.type;return t==="number"||t==="range"}function Tr(e){return e===""?null:+e}function Xr(e){return function(...t){var a=t[0];return a.stopPropagation(),e?.apply(this,t)}}function po(e,t){var a=e.$$events?.[t.type],n=Qr(a)?a.slice():a==null?[]:[a];for(var l of n)l.call(this,t)}const vo=et(null);var yo=Z("<div> </div>");function go(e,t){pe(t,!1);const a=()=>be(vo,"$toast",n),[n,l]=Ve();he();var r=Ye(),s=De(r);{var o=u=>{var p=yo(),m=W(p,!0);J(p),$e(()=>{tn(p,1,`toast ${a().type??""}`,"svelte-hiklfj"),ke(m,a().message)}),B(u,p)};ce(s,u=>{a()&&u(o)})}B(e,r),ve(),l()}var _o=Z('<div class="backdrop svelte-1qoiti9"><div class="modal svelte-1qoiti9"><header class="modal-header svelte-1qoiti9"><div class="modal-title svelte-1qoiti9"><!></div> <button class="close-button svelte-1qoiti9" aria-label="Close">×</button></header> <div class="modal-body svelte-1qoiti9"><!></div></div></div>');function ds(e,t){pe(t,!1);let a=we(t,"open",8,!1),n=we(t,"title",8,"");const l=pt();function r(){l("close")}function s(m){m.key==="Escape"&&r()}os(()=>(window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s))),he();var o=Ye(),u=De(o);{var p=m=>{var w=_o(),v=W(w),y=W(v),$=W(y),E=W($);{var i=g=>{var d=Jr();$e(()=>ke(d,n())),B(g,d)};ce(E,g=>{n()&&g(i)})}J($);var h=X($,2);J(y);var c=X(y,2),f=W(c);Zr(f,t,"default",{}),J(c),J(v),J(w),fe("click",h,r),fe("click",v,Xr(function(g){po.call(this,t,g)})),fe("click",w,r),B(m,w)};ce(u,m=>{a()&&m(p)})}B(e,o),ve()}var $o=Z(`<p>This tool prepares image sets for annotation by analysing a directory of images and generating
		paired (or grouped) image sets suitable for visual comparison and annotation.</p> <h3>Basic usage</h3> <ul><li>Select a directory containing related images</li> <li>The tool scans filenames and image characteristics to suggest image pairs</li> <li>Each pair is reviewed and assigned a base image</li> <li>A project file is generated for use in the annotation tool</li></ul> <h3>How image pairing works</h3> <ul><li>Initial pairing attempts are based on filename similarity and ordering</li> <li>Additional strategies may compare image dimensions and visual similarity</li> <li>Pairs can be adjusted manually where automatic matching is ambiguous</li></ul> <h3>Base image and coordinate system</h3> <ul><li>Each image pair has a designated base image</li> <li>The base image defines the coordinate system for annotations</li> <li>If required, a transformation can be applied to the base image to match the paired image</li></ul> <h3>Output</h3> <ul><li>The result is a <code>project.json</code> file</li> <li>This file can be opened directly in the annotation tool</li> <li>Image pairing, base image selection, and transformations are stored together</li></ul>`,1);function bo(e,t){let a=we(t,"open",12,!1);ds(e,{get open(){return a()},title:"How to use this tool",$$events:{close:()=>a(!1)},children:(n,l)=>{var r=$o();$r(16),B(n,r)},$$slots:{default:!0}})}var wo=Z(`<p>This application is designed to support the preparation stage of image-based annotation
		workflows. It focuses on organising collections of related images into structured pairs or
		groups that can be analysed and annotated consistently.</p> <p>Rather than annotating images directly, the tool generates structured project data that is
		consumed by the annotation viewer. This separation allows pairing, alignment, and annotation to
		be treated as distinct but connected stages in a broader workflow.</p> <h3>Image pairing and alignment</h3> <p>The tool attempts to identify related images using a combination of filename patterns and
		image-level characteristics. Once paired, a base image is selected to act as the coordinate
		reference for annotation placement.</p> <p>In cases where image dimensions differ, the base image may require a transformation to align it
		correctly with its paired image. Future versions of the tool are intended to integrate image
		alignment processes that automatically generate and store transformation matrices.</p> <h3>Technologies used</h3> <ul><li><a href="https://svelte.dev/docs/kit/introduction" target="_blank" rel="noopener noreferrer">SvelteKit</a> — application framework and UI architecture</li> <li>Client-side image processing techniques for analysis and comparison</li></ul> <p>The output of this tool is a structured <code>project.json</code> file that captures image pairings,
		base image definitions, and any associated transformations. This file is designed to be consumed by
		downstream tools in the annotation workflow.</p> <p class="muted">This is an experimental application and a work in progress, intended for research, exploration,
		and prototyping workflows.</p> <p class="muted">For any enquiries or suggestions for further development, please contact Christopher Wilson —
		Software Developer, Artificial Intelligence and Ideas Adoption (AIIA), The University of
		Manchester.</p>`,1);function Eo(e,t){let a=we(t,"open",12,!1);ds(e,{get open(){return a()},title:"About this tool",$$events:{close:()=>a(!1)},children:(n,l)=>{var r=wo();$r(18),B(n,r)},$$slots:{default:!0}})}const gn={"0.1":Po};function So(e){let t=structuredClone(e);for(t.version||(t.version="0.1");gn[t.version];)t=gn[t.version](t);return t}function Po(e){return{...e,version:"0.2",annotations:e.annotations?[{baseImageContentHash:e.annotations.imageContentHash??"",data:e.annotations.data??e.annotations}]:void 0}}function ls(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _t={exports:{}},Ar={},Ue={},Ze={},Mr={},Cr={},Dr={},_n;function gr(){return _n||(_n=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class a extends t{constructor(c){if(super(),!e.IDENTIFIER.test(c))throw new Error("CodeGen: name must be a valid identifier");this.str=c}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=a;class n extends t{constructor(c){super(),this._items=typeof c=="string"?[c]:c}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const c=this._items[0];return c===""||c==='""'}get str(){var c;return(c=this._str)!==null&&c!==void 0?c:this._str=this._items.reduce((f,g)=>`${f}${g}`,"")}get names(){var c;return(c=this._names)!==null&&c!==void 0?c:this._names=this._items.reduce((f,g)=>(g instanceof a&&(f[g.str]=(f[g.str]||0)+1),f),{})}}e._Code=n,e.nil=new n("");function l(h,...c){const f=[h[0]];let g=0;for(;g<c.length;)o(f,c[g]),f.push(h[++g]);return new n(f)}e._=l;const r=new n("+");function s(h,...c){const f=[y(h[0])];let g=0;for(;g<c.length;)f.push(r),o(f,c[g]),f.push(r,y(h[++g]));return u(f),new n(f)}e.str=s;function o(h,c){c instanceof n?h.push(...c._items):c instanceof a?h.push(c):h.push(w(c))}e.addCodeArg=o;function u(h){let c=1;for(;c<h.length-1;){if(h[c]===r){const f=p(h[c-1],h[c+1]);if(f!==void 0){h.splice(c-1,3,f);continue}h[c++]="+"}c++}}function p(h,c){if(c==='""')return h;if(h==='""')return c;if(typeof h=="string")return c instanceof a||h[h.length-1]!=='"'?void 0:typeof c!="string"?`${h.slice(0,-1)}${c}"`:c[0]==='"'?h.slice(0,-1)+c.slice(1):void 0;if(typeof c=="string"&&c[0]==='"'&&!(h instanceof a))return`"${h}${c.slice(1)}`}function m(h,c){return c.emptyStr()?h:h.emptyStr()?c:s`${h}${c}`}e.strConcat=m;function w(h){return typeof h=="number"||typeof h=="boolean"||h===null?h:y(Array.isArray(h)?h.join(","):h)}function v(h){return new n(y(h))}e.stringify=v;function y(h){return JSON.stringify(h).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=y;function $(h){return typeof h=="string"&&e.IDENTIFIER.test(h)?new n(`.${h}`):l`[${h}]`}e.getProperty=$;function E(h){if(typeof h=="string"&&e.IDENTIFIER.test(h))return new n(`${h}`);throw new Error(`CodeGen: invalid export name: ${h}, use explicit $id name mapping`)}e.getEsmExportName=E;function i(h){return new n(h.toString())}e.regexpCode=i})(Dr)),Dr}var zr={},$n;function bn(){return $n||($n=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=gr();class a extends Error{constructor(p){super(`CodeGen: "code" for ${p} not defined`),this.value=p.value}}var n;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class l{constructor({prefixes:p,parent:m}={}){this._names={},this._prefixes=p,this._parent=m}toName(p){return p instanceof t.Name?p:this.name(p)}name(p){return new t.Name(this._newName(p))}_newName(p){const m=this._names[p]||this._nameGroup(p);return`${p}${m.index++}`}_nameGroup(p){var m,w;if(!((w=(m=this._parent)===null||m===void 0?void 0:m._prefixes)===null||w===void 0)&&w.has(p)||this._prefixes&&!this._prefixes.has(p))throw new Error(`CodeGen: prefix "${p}" is not allowed in this scope`);return this._names[p]={prefix:p,index:0}}}e.Scope=l;class r extends t.Name{constructor(p,m){super(m),this.prefix=p}setValue(p,{property:m,itemIndex:w}){this.value=p,this.scopePath=(0,t._)`.${new t.Name(m)}[${w}]`}}e.ValueScopeName=r;const s=(0,t._)`\n`;class o extends l{constructor(p){super(p),this._values={},this._scope=p.scope,this.opts={...p,_n:p.lines?s:t.nil}}get(){return this._scope}name(p){return new r(p,this._newName(p))}value(p,m){var w;if(m.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const v=this.toName(p),{prefix:y}=v,$=(w=m.key)!==null&&w!==void 0?w:m.ref;let E=this._values[y];if(E){const c=E.get($);if(c)return c}else E=this._values[y]=new Map;E.set($,v);const i=this._scope[y]||(this._scope[y]=[]),h=i.length;return i[h]=m.ref,v.setValue(m,{property:y,itemIndex:h}),v}getValue(p,m){const w=this._values[p];if(w)return w.get(m)}scopeRefs(p,m=this._values){return this._reduceValues(m,w=>{if(w.scopePath===void 0)throw new Error(`CodeGen: name "${w}" has no value`);return(0,t._)`${p}${w.scopePath}`})}scopeCode(p=this._values,m,w){return this._reduceValues(p,v=>{if(v.value===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return v.value.code},m,w)}_reduceValues(p,m,w={},v){let y=t.nil;for(const $ in p){const E=p[$];if(!E)continue;const i=w[$]=w[$]||new Map;E.forEach(h=>{if(i.has(h))return;i.set(h,n.Started);let c=m(h);if(c){const f=this.opts.es5?e.varKinds.var:e.varKinds.const;y=(0,t._)`${y}${f} ${h} = ${c};${this.opts._n}`}else if(c=v?.(h))y=(0,t._)`${y}${c}${this.opts._n}`;else throw new a(h);i.set(h,n.Completed)})}return y}}e.ValueScope=o})(zr)),zr}var wn;function Y(){return wn||(wn=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=gr(),a=bn();var n=gr();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var l=bn();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return l.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return l.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return l.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return l.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class r{optimizeNodes(){return this}optimizeNames(b,P){return this}}class s extends r{constructor(b,P,T){super(),this.varKind=b,this.name=P,this.rhs=T}render({es5:b,_n:P}){const T=b?a.varKinds.var:this.varKind,H=this.rhs===void 0?"":` = ${this.rhs}`;return`${T} ${this.name}${H};`+P}optimizeNames(b,P){if(b[this.name.str])return this.rhs&&(this.rhs=L(this.rhs,b,P)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class o extends r{constructor(b,P,T){super(),this.lhs=b,this.rhs=P,this.sideEffects=T}render({_n:b}){return`${this.lhs} = ${this.rhs};`+b}optimizeNames(b,P){if(!(this.lhs instanceof t.Name&&!b[this.lhs.str]&&!this.sideEffects))return this.rhs=L(this.rhs,b,P),this}get names(){const b=this.lhs instanceof t.Name?{}:{...this.lhs.names};return U(b,this.rhs)}}class u extends o{constructor(b,P,T,H){super(b,T,H),this.op=P}render({_n:b}){return`${this.lhs} ${this.op}= ${this.rhs};`+b}}class p extends r{constructor(b){super(),this.label=b,this.names={}}render({_n:b}){return`${this.label}:`+b}}class m extends r{constructor(b){super(),this.label=b,this.names={}}render({_n:b}){return`break${this.label?` ${this.label}`:""};`+b}}class w extends r{constructor(b){super(),this.error=b}render({_n:b}){return`throw ${this.error};`+b}get names(){return this.error.names}}class v extends r{constructor(b){super(),this.code=b}render({_n:b}){return`${this.code};`+b}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(b,P){return this.code=L(this.code,b,P),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class y extends r{constructor(b=[]){super(),this.nodes=b}render(b){return this.nodes.reduce((P,T)=>P+T.render(b),"")}optimizeNodes(){const{nodes:b}=this;let P=b.length;for(;P--;){const T=b[P].optimizeNodes();Array.isArray(T)?b.splice(P,1,...T):T?b[P]=T:b.splice(P,1)}return b.length>0?this:void 0}optimizeNames(b,P){const{nodes:T}=this;let H=T.length;for(;H--;){const G=T[H];G.optimizeNames(b,P)||(re(b,G.names),T.splice(H,1))}return T.length>0?this:void 0}get names(){return this.nodes.reduce((b,P)=>V(b,P.names),{})}}class $ extends y{render(b){return"{"+b._n+super.render(b)+"}"+b._n}}class E extends y{}class i extends ${}i.kind="else";class h extends ${constructor(b,P){super(P),this.condition=b}render(b){let P=`if(${this.condition})`+super.render(b);return this.else&&(P+="else "+this.else.render(b)),P}optimizeNodes(){super.optimizeNodes();const b=this.condition;if(b===!0)return this.nodes;let P=this.else;if(P){const T=P.optimizeNodes();P=this.else=Array.isArray(T)?new i(T):T}if(P)return b===!1?P instanceof h?P:P.nodes:this.nodes.length?this:new h(de(b),P instanceof h?[P]:P.nodes);if(!(b===!1||!this.nodes.length))return this}optimizeNames(b,P){var T;if(this.else=(T=this.else)===null||T===void 0?void 0:T.optimizeNames(b,P),!!(super.optimizeNames(b,P)||this.else))return this.condition=L(this.condition,b,P),this}get names(){const b=super.names;return U(b,this.condition),this.else&&V(b,this.else.names),b}}h.kind="if";class c extends ${}c.kind="for";class f extends c{constructor(b){super(),this.iteration=b}render(b){return`for(${this.iteration})`+super.render(b)}optimizeNames(b,P){if(super.optimizeNames(b,P))return this.iteration=L(this.iteration,b,P),this}get names(){return V(super.names,this.iteration.names)}}class g extends c{constructor(b,P,T,H){super(),this.varKind=b,this.name=P,this.from=T,this.to=H}render(b){const P=b.es5?a.varKinds.var:this.varKind,{name:T,from:H,to:G}=this;return`for(${P} ${T}=${H}; ${T}<${G}; ${T}++)`+super.render(b)}get names(){const b=U(super.names,this.from);return U(b,this.to)}}class d extends c{constructor(b,P,T,H){super(),this.loop=b,this.varKind=P,this.name=T,this.iterable=H}render(b){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(b)}optimizeNames(b,P){if(super.optimizeNames(b,P))return this.iterable=L(this.iterable,b,P),this}get names(){return V(super.names,this.iterable.names)}}class _ extends ${constructor(b,P,T){super(),this.name=b,this.args=P,this.async=T}render(b){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(b)}}_.kind="func";class S extends y{render(b){return"return "+super.render(b)}}S.kind="return";class R extends ${render(b){let P="try"+super.render(b);return this.catch&&(P+=this.catch.render(b)),this.finally&&(P+=this.finally.render(b)),P}optimizeNodes(){var b,P;return super.optimizeNodes(),(b=this.catch)===null||b===void 0||b.optimizeNodes(),(P=this.finally)===null||P===void 0||P.optimizeNodes(),this}optimizeNames(b,P){var T,H;return super.optimizeNames(b,P),(T=this.catch)===null||T===void 0||T.optimizeNames(b,P),(H=this.finally)===null||H===void 0||H.optimizeNames(b,P),this}get names(){const b=super.names;return this.catch&&V(b,this.catch.names),this.finally&&V(b,this.finally.names),b}}class q extends ${constructor(b){super(),this.error=b}render(b){return`catch(${this.error})`+super.render(b)}}q.kind="catch";class C extends ${render(b){return"finally"+super.render(b)}}C.kind="finally";class O{constructor(b,P={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...P,_n:P.lines?`
`:""},this._extScope=b,this._scope=new a.Scope({parent:b}),this._nodes=[new E]}toString(){return this._root.render(this.opts)}name(b){return this._scope.name(b)}scopeName(b){return this._extScope.name(b)}scopeValue(b,P){const T=this._extScope.value(b,P);return(this._values[T.prefix]||(this._values[T.prefix]=new Set)).add(T),T}getScopeValue(b,P){return this._extScope.getValue(b,P)}scopeRefs(b){return this._extScope.scopeRefs(b,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(b,P,T,H){const G=this._scope.toName(P);return T!==void 0&&H&&(this._constants[G.str]=T),this._leafNode(new s(b,G,T)),G}const(b,P,T){return this._def(a.varKinds.const,b,P,T)}let(b,P,T){return this._def(a.varKinds.let,b,P,T)}var(b,P,T){return this._def(a.varKinds.var,b,P,T)}assign(b,P,T){return this._leafNode(new o(b,P,T))}add(b,P){return this._leafNode(new u(b,e.operators.ADD,P))}code(b){return typeof b=="function"?b():b!==t.nil&&this._leafNode(new v(b)),this}object(...b){const P=["{"];for(const[T,H]of b)P.length>1&&P.push(","),P.push(T),(T!==H||this.opts.es5)&&(P.push(":"),(0,t.addCodeArg)(P,H));return P.push("}"),new t._Code(P)}if(b,P,T){if(this._blockNode(new h(b)),P&&T)this.code(P).else().code(T).endIf();else if(P)this.code(P).endIf();else if(T)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(b){return this._elseNode(new h(b))}else(){return this._elseNode(new i)}endIf(){return this._endBlockNode(h,i)}_for(b,P){return this._blockNode(b),P&&this.code(P).endFor(),this}for(b,P){return this._for(new f(b),P)}forRange(b,P,T,H,G=this.opts.es5?a.varKinds.var:a.varKinds.let){const se=this._scope.toName(b);return this._for(new g(G,se,P,T),()=>H(se))}forOf(b,P,T,H=a.varKinds.const){const G=this._scope.toName(b);if(this.opts.es5){const se=P instanceof t.Name?P:this.var("_arr",P);return this.forRange("_i",0,(0,t._)`${se}.length`,ae=>{this.var(G,(0,t._)`${se}[${ae}]`),T(G)})}return this._for(new d("of",H,G,P),()=>T(G))}forIn(b,P,T,H=this.opts.es5?a.varKinds.var:a.varKinds.const){if(this.opts.ownProperties)return this.forOf(b,(0,t._)`Object.keys(${P})`,T);const G=this._scope.toName(b);return this._for(new d("in",H,G,P),()=>T(G))}endFor(){return this._endBlockNode(c)}label(b){return this._leafNode(new p(b))}break(b){return this._leafNode(new m(b))}return(b){const P=new S;if(this._blockNode(P),this.code(b),P.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(b,P,T){if(!P&&!T)throw new Error('CodeGen: "try" without "catch" and "finally"');const H=new R;if(this._blockNode(H),this.code(b),P){const G=this.name("e");this._currNode=H.catch=new q(G),P(G)}return T&&(this._currNode=H.finally=new C,this.code(T)),this._endBlockNode(q,C)}throw(b){return this._leafNode(new w(b))}block(b,P){return this._blockStarts.push(this._nodes.length),b&&this.code(b).endBlock(P),this}endBlock(b){const P=this._blockStarts.pop();if(P===void 0)throw new Error("CodeGen: not in self-balancing block");const T=this._nodes.length-P;if(T<0||b!==void 0&&T!==b)throw new Error(`CodeGen: wrong number of nodes: ${T} vs ${b} expected`);return this._nodes.length=P,this}func(b,P=t.nil,T,H){return this._blockNode(new _(b,P,T)),H&&this.code(H).endFunc(),this}endFunc(){return this._endBlockNode(_)}optimize(b=1){for(;b-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(b){return this._currNode.nodes.push(b),this}_blockNode(b){this._currNode.nodes.push(b),this._nodes.push(b)}_endBlockNode(b,P){const T=this._currNode;if(T instanceof b||P&&T instanceof P)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${P?`${b.kind}/${P.kind}`:b.kind}"`)}_elseNode(b){const P=this._currNode;if(!(P instanceof h))throw new Error('CodeGen: "else" without "if"');return this._currNode=P.else=b,this}get _root(){return this._nodes[0]}get _currNode(){const b=this._nodes;return b[b.length-1]}set _currNode(b){const P=this._nodes;P[P.length-1]=b}}e.CodeGen=O;function V(k,b){for(const P in b)k[P]=(k[P]||0)+(b[P]||0);return k}function U(k,b){return b instanceof t._CodeOrName?V(k,b.names):k}function L(k,b,P){if(k instanceof t.Name)return T(k);if(!H(k))return k;return new t._Code(k._items.reduce((G,se)=>(se instanceof t.Name&&(se=T(se)),se instanceof t._Code?G.push(...se._items):G.push(se),G),[]));function T(G){const se=P[G.str];return se===void 0||b[G.str]!==1?G:(delete b[G.str],se)}function H(G){return G instanceof t._Code&&G._items.some(se=>se instanceof t.Name&&b[se.str]===1&&P[se.str]!==void 0)}}function re(k,b){for(const P in b)k[P]=(k[P]||0)-(b[P]||0)}function de(k){return typeof k=="boolean"||typeof k=="number"||k===null?!k:(0,t._)`!${A(k)}`}e.not=de;const ie=j(e.operators.AND);function Q(...k){return k.reduce(ie)}e.and=Q;const le=j(e.operators.OR);function D(...k){return k.reduce(le)}e.or=D;function j(k){return(b,P)=>b===t.nil?P:P===t.nil?b:(0,t._)`${A(b)} ${k} ${A(P)}`}function A(k){return k instanceof t.Name?k:(0,t._)`(${k})`}})(Cr)),Cr}var x={},En;function ne(){if(En)return x;En=1,Object.defineProperty(x,"__esModule",{value:!0}),x.checkStrictMode=x.getErrorPath=x.Type=x.useFunc=x.setEvaluated=x.evaluatedPropsToName=x.mergeEvaluated=x.eachItem=x.unescapeJsonPointer=x.escapeJsonPointer=x.escapeFragment=x.unescapeFragment=x.schemaRefOrVal=x.schemaHasRulesButRef=x.schemaHasRules=x.checkUnknownRules=x.alwaysValidSchema=x.toHash=void 0;const e=Y(),t=gr();function a(d){const _={};for(const S of d)_[S]=!0;return _}x.toHash=a;function n(d,_){return typeof _=="boolean"?_:Object.keys(_).length===0?!0:(l(d,_),!r(_,d.self.RULES.all))}x.alwaysValidSchema=n;function l(d,_=d.schema){const{opts:S,self:R}=d;if(!S.strictSchema||typeof _=="boolean")return;const q=R.RULES.keywords;for(const C in _)q[C]||g(d,`unknown keyword: "${C}"`)}x.checkUnknownRules=l;function r(d,_){if(typeof d=="boolean")return!d;for(const S in d)if(_[S])return!0;return!1}x.schemaHasRules=r;function s(d,_){if(typeof d=="boolean")return!d;for(const S in d)if(S!=="$ref"&&_.all[S])return!0;return!1}x.schemaHasRulesButRef=s;function o({topSchemaRef:d,schemaPath:_},S,R,q){if(!q){if(typeof S=="number"||typeof S=="boolean")return S;if(typeof S=="string")return(0,e._)`${S}`}return(0,e._)`${d}${_}${(0,e.getProperty)(R)}`}x.schemaRefOrVal=o;function u(d){return w(decodeURIComponent(d))}x.unescapeFragment=u;function p(d){return encodeURIComponent(m(d))}x.escapeFragment=p;function m(d){return typeof d=="number"?`${d}`:d.replace(/~/g,"~0").replace(/\//g,"~1")}x.escapeJsonPointer=m;function w(d){return d.replace(/~1/g,"/").replace(/~0/g,"~")}x.unescapeJsonPointer=w;function v(d,_){if(Array.isArray(d))for(const S of d)_(S);else _(d)}x.eachItem=v;function y({mergeNames:d,mergeToName:_,mergeValues:S,resultToName:R}){return(q,C,O,V)=>{const U=O===void 0?C:O instanceof e.Name?(C instanceof e.Name?d(q,C,O):_(q,C,O),O):C instanceof e.Name?(_(q,O,C),C):S(C,O);return V===e.Name&&!(U instanceof e.Name)?R(q,U):U}}x.mergeEvaluated={props:y({mergeNames:(d,_,S)=>d.if((0,e._)`${S} !== true && ${_} !== undefined`,()=>{d.if((0,e._)`${_} === true`,()=>d.assign(S,!0),()=>d.assign(S,(0,e._)`${S} || {}`).code((0,e._)`Object.assign(${S}, ${_})`))}),mergeToName:(d,_,S)=>d.if((0,e._)`${S} !== true`,()=>{_===!0?d.assign(S,!0):(d.assign(S,(0,e._)`${S} || {}`),E(d,S,_))}),mergeValues:(d,_)=>d===!0?!0:{...d,..._},resultToName:$}),items:y({mergeNames:(d,_,S)=>d.if((0,e._)`${S} !== true && ${_} !== undefined`,()=>d.assign(S,(0,e._)`${_} === true ? true : ${S} > ${_} ? ${S} : ${_}`)),mergeToName:(d,_,S)=>d.if((0,e._)`${S} !== true`,()=>d.assign(S,_===!0?!0:(0,e._)`${S} > ${_} ? ${S} : ${_}`)),mergeValues:(d,_)=>d===!0?!0:Math.max(d,_),resultToName:(d,_)=>d.var("items",_)})};function $(d,_){if(_===!0)return d.var("props",!0);const S=d.var("props",(0,e._)`{}`);return _!==void 0&&E(d,S,_),S}x.evaluatedPropsToName=$;function E(d,_,S){Object.keys(S).forEach(R=>d.assign((0,e._)`${_}${(0,e.getProperty)(R)}`,!0))}x.setEvaluated=E;const i={};function h(d,_){return d.scopeValue("func",{ref:_,code:i[_.code]||(i[_.code]=new t._Code(_.code))})}x.useFunc=h;var c;(function(d){d[d.Num=0]="Num",d[d.Str=1]="Str"})(c||(x.Type=c={}));function f(d,_,S){if(d instanceof e.Name){const R=_===c.Num;return S?R?(0,e._)`"[" + ${d} + "]"`:(0,e._)`"['" + ${d} + "']"`:R?(0,e._)`"/" + ${d}`:(0,e._)`"/" + ${d}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return S?(0,e.getProperty)(d).toString():"/"+m(d)}x.getErrorPath=f;function g(d,_,S=d.opts.strictSchema){if(S){if(_=`strict mode: ${_}`,S===!0)throw new Error(_);d.self.logger.warn(_)}}return x.checkStrictMode=g,x}var $t={},Sn;function Me(){if(Sn)return $t;Sn=1,Object.defineProperty($t,"__esModule",{value:!0});const e=Y(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return $t.default=t,$t}var Pn;function br(){return Pn||(Pn=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Y(),a=ne(),n=Me();e.keywordError={message:({keyword:i})=>(0,t.str)`must pass "${i}" keyword validation`},e.keyword$DataError={message:({keyword:i,schemaType:h})=>h?(0,t.str)`"${i}" keyword must be ${h} ($data)`:(0,t.str)`"${i}" keyword is invalid ($data)`};function l(i,h=e.keywordError,c,f){const{it:g}=i,{gen:d,compositeRule:_,allErrors:S}=g,R=w(i,h,c);f??(_||S)?u(d,R):p(g,(0,t._)`[${R}]`)}e.reportError=l;function r(i,h=e.keywordError,c){const{it:f}=i,{gen:g,compositeRule:d,allErrors:_}=f,S=w(i,h,c);u(g,S),d||_||p(f,n.default.vErrors)}e.reportExtraError=r;function s(i,h){i.assign(n.default.errors,h),i.if((0,t._)`${n.default.vErrors} !== null`,()=>i.if(h,()=>i.assign((0,t._)`${n.default.vErrors}.length`,h),()=>i.assign(n.default.vErrors,null)))}e.resetErrorsCount=s;function o({gen:i,keyword:h,schemaValue:c,data:f,errsCount:g,it:d}){if(g===void 0)throw new Error("ajv implementation error");const _=i.name("err");i.forRange("i",g,n.default.errors,S=>{i.const(_,(0,t._)`${n.default.vErrors}[${S}]`),i.if((0,t._)`${_}.instancePath === undefined`,()=>i.assign((0,t._)`${_}.instancePath`,(0,t.strConcat)(n.default.instancePath,d.errorPath))),i.assign((0,t._)`${_}.schemaPath`,(0,t.str)`${d.errSchemaPath}/${h}`),d.opts.verbose&&(i.assign((0,t._)`${_}.schema`,c),i.assign((0,t._)`${_}.data`,f))})}e.extendErrors=o;function u(i,h){const c=i.const("err",h);i.if((0,t._)`${n.default.vErrors} === null`,()=>i.assign(n.default.vErrors,(0,t._)`[${c}]`),(0,t._)`${n.default.vErrors}.push(${c})`),i.code((0,t._)`${n.default.errors}++`)}function p(i,h){const{gen:c,validateName:f,schemaEnv:g}=i;g.$async?c.throw((0,t._)`new ${i.ValidationError}(${h})`):(c.assign((0,t._)`${f}.errors`,h),c.return(!1))}const m={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function w(i,h,c){const{createErrors:f}=i.it;return f===!1?(0,t._)`{}`:v(i,h,c)}function v(i,h,c={}){const{gen:f,it:g}=i,d=[y(g,c),$(i,c)];return E(i,h,d),f.object(...d)}function y({errorPath:i},{instancePath:h}){const c=h?(0,t.str)`${i}${(0,a.getErrorPath)(h,a.Type.Str)}`:i;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,c)]}function $({keyword:i,it:{errSchemaPath:h}},{schemaPath:c,parentSchema:f}){let g=f?h:(0,t.str)`${h}/${i}`;return c&&(g=(0,t.str)`${g}${(0,a.getErrorPath)(c,a.Type.Str)}`),[m.schemaPath,g]}function E(i,{params:h,message:c},f){const{keyword:g,data:d,schemaValue:_,it:S}=i,{opts:R,propertyName:q,topSchemaRef:C,schemaPath:O}=S;f.push([m.keyword,g],[m.params,typeof h=="function"?h(i):h||(0,t._)`{}`]),R.messages&&f.push([m.message,typeof c=="function"?c(i):c]),R.verbose&&f.push([m.schema,_],[m.parentSchema,(0,t._)`${C}${O}`],[n.default.data,d]),q&&f.push([m.propertyName,q])}})(Mr)),Mr}var In;function Io(){if(In)return Ze;In=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.boolOrEmptySchema=Ze.topBoolOrEmptySchema=void 0;const e=br(),t=Y(),a=Me(),n={message:"boolean schema is false"};function l(o){const{gen:u,schema:p,validateName:m}=o;p===!1?s(o,!1):typeof p=="object"&&p.$async===!0?u.return(a.default.data):(u.assign((0,t._)`${m}.errors`,null),u.return(!0))}Ze.topBoolOrEmptySchema=l;function r(o,u){const{gen:p,schema:m}=o;m===!1?(p.var(u,!1),s(o)):p.var(u,!0)}Ze.boolOrEmptySchema=r;function s(o,u){const{gen:p,data:m}=o,w={gen:p,keyword:"false schema",data:m,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:o};(0,e.reportError)(w,n,void 0,u)}return Ze}var _e={},Xe={},jn;function fs(){if(jn)return Xe;jn=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.getRules=Xe.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function a(l){return typeof l=="string"&&t.has(l)}Xe.isJSONType=a;function n(){const l={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...l,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},l.number,l.string,l.array,l.object],post:{rules:[]},all:{},keywords:{}}}return Xe.getRules=n,Xe}var Fe={},Rn;function ms(){if(Rn)return Fe;Rn=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.shouldUseRule=Fe.shouldUseGroup=Fe.schemaHasRulesForType=void 0;function e({schema:n,self:l},r){const s=l.RULES.types[r];return s&&s!==!0&&t(n,s)}Fe.schemaHasRulesForType=e;function t(n,l){return l.rules.some(r=>a(n,r))}Fe.shouldUseGroup=t;function a(n,l){var r;return n[l.keyword]!==void 0||((r=l.definition.implements)===null||r===void 0?void 0:r.some(s=>n[s]!==void 0))}return Fe.shouldUseRule=a,Fe}var kn;function _r(){if(kn)return _e;kn=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.reportTypeError=_e.checkDataTypes=_e.checkDataType=_e.coerceAndCheckDataType=_e.getJSONTypes=_e.getSchemaTypes=_e.DataType=void 0;const e=fs(),t=ms(),a=br(),n=Y(),l=ne();var r;(function(c){c[c.Correct=0]="Correct",c[c.Wrong=1]="Wrong"})(r||(_e.DataType=r={}));function s(c){const f=o(c.type);if(f.includes("null")){if(c.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!f.length&&c.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');c.nullable===!0&&f.push("null")}return f}_e.getSchemaTypes=s;function o(c){const f=Array.isArray(c)?c:c?[c]:[];if(f.every(e.isJSONType))return f;throw new Error("type must be JSONType or JSONType[]: "+f.join(","))}_e.getJSONTypes=o;function u(c,f){const{gen:g,data:d,opts:_}=c,S=m(f,_.coerceTypes),R=f.length>0&&!(S.length===0&&f.length===1&&(0,t.schemaHasRulesForType)(c,f[0]));if(R){const q=$(f,d,_.strictNumbers,r.Wrong);g.if(q,()=>{S.length?w(c,f,S):i(c)})}return R}_e.coerceAndCheckDataType=u;const p=new Set(["string","number","integer","boolean","null"]);function m(c,f){return f?c.filter(g=>p.has(g)||f==="array"&&g==="array"):[]}function w(c,f,g){const{gen:d,data:_,opts:S}=c,R=d.let("dataType",(0,n._)`typeof ${_}`),q=d.let("coerced",(0,n._)`undefined`);S.coerceTypes==="array"&&d.if((0,n._)`${R} == 'object' && Array.isArray(${_}) && ${_}.length == 1`,()=>d.assign(_,(0,n._)`${_}[0]`).assign(R,(0,n._)`typeof ${_}`).if($(f,_,S.strictNumbers),()=>d.assign(q,_))),d.if((0,n._)`${q} !== undefined`);for(const O of g)(p.has(O)||O==="array"&&S.coerceTypes==="array")&&C(O);d.else(),i(c),d.endIf(),d.if((0,n._)`${q} !== undefined`,()=>{d.assign(_,q),v(c,q)});function C(O){switch(O){case"string":d.elseIf((0,n._)`${R} == "number" || ${R} == "boolean"`).assign(q,(0,n._)`"" + ${_}`).elseIf((0,n._)`${_} === null`).assign(q,(0,n._)`""`);return;case"number":d.elseIf((0,n._)`${R} == "boolean" || ${_} === null
              || (${R} == "string" && ${_} && ${_} == +${_})`).assign(q,(0,n._)`+${_}`);return;case"integer":d.elseIf((0,n._)`${R} === "boolean" || ${_} === null
              || (${R} === "string" && ${_} && ${_} == +${_} && !(${_} % 1))`).assign(q,(0,n._)`+${_}`);return;case"boolean":d.elseIf((0,n._)`${_} === "false" || ${_} === 0 || ${_} === null`).assign(q,!1).elseIf((0,n._)`${_} === "true" || ${_} === 1`).assign(q,!0);return;case"null":d.elseIf((0,n._)`${_} === "" || ${_} === 0 || ${_} === false`),d.assign(q,null);return;case"array":d.elseIf((0,n._)`${R} === "string" || ${R} === "number"
              || ${R} === "boolean" || ${_} === null`).assign(q,(0,n._)`[${_}]`)}}}function v({gen:c,parentData:f,parentDataProperty:g},d){c.if((0,n._)`${f} !== undefined`,()=>c.assign((0,n._)`${f}[${g}]`,d))}function y(c,f,g,d=r.Correct){const _=d===r.Correct?n.operators.EQ:n.operators.NEQ;let S;switch(c){case"null":return(0,n._)`${f} ${_} null`;case"array":S=(0,n._)`Array.isArray(${f})`;break;case"object":S=(0,n._)`${f} && typeof ${f} == "object" && !Array.isArray(${f})`;break;case"integer":S=R((0,n._)`!(${f} % 1) && !isNaN(${f})`);break;case"number":S=R();break;default:return(0,n._)`typeof ${f} ${_} ${c}`}return d===r.Correct?S:(0,n.not)(S);function R(q=n.nil){return(0,n.and)((0,n._)`typeof ${f} == "number"`,q,g?(0,n._)`isFinite(${f})`:n.nil)}}_e.checkDataType=y;function $(c,f,g,d){if(c.length===1)return y(c[0],f,g,d);let _;const S=(0,l.toHash)(c);if(S.array&&S.object){const R=(0,n._)`typeof ${f} != "object"`;_=S.null?R:(0,n._)`!${f} || ${R}`,delete S.null,delete S.array,delete S.object}else _=n.nil;S.number&&delete S.integer;for(const R in S)_=(0,n.and)(_,y(R,f,g,d));return _}_e.checkDataTypes=$;const E={message:({schema:c})=>`must be ${c}`,params:({schema:c,schemaValue:f})=>typeof c=="string"?(0,n._)`{type: ${c}}`:(0,n._)`{type: ${f}}`};function i(c){const f=h(c);(0,a.reportError)(f,E)}_e.reportTypeError=i;function h(c){const{gen:f,data:g,schema:d}=c,_=(0,l.schemaRefOrVal)(c,d,"type");return{gen:f,keyword:"type",data:g,schema:d.type,schemaCode:_,schemaValue:_,parentSchema:d,params:{},it:c}}return _e}var ct={},Nn;function jo(){if(Nn)return ct;Nn=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.assignDefaults=void 0;const e=Y(),t=ne();function a(l,r){const{properties:s,items:o}=l.schema;if(r==="object"&&s)for(const u in s)n(l,u,s[u].default);else r==="array"&&Array.isArray(o)&&o.forEach((u,p)=>n(l,p,u.default))}ct.assignDefaults=a;function n(l,r,s){const{gen:o,compositeRule:u,data:p,opts:m}=l;if(s===void 0)return;const w=(0,e._)`${p}${(0,e.getProperty)(r)}`;if(u){(0,t.checkStrictMode)(l,`default is ignored for: ${w}`);return}let v=(0,e._)`${w} === undefined`;m.useDefaults==="empty"&&(v=(0,e._)`${v} || ${w} === null || ${w} === ""`),o.if(v,(0,e._)`${w} = ${(0,e.stringify)(s)}`)}return ct}var Ae={},oe={},On;function Ce(){if(On)return oe;On=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.validateUnion=oe.validateArray=oe.usePattern=oe.callValidateCode=oe.schemaProperties=oe.allSchemaProperties=oe.noPropertyInData=oe.propertyInData=oe.isOwnProperty=oe.hasPropFunc=oe.reportMissingProp=oe.checkMissingProp=oe.checkReportMissingProp=void 0;const e=Y(),t=ne(),a=Me(),n=ne();function l(c,f){const{gen:g,data:d,it:_}=c;g.if(m(g,d,f,_.opts.ownProperties),()=>{c.setParams({missingProperty:(0,e._)`${f}`},!0),c.error()})}oe.checkReportMissingProp=l;function r({gen:c,data:f,it:{opts:g}},d,_){return(0,e.or)(...d.map(S=>(0,e.and)(m(c,f,S,g.ownProperties),(0,e._)`${_} = ${S}`)))}oe.checkMissingProp=r;function s(c,f){c.setParams({missingProperty:f},!0),c.error()}oe.reportMissingProp=s;function o(c){return c.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}oe.hasPropFunc=o;function u(c,f,g){return(0,e._)`${o(c)}.call(${f}, ${g})`}oe.isOwnProperty=u;function p(c,f,g,d){const _=(0,e._)`${f}${(0,e.getProperty)(g)} !== undefined`;return d?(0,e._)`${_} && ${u(c,f,g)}`:_}oe.propertyInData=p;function m(c,f,g,d){const _=(0,e._)`${f}${(0,e.getProperty)(g)} === undefined`;return d?(0,e.or)(_,(0,e.not)(u(c,f,g))):_}oe.noPropertyInData=m;function w(c){return c?Object.keys(c).filter(f=>f!=="__proto__"):[]}oe.allSchemaProperties=w;function v(c,f){return w(f).filter(g=>!(0,t.alwaysValidSchema)(c,f[g]))}oe.schemaProperties=v;function y({schemaCode:c,data:f,it:{gen:g,topSchemaRef:d,schemaPath:_,errorPath:S},it:R},q,C,O){const V=O?(0,e._)`${c}, ${f}, ${d}${_}`:f,U=[[a.default.instancePath,(0,e.strConcat)(a.default.instancePath,S)],[a.default.parentData,R.parentData],[a.default.parentDataProperty,R.parentDataProperty],[a.default.rootData,a.default.rootData]];R.opts.dynamicRef&&U.push([a.default.dynamicAnchors,a.default.dynamicAnchors]);const L=(0,e._)`${V}, ${g.object(...U)}`;return C!==e.nil?(0,e._)`${q}.call(${C}, ${L})`:(0,e._)`${q}(${L})`}oe.callValidateCode=y;const $=(0,e._)`new RegExp`;function E({gen:c,it:{opts:f}},g){const d=f.unicodeRegExp?"u":"",{regExp:_}=f.code,S=_(g,d);return c.scopeValue("pattern",{key:S.toString(),ref:S,code:(0,e._)`${_.code==="new RegExp"?$:(0,n.useFunc)(c,_)}(${g}, ${d})`})}oe.usePattern=E;function i(c){const{gen:f,data:g,keyword:d,it:_}=c,S=f.name("valid");if(_.allErrors){const q=f.let("valid",!0);return R(()=>f.assign(q,!1)),q}return f.var(S,!0),R(()=>f.break()),S;function R(q){const C=f.const("len",(0,e._)`${g}.length`);f.forRange("i",0,C,O=>{c.subschema({keyword:d,dataProp:O,dataPropType:t.Type.Num},S),f.if((0,e.not)(S),q)})}}oe.validateArray=i;function h(c){const{gen:f,schema:g,keyword:d,it:_}=c;if(!Array.isArray(g))throw new Error("ajv implementation error");if(g.some(C=>(0,t.alwaysValidSchema)(_,C))&&!_.opts.unevaluated)return;const R=f.let("valid",!1),q=f.name("_valid");f.block(()=>g.forEach((C,O)=>{const V=c.subschema({keyword:d,schemaProp:O,compositeRule:!0},q);f.assign(R,(0,e._)`${R} || ${q}`),c.mergeValidEvaluated(V,q)||f.if((0,e.not)(R))})),c.result(R,()=>c.reset(),()=>c.error(!0))}return oe.validateUnion=h,oe}var qn;function Ro(){if(qn)return Ae;qn=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.validateKeywordUsage=Ae.validSchemaType=Ae.funcKeywordCode=Ae.macroKeywordCode=void 0;const e=Y(),t=Me(),a=Ce(),n=br();function l(v,y){const{gen:$,keyword:E,schema:i,parentSchema:h,it:c}=v,f=y.macro.call(c.self,i,h,c),g=p($,E,f);c.opts.validateSchema!==!1&&c.self.validateSchema(f,!0);const d=$.name("valid");v.subschema({schema:f,schemaPath:e.nil,errSchemaPath:`${c.errSchemaPath}/${E}`,topSchemaRef:g,compositeRule:!0},d),v.pass(d,()=>v.error(!0))}Ae.macroKeywordCode=l;function r(v,y){var $;const{gen:E,keyword:i,schema:h,parentSchema:c,$data:f,it:g}=v;u(g,y);const d=!f&&y.compile?y.compile.call(g.self,h,c,g):y.validate,_=p(E,i,d),S=E.let("valid");v.block$data(S,R),v.ok(($=y.valid)!==null&&$!==void 0?$:S);function R(){if(y.errors===!1)O(),y.modifying&&s(v),V(()=>v.error());else{const U=y.async?q():C();y.modifying&&s(v),V(()=>o(v,U))}}function q(){const U=E.let("ruleErrs",null);return E.try(()=>O((0,e._)`await `),L=>E.assign(S,!1).if((0,e._)`${L} instanceof ${g.ValidationError}`,()=>E.assign(U,(0,e._)`${L}.errors`),()=>E.throw(L))),U}function C(){const U=(0,e._)`${_}.errors`;return E.assign(U,null),O(e.nil),U}function O(U=y.async?(0,e._)`await `:e.nil){const L=g.opts.passContext?t.default.this:t.default.self,re=!("compile"in y&&!f||y.schema===!1);E.assign(S,(0,e._)`${U}${(0,a.callValidateCode)(v,_,L,re)}`,y.modifying)}function V(U){var L;E.if((0,e.not)((L=y.valid)!==null&&L!==void 0?L:S),U)}}Ae.funcKeywordCode=r;function s(v){const{gen:y,data:$,it:E}=v;y.if(E.parentData,()=>y.assign($,(0,e._)`${E.parentData}[${E.parentDataProperty}]`))}function o(v,y){const{gen:$}=v;$.if((0,e._)`Array.isArray(${y})`,()=>{$.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${y} : ${t.default.vErrors}.concat(${y})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,n.extendErrors)(v)},()=>v.error())}function u({schemaEnv:v},y){if(y.async&&!v.$async)throw new Error("async keyword in sync schema")}function p(v,y,$){if($===void 0)throw new Error(`keyword "${y}" failed to compile`);return v.scopeValue("keyword",typeof $=="function"?{ref:$}:{ref:$,code:(0,e.stringify)($)})}function m(v,y,$=!1){return!y.length||y.some(E=>E==="array"?Array.isArray(v):E==="object"?v&&typeof v=="object"&&!Array.isArray(v):typeof v==E||$&&typeof v>"u")}Ae.validSchemaType=m;function w({schema:v,opts:y,self:$,errSchemaPath:E},i,h){if(Array.isArray(i.keyword)?!i.keyword.includes(h):i.keyword!==h)throw new Error("ajv implementation error");const c=i.dependencies;if(c?.some(f=>!Object.prototype.hasOwnProperty.call(v,f)))throw new Error(`parent schema must have dependencies of ${h}: ${c.join(",")}`);if(i.validateSchema&&!i.validateSchema(v[h])){const g=`keyword "${h}" value is invalid at path "${E}": `+$.errorsText(i.validateSchema.errors);if(y.validateSchema==="log")$.logger.error(g);else throw new Error(g)}}return Ae.validateKeywordUsage=w,Ae}var Le={},Tn;function ko(){if(Tn)return Le;Tn=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.extendSubschemaMode=Le.extendSubschemaData=Le.getSubschema=void 0;const e=Y(),t=ne();function a(r,{keyword:s,schemaProp:o,schema:u,schemaPath:p,errSchemaPath:m,topSchemaRef:w}){if(s!==void 0&&u!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(s!==void 0){const v=r.schema[s];return o===void 0?{schema:v,schemaPath:(0,e._)`${r.schemaPath}${(0,e.getProperty)(s)}`,errSchemaPath:`${r.errSchemaPath}/${s}`}:{schema:v[o],schemaPath:(0,e._)`${r.schemaPath}${(0,e.getProperty)(s)}${(0,e.getProperty)(o)}`,errSchemaPath:`${r.errSchemaPath}/${s}/${(0,t.escapeFragment)(o)}`}}if(u!==void 0){if(p===void 0||m===void 0||w===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:u,schemaPath:p,topSchemaRef:w,errSchemaPath:m}}throw new Error('either "keyword" or "schema" must be passed')}Le.getSubschema=a;function n(r,s,{dataProp:o,dataPropType:u,data:p,dataTypes:m,propertyName:w}){if(p!==void 0&&o!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:v}=s;if(o!==void 0){const{errorPath:$,dataPathArr:E,opts:i}=s,h=v.let("data",(0,e._)`${s.data}${(0,e.getProperty)(o)}`,!0);y(h),r.errorPath=(0,e.str)`${$}${(0,t.getErrorPath)(o,u,i.jsPropertySyntax)}`,r.parentDataProperty=(0,e._)`${o}`,r.dataPathArr=[...E,r.parentDataProperty]}if(p!==void 0){const $=p instanceof e.Name?p:v.let("data",p,!0);y($),w!==void 0&&(r.propertyName=w)}m&&(r.dataTypes=m);function y($){r.data=$,r.dataLevel=s.dataLevel+1,r.dataTypes=[],s.definedProperties=new Set,r.parentData=s.data,r.dataNames=[...s.dataNames,$]}}Le.extendSubschemaData=n;function l(r,{jtdDiscriminator:s,jtdMetadata:o,compositeRule:u,createErrors:p,allErrors:m}){u!==void 0&&(r.compositeRule=u),p!==void 0&&(r.createErrors=p),m!==void 0&&(r.allErrors=m),r.jtdDiscriminator=s,r.jtdMetadata=o}return Le.extendSubschemaMode=l,Le}var Ee={},Vr,An;function hs(){return An||(An=1,Vr=function e(t,a){if(t===a)return!0;if(t&&a&&typeof t=="object"&&typeof a=="object"){if(t.constructor!==a.constructor)return!1;var n,l,r;if(Array.isArray(t)){if(n=t.length,n!=a.length)return!1;for(l=n;l--!==0;)if(!e(t[l],a[l]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if(r=Object.keys(t),n=r.length,n!==Object.keys(a).length)return!1;for(l=n;l--!==0;)if(!Object.prototype.hasOwnProperty.call(a,r[l]))return!1;for(l=n;l--!==0;){var s=r[l];if(!e(t[s],a[s]))return!1}return!0}return t!==t&&a!==a}),Vr}var Ur={exports:{}},Mn;function No(){if(Mn)return Ur.exports;Mn=1;var e=Ur.exports=function(n,l,r){typeof l=="function"&&(r=l,l={}),r=l.cb||r;var s=typeof r=="function"?r:r.pre||function(){},o=r.post||function(){};t(l,s,o,n,"",n)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(n,l,r,s,o,u,p,m,w,v){if(s&&typeof s=="object"&&!Array.isArray(s)){l(s,o,u,p,m,w,v);for(var y in s){var $=s[y];if(Array.isArray($)){if(y in e.arrayKeywords)for(var E=0;E<$.length;E++)t(n,l,r,$[E],o+"/"+y+"/"+E,u,o,y,s,E)}else if(y in e.propsKeywords){if($&&typeof $=="object")for(var i in $)t(n,l,r,$[i],o+"/"+y+"/"+a(i),u,o,y,s,i)}else(y in e.keywords||n.allKeys&&!(y in e.skipKeywords))&&t(n,l,r,$,o+"/"+y,u,o,y,s)}r(s,o,u,p,m,w,v)}}function a(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}return Ur.exports}var Cn;function wr(){if(Cn)return Ee;Cn=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.getSchemaRefs=Ee.resolveUrl=Ee.normalizeId=Ee._getFullPath=Ee.getFullPath=Ee.inlineRef=void 0;const e=ne(),t=hs(),a=No(),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function l(E,i=!0){return typeof E=="boolean"?!0:i===!0?!s(E):i?o(E)<=i:!1}Ee.inlineRef=l;const r=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function s(E){for(const i in E){if(r.has(i))return!0;const h=E[i];if(Array.isArray(h)&&h.some(s)||typeof h=="object"&&s(h))return!0}return!1}function o(E){let i=0;for(const h in E){if(h==="$ref")return 1/0;if(i++,!n.has(h)&&(typeof E[h]=="object"&&(0,e.eachItem)(E[h],c=>i+=o(c)),i===1/0))return 1/0}return i}function u(E,i="",h){h!==!1&&(i=w(i));const c=E.parse(i);return p(E,c)}Ee.getFullPath=u;function p(E,i){return E.serialize(i).split("#")[0]+"#"}Ee._getFullPath=p;const m=/#\/?$/;function w(E){return E?E.replace(m,""):""}Ee.normalizeId=w;function v(E,i,h){return h=w(h),E.resolve(i,h)}Ee.resolveUrl=v;const y=/^[a-z_][-a-z0-9._]*$/i;function $(E,i){if(typeof E=="boolean")return{};const{schemaId:h,uriResolver:c}=this.opts,f=w(E[h]||i),g={"":f},d=u(c,f,!1),_={},S=new Set;return a(E,{allKeys:!0},(C,O,V,U)=>{if(U===void 0)return;const L=d+O;let re=g[U];typeof C[h]=="string"&&(re=de.call(this,C[h])),ie.call(this,C.$anchor),ie.call(this,C.$dynamicAnchor),g[O]=re;function de(Q){const le=this.opts.uriResolver.resolve;if(Q=w(re?le(re,Q):Q),S.has(Q))throw q(Q);S.add(Q);let D=this.refs[Q];return typeof D=="string"&&(D=this.refs[D]),typeof D=="object"?R(C,D.schema,Q):Q!==w(L)&&(Q[0]==="#"?(R(C,_[Q],Q),_[Q]=C):this.refs[Q]=L),Q}function ie(Q){if(typeof Q=="string"){if(!y.test(Q))throw new Error(`invalid anchor "${Q}"`);de.call(this,`#${Q}`)}}}),_;function R(C,O,V){if(O!==void 0&&!t(C,O))throw q(V)}function q(C){return new Error(`reference "${C}" resolves to more than one schema`)}}return Ee.getSchemaRefs=$,Ee}var Dn;function vt(){if(Dn)return Ue;Dn=1,Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.getData=Ue.KeywordCxt=Ue.validateFunctionCode=void 0;const e=Io(),t=_r(),a=ms(),n=_r(),l=jo(),r=Ro(),s=ko(),o=Y(),u=Me(),p=wr(),m=ne(),w=br();function v(I){if(d(I)&&(S(I),g(I))){i(I);return}y(I,()=>(0,e.topBoolOrEmptySchema)(I))}Ue.validateFunctionCode=v;function y({gen:I,validateName:N,schema:M,schemaEnv:F,opts:K},ee){K.code.es5?I.func(N,(0,o._)`${u.default.data}, ${u.default.valCxt}`,F.$async,()=>{I.code((0,o._)`"use strict"; ${c(M,K)}`),E(I,K),I.code(ee)}):I.func(N,(0,o._)`${u.default.data}, ${$(K)}`,F.$async,()=>I.code(c(M,K)).code(ee))}function $(I){return(0,o._)`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${I.dynamicRef?(0,o._)`, ${u.default.dynamicAnchors}={}`:o.nil}}={}`}function E(I,N){I.if(u.default.valCxt,()=>{I.var(u.default.instancePath,(0,o._)`${u.default.valCxt}.${u.default.instancePath}`),I.var(u.default.parentData,(0,o._)`${u.default.valCxt}.${u.default.parentData}`),I.var(u.default.parentDataProperty,(0,o._)`${u.default.valCxt}.${u.default.parentDataProperty}`),I.var(u.default.rootData,(0,o._)`${u.default.valCxt}.${u.default.rootData}`),N.dynamicRef&&I.var(u.default.dynamicAnchors,(0,o._)`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{I.var(u.default.instancePath,(0,o._)`""`),I.var(u.default.parentData,(0,o._)`undefined`),I.var(u.default.parentDataProperty,(0,o._)`undefined`),I.var(u.default.rootData,u.default.data),N.dynamicRef&&I.var(u.default.dynamicAnchors,(0,o._)`{}`)})}function i(I){const{schema:N,opts:M,gen:F}=I;y(I,()=>{M.$comment&&N.$comment&&U(I),C(I),F.let(u.default.vErrors,null),F.let(u.default.errors,0),M.unevaluated&&h(I),R(I),L(I)})}function h(I){const{gen:N,validateName:M}=I;I.evaluated=N.const("evaluated",(0,o._)`${M}.evaluated`),N.if((0,o._)`${I.evaluated}.dynamicProps`,()=>N.assign((0,o._)`${I.evaluated}.props`,(0,o._)`undefined`)),N.if((0,o._)`${I.evaluated}.dynamicItems`,()=>N.assign((0,o._)`${I.evaluated}.items`,(0,o._)`undefined`))}function c(I,N){const M=typeof I=="object"&&I[N.schemaId];return M&&(N.code.source||N.code.process)?(0,o._)`/*# sourceURL=${M} */`:o.nil}function f(I,N){if(d(I)&&(S(I),g(I))){_(I,N);return}(0,e.boolOrEmptySchema)(I,N)}function g({schema:I,self:N}){if(typeof I=="boolean")return!I;for(const M in I)if(N.RULES.all[M])return!0;return!1}function d(I){return typeof I.schema!="boolean"}function _(I,N){const{schema:M,gen:F,opts:K}=I;K.$comment&&M.$comment&&U(I),O(I),V(I);const ee=F.const("_errs",u.default.errors);R(I,ee),F.var(N,(0,o._)`${ee} === ${u.default.errors}`)}function S(I){(0,m.checkUnknownRules)(I),q(I)}function R(I,N){if(I.opts.jtd)return de(I,[],!1,N);const M=(0,t.getSchemaTypes)(I.schema),F=(0,t.coerceAndCheckDataType)(I,M);de(I,M,!F,N)}function q(I){const{schema:N,errSchemaPath:M,opts:F,self:K}=I;N.$ref&&F.ignoreKeywordsWithRef&&(0,m.schemaHasRulesButRef)(N,K.RULES)&&K.logger.warn(`$ref: keywords ignored in schema at path "${M}"`)}function C(I){const{schema:N,opts:M}=I;N.default!==void 0&&M.useDefaults&&M.strictSchema&&(0,m.checkStrictMode)(I,"default is ignored in the schema root")}function O(I){const N=I.schema[I.opts.schemaId];N&&(I.baseId=(0,p.resolveUrl)(I.opts.uriResolver,I.baseId,N))}function V(I){if(I.schema.$async&&!I.schemaEnv.$async)throw new Error("async schema in sync schema")}function U({gen:I,schemaEnv:N,schema:M,errSchemaPath:F,opts:K}){const ee=M.$comment;if(K.$comment===!0)I.code((0,o._)`${u.default.self}.logger.log(${ee})`);else if(typeof K.$comment=="function"){const ye=(0,o.str)`${F}/$comment`,Te=I.scopeValue("root",{ref:N.root});I.code((0,o._)`${u.default.self}.opts.$comment(${ee}, ${ye}, ${Te}.schema)`)}}function L(I){const{gen:N,schemaEnv:M,validateName:F,ValidationError:K,opts:ee}=I;M.$async?N.if((0,o._)`${u.default.errors} === 0`,()=>N.return(u.default.data),()=>N.throw((0,o._)`new ${K}(${u.default.vErrors})`)):(N.assign((0,o._)`${F}.errors`,u.default.vErrors),ee.unevaluated&&re(I),N.return((0,o._)`${u.default.errors} === 0`))}function re({gen:I,evaluated:N,props:M,items:F}){M instanceof o.Name&&I.assign((0,o._)`${N}.props`,M),F instanceof o.Name&&I.assign((0,o._)`${N}.items`,F)}function de(I,N,M,F){const{gen:K,schema:ee,data:ye,allErrors:Te,opts:Se,self:Pe}=I,{RULES:ge}=Pe;if(ee.$ref&&(Se.ignoreKeywordsWithRef||!(0,m.schemaHasRulesButRef)(ee,ge))){K.block(()=>H(I,"$ref",ge.all.$ref.definition));return}Se.jtd||Q(I,N),K.block(()=>{for(const Oe of ge.rules)tt(Oe);tt(ge.post)});function tt(Oe){(0,a.shouldUseGroup)(ee,Oe)&&(Oe.type?(K.if((0,n.checkDataType)(Oe.type,ye,Se.strictNumbers)),ie(I,Oe),N.length===1&&N[0]===Oe.type&&M&&(K.else(),(0,n.reportTypeError)(I)),K.endIf()):ie(I,Oe),Te||K.if((0,o._)`${u.default.errors} === ${F||0}`))}}function ie(I,N){const{gen:M,schema:F,opts:{useDefaults:K}}=I;K&&(0,l.assignDefaults)(I,N.type),M.block(()=>{for(const ee of N.rules)(0,a.shouldUseRule)(F,ee)&&H(I,ee.keyword,ee.definition,N.type)})}function Q(I,N){I.schemaEnv.meta||!I.opts.strictTypes||(le(I,N),I.opts.allowUnionTypes||D(I,N),j(I,I.dataTypes))}function le(I,N){if(N.length){if(!I.dataTypes.length){I.dataTypes=N;return}N.forEach(M=>{k(I.dataTypes,M)||P(I,`type "${M}" not allowed by context "${I.dataTypes.join(",")}"`)}),b(I,N)}}function D(I,N){N.length>1&&!(N.length===2&&N.includes("null"))&&P(I,"use allowUnionTypes to allow union type keyword")}function j(I,N){const M=I.self.RULES.all;for(const F in M){const K=M[F];if(typeof K=="object"&&(0,a.shouldUseRule)(I.schema,K)){const{type:ee}=K.definition;ee.length&&!ee.some(ye=>A(N,ye))&&P(I,`missing type "${ee.join(",")}" for keyword "${F}"`)}}}function A(I,N){return I.includes(N)||N==="number"&&I.includes("integer")}function k(I,N){return I.includes(N)||N==="integer"&&I.includes("number")}function b(I,N){const M=[];for(const F of I.dataTypes)k(N,F)?M.push(F):N.includes("integer")&&F==="number"&&M.push("integer");I.dataTypes=M}function P(I,N){const M=I.schemaEnv.baseId+I.errSchemaPath;N+=` at "${M}" (strictTypes)`,(0,m.checkStrictMode)(I,N,I.opts.strictTypes)}class T{constructor(N,M,F){if((0,r.validateKeywordUsage)(N,M,F),this.gen=N.gen,this.allErrors=N.allErrors,this.keyword=F,this.data=N.data,this.schema=N.schema[F],this.$data=M.$data&&N.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,m.schemaRefOrVal)(N,this.schema,F,this.$data),this.schemaType=M.schemaType,this.parentSchema=N.schema,this.params={},this.it=N,this.def=M,this.$data)this.schemaCode=N.gen.const("vSchema",ae(this.$data,N));else if(this.schemaCode=this.schemaValue,!(0,r.validSchemaType)(this.schema,M.schemaType,M.allowUndefined))throw new Error(`${F} value must be ${JSON.stringify(M.schemaType)}`);("code"in M?M.trackErrors:M.errors!==!1)&&(this.errsCount=N.gen.const("_errs",u.default.errors))}result(N,M,F){this.failResult((0,o.not)(N),M,F)}failResult(N,M,F){this.gen.if(N),F?F():this.error(),M?(this.gen.else(),M(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(N,M){this.failResult((0,o.not)(N),void 0,M)}fail(N){if(N===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(N),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(N){if(!this.$data)return this.fail(N);const{schemaCode:M}=this;this.fail((0,o._)`${M} !== undefined && (${(0,o.or)(this.invalid$data(),N)})`)}error(N,M,F){if(M){this.setParams(M),this._error(N,F),this.setParams({});return}this._error(N,F)}_error(N,M){(N?w.reportExtraError:w.reportError)(this,this.def.error,M)}$dataError(){(0,w.reportError)(this,this.def.$dataError||w.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,w.resetErrorsCount)(this.gen,this.errsCount)}ok(N){this.allErrors||this.gen.if(N)}setParams(N,M){M?Object.assign(this.params,N):this.params=N}block$data(N,M,F=o.nil){this.gen.block(()=>{this.check$data(N,F),M()})}check$data(N=o.nil,M=o.nil){if(!this.$data)return;const{gen:F,schemaCode:K,schemaType:ee,def:ye}=this;F.if((0,o.or)((0,o._)`${K} === undefined`,M)),N!==o.nil&&F.assign(N,!0),(ee.length||ye.validateSchema)&&(F.elseIf(this.invalid$data()),this.$dataError(),N!==o.nil&&F.assign(N,!1)),F.else()}invalid$data(){const{gen:N,schemaCode:M,schemaType:F,def:K,it:ee}=this;return(0,o.or)(ye(),Te());function ye(){if(F.length){if(!(M instanceof o.Name))throw new Error("ajv implementation error");const Se=Array.isArray(F)?F:[F];return(0,o._)`${(0,n.checkDataTypes)(Se,M,ee.opts.strictNumbers,n.DataType.Wrong)}`}return o.nil}function Te(){if(K.validateSchema){const Se=N.scopeValue("validate$data",{ref:K.validateSchema});return(0,o._)`!${Se}(${M})`}return o.nil}}subschema(N,M){const F=(0,s.getSubschema)(this.it,N);(0,s.extendSubschemaData)(F,this.it,N),(0,s.extendSubschemaMode)(F,N);const K={...this.it,...F,items:void 0,props:void 0};return f(K,M),K}mergeEvaluated(N,M){const{it:F,gen:K}=this;F.opts.unevaluated&&(F.props!==!0&&N.props!==void 0&&(F.props=m.mergeEvaluated.props(K,N.props,F.props,M)),F.items!==!0&&N.items!==void 0&&(F.items=m.mergeEvaluated.items(K,N.items,F.items,M)))}mergeValidEvaluated(N,M){const{it:F,gen:K}=this;if(F.opts.unevaluated&&(F.props!==!0||F.items!==!0))return K.if(M,()=>this.mergeEvaluated(N,o.Name)),!0}}Ue.KeywordCxt=T;function H(I,N,M,F){const K=new T(I,M,N);"code"in M?M.code(K,F):K.$data&&M.validate?(0,r.funcKeywordCode)(K,M):"macro"in M?(0,r.macroKeywordCode)(K,M):(M.compile||M.validate)&&(0,r.funcKeywordCode)(K,M)}const G=/^\/(?:[^~]|~0|~1)*$/,se=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ae(I,{dataLevel:N,dataNames:M,dataPathArr:F}){let K,ee;if(I==="")return u.default.rootData;if(I[0]==="/"){if(!G.test(I))throw new Error(`Invalid JSON-pointer: ${I}`);K=I,ee=u.default.rootData}else{const Pe=se.exec(I);if(!Pe)throw new Error(`Invalid JSON-pointer: ${I}`);const ge=+Pe[1];if(K=Pe[2],K==="#"){if(ge>=N)throw new Error(Se("property/index",ge));return F[N-ge]}if(ge>N)throw new Error(Se("data",ge));if(ee=M[N-ge],!K)return ee}let ye=ee;const Te=K.split("/");for(const Pe of Te)Pe&&(ee=(0,o._)`${ee}${(0,o.getProperty)((0,m.unescapeJsonPointer)(Pe))}`,ye=(0,o._)`${ye} && ${ee}`);return ye;function Se(Pe,ge){return`Cannot access ${Pe} ${ge} levels up, current level is ${N}`}}return Ue.getData=ae,Ue}var bt={},zn;function Er(){if(zn)return bt;zn=1,Object.defineProperty(bt,"__esModule",{value:!0});class e extends Error{constructor(a){super("validation failed"),this.errors=a,this.ajv=this.validation=!0}}return bt.default=e,bt}var wt={},Vn;function yt(){if(Vn)return wt;Vn=1,Object.defineProperty(wt,"__esModule",{value:!0});const e=wr();class t extends Error{constructor(n,l,r,s){super(s||`can't resolve reference ${r} from id ${l}`),this.missingRef=(0,e.resolveUrl)(n,l,r),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(n,this.missingRef))}}return wt.default=t,wt}var je={},Un;function Sr(){if(Un)return je;Un=1,Object.defineProperty(je,"__esModule",{value:!0}),je.resolveSchema=je.getCompilingSchema=je.resolveRef=je.compileSchema=je.SchemaEnv=void 0;const e=Y(),t=Er(),a=Me(),n=wr(),l=ne(),r=vt();class s{constructor(h){var c;this.refs={},this.dynamicAnchors={};let f;typeof h.schema=="object"&&(f=h.schema),this.schema=h.schema,this.schemaId=h.schemaId,this.root=h.root||this,this.baseId=(c=h.baseId)!==null&&c!==void 0?c:(0,n.normalizeId)(f?.[h.schemaId||"$id"]),this.schemaPath=h.schemaPath,this.localRefs=h.localRefs,this.meta=h.meta,this.$async=f?.$async,this.refs={}}}je.SchemaEnv=s;function o(i){const h=m.call(this,i);if(h)return h;const c=(0,n.getFullPath)(this.opts.uriResolver,i.root.baseId),{es5:f,lines:g}=this.opts.code,{ownProperties:d}=this.opts,_=new e.CodeGen(this.scope,{es5:f,lines:g,ownProperties:d});let S;i.$async&&(S=_.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const R=_.scopeName("validate");i.validateName=R;const q={gen:_,allErrors:this.opts.allErrors,data:a.default.data,parentData:a.default.parentData,parentDataProperty:a.default.parentDataProperty,dataNames:[a.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:_.scopeValue("schema",this.opts.code.source===!0?{ref:i.schema,code:(0,e.stringify)(i.schema)}:{ref:i.schema}),validateName:R,ValidationError:S,schema:i.schema,schemaEnv:i,rootId:c,baseId:i.baseId||c,schemaPath:e.nil,errSchemaPath:i.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let C;try{this._compilations.add(i),(0,r.validateFunctionCode)(q),_.optimize(this.opts.code.optimize);const O=_.toString();C=`${_.scopeRefs(a.default.scope)}return ${O}`,this.opts.code.process&&(C=this.opts.code.process(C,i));const U=new Function(`${a.default.self}`,`${a.default.scope}`,C)(this,this.scope.get());if(this.scope.value(R,{ref:U}),U.errors=null,U.schema=i.schema,U.schemaEnv=i,i.$async&&(U.$async=!0),this.opts.code.source===!0&&(U.source={validateName:R,validateCode:O,scopeValues:_._values}),this.opts.unevaluated){const{props:L,items:re}=q;U.evaluated={props:L instanceof e.Name?void 0:L,items:re instanceof e.Name?void 0:re,dynamicProps:L instanceof e.Name,dynamicItems:re instanceof e.Name},U.source&&(U.source.evaluated=(0,e.stringify)(U.evaluated))}return i.validate=U,i}catch(O){throw delete i.validate,delete i.validateName,C&&this.logger.error("Error compiling schema, function code:",C),O}finally{this._compilations.delete(i)}}je.compileSchema=o;function u(i,h,c){var f;c=(0,n.resolveUrl)(this.opts.uriResolver,h,c);const g=i.refs[c];if(g)return g;let d=v.call(this,i,c);if(d===void 0){const _=(f=i.localRefs)===null||f===void 0?void 0:f[c],{schemaId:S}=this.opts;_&&(d=new s({schema:_,schemaId:S,root:i,baseId:h}))}if(d!==void 0)return i.refs[c]=p.call(this,d)}je.resolveRef=u;function p(i){return(0,n.inlineRef)(i.schema,this.opts.inlineRefs)?i.schema:i.validate?i:o.call(this,i)}function m(i){for(const h of this._compilations)if(w(h,i))return h}je.getCompilingSchema=m;function w(i,h){return i.schema===h.schema&&i.root===h.root&&i.baseId===h.baseId}function v(i,h){let c;for(;typeof(c=this.refs[h])=="string";)h=c;return c||this.schemas[h]||y.call(this,i,h)}function y(i,h){const c=this.opts.uriResolver.parse(h),f=(0,n._getFullPath)(this.opts.uriResolver,c);let g=(0,n.getFullPath)(this.opts.uriResolver,i.baseId,void 0);if(Object.keys(i.schema).length>0&&f===g)return E.call(this,c,i);const d=(0,n.normalizeId)(f),_=this.refs[d]||this.schemas[d];if(typeof _=="string"){const S=y.call(this,i,_);return typeof S?.schema!="object"?void 0:E.call(this,c,S)}if(typeof _?.schema=="object"){if(_.validate||o.call(this,_),d===(0,n.normalizeId)(h)){const{schema:S}=_,{schemaId:R}=this.opts,q=S[R];return q&&(g=(0,n.resolveUrl)(this.opts.uriResolver,g,q)),new s({schema:S,schemaId:R,root:i,baseId:g})}return E.call(this,c,_)}}je.resolveSchema=y;const $=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function E(i,{baseId:h,schema:c,root:f}){var g;if(((g=i.fragment)===null||g===void 0?void 0:g[0])!=="/")return;for(const S of i.fragment.slice(1).split("/")){if(typeof c=="boolean")return;const R=c[(0,l.unescapeFragment)(S)];if(R===void 0)return;c=R;const q=typeof c=="object"&&c[this.opts.schemaId];!$.has(S)&&q&&(h=(0,n.resolveUrl)(this.opts.uriResolver,h,q))}let d;if(typeof c!="boolean"&&c.$ref&&!(0,l.schemaHasRulesButRef)(c,this.RULES)){const S=(0,n.resolveUrl)(this.opts.uriResolver,h,c.$ref);d=y.call(this,f,S)}const{schemaId:_}=this.opts;if(d=d||new s({schema:c,schemaId:_,root:f,baseId:h}),d.schema!==d.root.schema)return d}return je}const Oo="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",qo="Meta-schema for $data reference (JSON AnySchema extension proposal)",To="object",Ao=["$data"],Mo={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Co=!1,Do={$id:Oo,description:qo,type:To,required:Ao,properties:Mo,additionalProperties:Co};var Et={},ut={exports:{}},Fr,Fn;function ps(){if(Fn)return Fr;Fn=1;const e=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),t=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function a(v){let y="",$=0,E=0;for(E=0;E<v.length;E++)if($=v[E].charCodeAt(0),$!==48){if(!($>=48&&$<=57||$>=65&&$<=70||$>=97&&$<=102))return"";y+=v[E];break}for(E+=1;E<v.length;E++){if($=v[E].charCodeAt(0),!($>=48&&$<=57||$>=65&&$<=70||$>=97&&$<=102))return"";y+=v[E]}return y}const n=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function l(v){return v.length=0,!0}function r(v,y,$){if(v.length){const E=a(v);if(E!=="")y.push(E);else return $.error=!0,!1;v.length=0}return!0}function s(v){let y=0;const $={error:!1,address:"",zone:""},E=[],i=[];let h=!1,c=!1,f=r;for(let g=0;g<v.length;g++){const d=v[g];if(!(d==="["||d==="]"))if(d===":"){if(h===!0&&(c=!0),!f(i,E,$))break;if(++y>7){$.error=!0;break}g>0&&v[g-1]===":"&&(h=!0),E.push(":");continue}else if(d==="%"){if(!f(i,E,$))break;f=l}else{i.push(d);continue}}return i.length&&(f===l?$.zone=i.join(""):c?E.push(i.join("")):E.push(a(i))),$.address=E.join(""),$}function o(v){if(u(v,":")<2)return{host:v,isIPV6:!1};const y=s(v);if(y.error)return{host:v,isIPV6:!1};{let $=y.address,E=y.address;return y.zone&&($+="%"+y.zone,E+="%25"+y.zone),{host:$,isIPV6:!0,escapedHost:E}}}function u(v,y){let $=0;for(let E=0;E<v.length;E++)v[E]===y&&$++;return $}function p(v){let y=v;const $=[];let E=-1,i=0;for(;i=y.length;){if(i===1){if(y===".")break;if(y==="/"){$.push("/");break}else{$.push(y);break}}else if(i===2){if(y[0]==="."){if(y[1]===".")break;if(y[1]==="/"){y=y.slice(2);continue}}else if(y[0]==="/"&&(y[1]==="."||y[1]==="/")){$.push("/");break}}else if(i===3&&y==="/.."){$.length!==0&&$.pop(),$.push("/");break}if(y[0]==="."){if(y[1]==="."){if(y[2]==="/"){y=y.slice(3);continue}}else if(y[1]==="/"){y=y.slice(2);continue}}else if(y[0]==="/"&&y[1]==="."){if(y[2]==="/"){y=y.slice(2);continue}else if(y[2]==="."&&y[3]==="/"){y=y.slice(3),$.length!==0&&$.pop();continue}}if((E=y.indexOf("/",1))===-1){$.push(y);break}else $.push(y.slice(0,E)),y=y.slice(E)}return $.join("")}function m(v,y){const $=y!==!0?escape:unescape;return v.scheme!==void 0&&(v.scheme=$(v.scheme)),v.userinfo!==void 0&&(v.userinfo=$(v.userinfo)),v.host!==void 0&&(v.host=$(v.host)),v.path!==void 0&&(v.path=$(v.path)),v.query!==void 0&&(v.query=$(v.query)),v.fragment!==void 0&&(v.fragment=$(v.fragment)),v}function w(v){const y=[];if(v.userinfo!==void 0&&(y.push(v.userinfo),y.push("@")),v.host!==void 0){let $=unescape(v.host);if(!t($)){const E=o($);E.isIPV6===!0?$=`[${E.escapedHost}]`:$=v.host}y.push($)}return(typeof v.port=="number"||typeof v.port=="string")&&(y.push(":"),y.push(String(v.port))),y.length?y.join(""):void 0}return Fr={nonSimpleDomain:n,recomposeAuthority:w,normalizeComponentEncoding:m,removeDotSegments:p,isIPv4:t,isUUID:e,normalizeIPv6:o,stringArrayToHexStripped:a},Fr}var Lr,Ln;function zo(){if(Ln)return Lr;Ln=1;const{isUUID:e}=ps(),t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,a=["http","https","ws","wss","urn","urn:uuid"];function n(d){return a.indexOf(d)!==-1}function l(d){return d.secure===!0?!0:d.secure===!1?!1:d.scheme?d.scheme.length===3&&(d.scheme[0]==="w"||d.scheme[0]==="W")&&(d.scheme[1]==="s"||d.scheme[1]==="S")&&(d.scheme[2]==="s"||d.scheme[2]==="S"):!1}function r(d){return d.host||(d.error=d.error||"HTTP URIs must have a host."),d}function s(d){const _=String(d.scheme).toLowerCase()==="https";return(d.port===(_?443:80)||d.port==="")&&(d.port=void 0),d.path||(d.path="/"),d}function o(d){return d.secure=l(d),d.resourceName=(d.path||"/")+(d.query?"?"+d.query:""),d.path=void 0,d.query=void 0,d}function u(d){if((d.port===(l(d)?443:80)||d.port==="")&&(d.port=void 0),typeof d.secure=="boolean"&&(d.scheme=d.secure?"wss":"ws",d.secure=void 0),d.resourceName){const[_,S]=d.resourceName.split("?");d.path=_&&_!=="/"?_:void 0,d.query=S,d.resourceName=void 0}return d.fragment=void 0,d}function p(d,_){if(!d.path)return d.error="URN can not be parsed",d;const S=d.path.match(t);if(S){const R=_.scheme||d.scheme||"urn";d.nid=S[1].toLowerCase(),d.nss=S[2];const q=`${R}:${_.nid||d.nid}`,C=g(q);d.path=void 0,C&&(d=C.parse(d,_))}else d.error=d.error||"URN can not be parsed.";return d}function m(d,_){if(d.nid===void 0)throw new Error("URN without nid cannot be serialized");const S=_.scheme||d.scheme||"urn",R=d.nid.toLowerCase(),q=`${S}:${_.nid||R}`,C=g(q);C&&(d=C.serialize(d,_));const O=d,V=d.nss;return O.path=`${R||_.nid}:${V}`,_.skipEscape=!0,O}function w(d,_){const S=d;return S.uuid=S.nss,S.nss=void 0,!_.tolerant&&(!S.uuid||!e(S.uuid))&&(S.error=S.error||"UUID is not valid."),S}function v(d){const _=d;return _.nss=(d.uuid||"").toLowerCase(),_}const y={scheme:"http",domainHost:!0,parse:r,serialize:s},$={scheme:"https",domainHost:y.domainHost,parse:r,serialize:s},E={scheme:"ws",domainHost:!0,parse:o,serialize:u},i={scheme:"wss",domainHost:E.domainHost,parse:E.parse,serialize:E.serialize},f={http:y,https:$,ws:E,wss:i,urn:{scheme:"urn",parse:p,serialize:m,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:w,serialize:v,skipNormalize:!0}};Object.setPrototypeOf(f,null);function g(d){return d&&(f[d]||f[d.toLowerCase()])||void 0}return Lr={wsIsSecure:l,SCHEMES:f,isValidSchemeName:n,getSchemeHandler:g},Lr}var Hn;function Vo(){if(Hn)return ut.exports;Hn=1;const{normalizeIPv6:e,removeDotSegments:t,recomposeAuthority:a,normalizeComponentEncoding:n,isIPv4:l,nonSimpleDomain:r}=ps(),{SCHEMES:s,getSchemeHandler:o}=zo();function u(i,h){return typeof i=="string"?i=v($(i,h),h):typeof i=="object"&&(i=$(v(i,h),h)),i}function p(i,h,c){const f=c?Object.assign({scheme:"null"},c):{scheme:"null"},g=m($(i,f),$(h,f),f,!0);return f.skipEscape=!0,v(g,f)}function m(i,h,c,f){const g={};return f||(i=$(v(i,c),c),h=$(v(h,c),c)),c=c||{},!c.tolerant&&h.scheme?(g.scheme=h.scheme,g.userinfo=h.userinfo,g.host=h.host,g.port=h.port,g.path=t(h.path||""),g.query=h.query):(h.userinfo!==void 0||h.host!==void 0||h.port!==void 0?(g.userinfo=h.userinfo,g.host=h.host,g.port=h.port,g.path=t(h.path||""),g.query=h.query):(h.path?(h.path[0]==="/"?g.path=t(h.path):((i.userinfo!==void 0||i.host!==void 0||i.port!==void 0)&&!i.path?g.path="/"+h.path:i.path?g.path=i.path.slice(0,i.path.lastIndexOf("/")+1)+h.path:g.path=h.path,g.path=t(g.path)),g.query=h.query):(g.path=i.path,h.query!==void 0?g.query=h.query:g.query=i.query),g.userinfo=i.userinfo,g.host=i.host,g.port=i.port),g.scheme=i.scheme),g.fragment=h.fragment,g}function w(i,h,c){return typeof i=="string"?(i=unescape(i),i=v(n($(i,c),!0),{...c,skipEscape:!0})):typeof i=="object"&&(i=v(n(i,!0),{...c,skipEscape:!0})),typeof h=="string"?(h=unescape(h),h=v(n($(h,c),!0),{...c,skipEscape:!0})):typeof h=="object"&&(h=v(n(h,!0),{...c,skipEscape:!0})),i.toLowerCase()===h.toLowerCase()}function v(i,h){const c={host:i.host,scheme:i.scheme,userinfo:i.userinfo,port:i.port,path:i.path,query:i.query,nid:i.nid,nss:i.nss,uuid:i.uuid,fragment:i.fragment,reference:i.reference,resourceName:i.resourceName,secure:i.secure,error:""},f=Object.assign({},h),g=[],d=o(f.scheme||c.scheme);d&&d.serialize&&d.serialize(c,f),c.path!==void 0&&(f.skipEscape?c.path=unescape(c.path):(c.path=escape(c.path),c.scheme!==void 0&&(c.path=c.path.split("%3A").join(":")))),f.reference!=="suffix"&&c.scheme&&g.push(c.scheme,":");const _=a(c);if(_!==void 0&&(f.reference!=="suffix"&&g.push("//"),g.push(_),c.path&&c.path[0]!=="/"&&g.push("/")),c.path!==void 0){let S=c.path;!f.absolutePath&&(!d||!d.absolutePath)&&(S=t(S)),_===void 0&&S[0]==="/"&&S[1]==="/"&&(S="/%2F"+S.slice(2)),g.push(S)}return c.query!==void 0&&g.push("?",c.query),c.fragment!==void 0&&g.push("#",c.fragment),g.join("")}const y=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function $(i,h){const c=Object.assign({},h),f={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let g=!1;c.reference==="suffix"&&(c.scheme?i=c.scheme+":"+i:i="//"+i);const d=i.match(y);if(d){if(f.scheme=d[1],f.userinfo=d[3],f.host=d[4],f.port=parseInt(d[5],10),f.path=d[6]||"",f.query=d[7],f.fragment=d[8],isNaN(f.port)&&(f.port=d[5]),f.host)if(l(f.host)===!1){const R=e(f.host);f.host=R.host.toLowerCase(),g=R.isIPV6}else g=!0;f.scheme===void 0&&f.userinfo===void 0&&f.host===void 0&&f.port===void 0&&f.query===void 0&&!f.path?f.reference="same-document":f.scheme===void 0?f.reference="relative":f.fragment===void 0?f.reference="absolute":f.reference="uri",c.reference&&c.reference!=="suffix"&&c.reference!==f.reference&&(f.error=f.error||"URI is not a "+c.reference+" reference.");const _=o(c.scheme||f.scheme);if(!c.unicodeSupport&&(!_||!_.unicodeSupport)&&f.host&&(c.domainHost||_&&_.domainHost)&&g===!1&&r(f.host))try{f.host=URL.domainToASCII(f.host.toLowerCase())}catch(S){f.error=f.error||"Host's domain name can not be converted to ASCII: "+S}(!_||_&&!_.skipNormalize)&&(i.indexOf("%")!==-1&&(f.scheme!==void 0&&(f.scheme=unescape(f.scheme)),f.host!==void 0&&(f.host=unescape(f.host))),f.path&&(f.path=escape(unescape(f.path))),f.fragment&&(f.fragment=encodeURI(decodeURIComponent(f.fragment)))),_&&_.parse&&_.parse(f,c)}else f.error=f.error||"URI can not be parsed.";return f}const E={SCHEMES:s,normalize:u,resolve:p,resolveComponent:m,equal:w,serialize:v,parse:$};return ut.exports=E,ut.exports.default=E,ut.exports.fastUri=E,ut.exports}var Kn;function Uo(){if(Kn)return Et;Kn=1,Object.defineProperty(Et,"__esModule",{value:!0});const e=Vo();return e.code='require("ajv/dist/runtime/uri").default',Et.default=e,Et}var Gn;function vs(){return Gn||(Gn=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=vt();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var a=Y();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return a._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return a.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return a.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return a.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return a.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return a.CodeGen}});const n=Er(),l=yt(),r=fs(),s=Sr(),o=Y(),u=wr(),p=_r(),m=ne(),w=Do,v=Uo(),y=(D,j)=>new RegExp(D,j);y.code="new RegExp";const $=["removeAdditional","useDefaults","coerceTypes"],E=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),i={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},h={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},c=200;function f(D){var j,A,k,b,P,T,H,G,se,ae,I,N,M,F,K,ee,ye,Te,Se,Pe,ge,tt,Oe,Pr,Ir;const ot=D.strict,jr=(j=D.code)===null||j===void 0?void 0:j.optimize,un=jr===!0||jr===void 0?1:jr||0,dn=(k=(A=D.code)===null||A===void 0?void 0:A.regExp)!==null&&k!==void 0?k:y,Ts=(b=D.uriResolver)!==null&&b!==void 0?b:v.default;return{strictSchema:(T=(P=D.strictSchema)!==null&&P!==void 0?P:ot)!==null&&T!==void 0?T:!0,strictNumbers:(G=(H=D.strictNumbers)!==null&&H!==void 0?H:ot)!==null&&G!==void 0?G:!0,strictTypes:(ae=(se=D.strictTypes)!==null&&se!==void 0?se:ot)!==null&&ae!==void 0?ae:"log",strictTuples:(N=(I=D.strictTuples)!==null&&I!==void 0?I:ot)!==null&&N!==void 0?N:"log",strictRequired:(F=(M=D.strictRequired)!==null&&M!==void 0?M:ot)!==null&&F!==void 0?F:!1,code:D.code?{...D.code,optimize:un,regExp:dn}:{optimize:un,regExp:dn},loopRequired:(K=D.loopRequired)!==null&&K!==void 0?K:c,loopEnum:(ee=D.loopEnum)!==null&&ee!==void 0?ee:c,meta:(ye=D.meta)!==null&&ye!==void 0?ye:!0,messages:(Te=D.messages)!==null&&Te!==void 0?Te:!0,inlineRefs:(Se=D.inlineRefs)!==null&&Se!==void 0?Se:!0,schemaId:(Pe=D.schemaId)!==null&&Pe!==void 0?Pe:"$id",addUsedSchema:(ge=D.addUsedSchema)!==null&&ge!==void 0?ge:!0,validateSchema:(tt=D.validateSchema)!==null&&tt!==void 0?tt:!0,validateFormats:(Oe=D.validateFormats)!==null&&Oe!==void 0?Oe:!0,unicodeRegExp:(Pr=D.unicodeRegExp)!==null&&Pr!==void 0?Pr:!0,int32range:(Ir=D.int32range)!==null&&Ir!==void 0?Ir:!0,uriResolver:Ts}}class g{constructor(j={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,j=this.opts={...j,...f(j)};const{es5:A,lines:k}=this.opts.code;this.scope=new o.ValueScope({scope:{},prefixes:E,es5:A,lines:k}),this.logger=V(j.logger);const b=j.validateFormats;j.validateFormats=!1,this.RULES=(0,r.getRules)(),d.call(this,i,j,"NOT SUPPORTED"),d.call(this,h,j,"DEPRECATED","warn"),this._metaOpts=C.call(this),j.formats&&R.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),j.keywords&&q.call(this,j.keywords),typeof j.meta=="object"&&this.addMetaSchema(j.meta),S.call(this),j.validateFormats=b}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:j,meta:A,schemaId:k}=this.opts;let b=w;k==="id"&&(b={...w},b.id=b.$id,delete b.$id),A&&j&&this.addMetaSchema(b,b[k],!1)}defaultMeta(){const{meta:j,schemaId:A}=this.opts;return this.opts.defaultMeta=typeof j=="object"?j[A]||j:void 0}validate(j,A){let k;if(typeof j=="string"){if(k=this.getSchema(j),!k)throw new Error(`no schema with key or ref "${j}"`)}else k=this.compile(j);const b=k(A);return"$async"in k||(this.errors=k.errors),b}compile(j,A){const k=this._addSchema(j,A);return k.validate||this._compileSchemaEnv(k)}compileAsync(j,A){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:k}=this.opts;return b.call(this,j,A);async function b(ae,I){await P.call(this,ae.$schema);const N=this._addSchema(ae,I);return N.validate||T.call(this,N)}async function P(ae){ae&&!this.getSchema(ae)&&await b.call(this,{$ref:ae},!0)}async function T(ae){try{return this._compileSchemaEnv(ae)}catch(I){if(!(I instanceof l.default))throw I;return H.call(this,I),await G.call(this,I.missingSchema),T.call(this,ae)}}function H({missingSchema:ae,missingRef:I}){if(this.refs[ae])throw new Error(`AnySchema ${ae} is loaded but ${I} cannot be resolved`)}async function G(ae){const I=await se.call(this,ae);this.refs[ae]||await P.call(this,I.$schema),this.refs[ae]||this.addSchema(I,ae,A)}async function se(ae){const I=this._loading[ae];if(I)return I;try{return await(this._loading[ae]=k(ae))}finally{delete this._loading[ae]}}}addSchema(j,A,k,b=this.opts.validateSchema){if(Array.isArray(j)){for(const T of j)this.addSchema(T,void 0,k,b);return this}let P;if(typeof j=="object"){const{schemaId:T}=this.opts;if(P=j[T],P!==void 0&&typeof P!="string")throw new Error(`schema ${T} must be string`)}return A=(0,u.normalizeId)(A||P),this._checkUnique(A),this.schemas[A]=this._addSchema(j,k,A,b,!0),this}addMetaSchema(j,A,k=this.opts.validateSchema){return this.addSchema(j,A,!0,k),this}validateSchema(j,A){if(typeof j=="boolean")return!0;let k;if(k=j.$schema,k!==void 0&&typeof k!="string")throw new Error("$schema must be a string");if(k=k||this.opts.defaultMeta||this.defaultMeta(),!k)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const b=this.validate(k,j);if(!b&&A){const P="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(P);else throw new Error(P)}return b}getSchema(j){let A;for(;typeof(A=_.call(this,j))=="string";)j=A;if(A===void 0){const{schemaId:k}=this.opts,b=new s.SchemaEnv({schema:{},schemaId:k});if(A=s.resolveSchema.call(this,b,j),!A)return;this.refs[j]=A}return A.validate||this._compileSchemaEnv(A)}removeSchema(j){if(j instanceof RegExp)return this._removeAllSchemas(this.schemas,j),this._removeAllSchemas(this.refs,j),this;switch(typeof j){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const A=_.call(this,j);return typeof A=="object"&&this._cache.delete(A.schema),delete this.schemas[j],delete this.refs[j],this}case"object":{const A=j;this._cache.delete(A);let k=j[this.opts.schemaId];return k&&(k=(0,u.normalizeId)(k),delete this.schemas[k],delete this.refs[k]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(j){for(const A of j)this.addKeyword(A);return this}addKeyword(j,A){let k;if(typeof j=="string")k=j,typeof A=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),A.keyword=k);else if(typeof j=="object"&&A===void 0){if(A=j,k=A.keyword,Array.isArray(k)&&!k.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(L.call(this,k,A),!A)return(0,m.eachItem)(k,P=>re.call(this,P)),this;ie.call(this,A);const b={...A,type:(0,p.getJSONTypes)(A.type),schemaType:(0,p.getJSONTypes)(A.schemaType)};return(0,m.eachItem)(k,b.type.length===0?P=>re.call(this,P,b):P=>b.type.forEach(T=>re.call(this,P,b,T))),this}getKeyword(j){const A=this.RULES.all[j];return typeof A=="object"?A.definition:!!A}removeKeyword(j){const{RULES:A}=this;delete A.keywords[j],delete A.all[j];for(const k of A.rules){const b=k.rules.findIndex(P=>P.keyword===j);b>=0&&k.rules.splice(b,1)}return this}addFormat(j,A){return typeof A=="string"&&(A=new RegExp(A)),this.formats[j]=A,this}errorsText(j=this.errors,{separator:A=", ",dataVar:k="data"}={}){return!j||j.length===0?"No errors":j.map(b=>`${k}${b.instancePath} ${b.message}`).reduce((b,P)=>b+A+P)}$dataMetaSchema(j,A){const k=this.RULES.all;j=JSON.parse(JSON.stringify(j));for(const b of A){const P=b.split("/").slice(1);let T=j;for(const H of P)T=T[H];for(const H in k){const G=k[H];if(typeof G!="object")continue;const{$data:se}=G.definition,ae=T[H];se&&ae&&(T[H]=le(ae))}}return j}_removeAllSchemas(j,A){for(const k in j){const b=j[k];(!A||A.test(k))&&(typeof b=="string"?delete j[k]:b&&!b.meta&&(this._cache.delete(b.schema),delete j[k]))}}_addSchema(j,A,k,b=this.opts.validateSchema,P=this.opts.addUsedSchema){let T;const{schemaId:H}=this.opts;if(typeof j=="object")T=j[H];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof j!="boolean")throw new Error("schema must be object or boolean")}let G=this._cache.get(j);if(G!==void 0)return G;k=(0,u.normalizeId)(T||k);const se=u.getSchemaRefs.call(this,j,k);return G=new s.SchemaEnv({schema:j,schemaId:H,meta:A,baseId:k,localRefs:se}),this._cache.set(G.schema,G),P&&!k.startsWith("#")&&(k&&this._checkUnique(k),this.refs[k]=G),b&&this.validateSchema(j,!0),G}_checkUnique(j){if(this.schemas[j]||this.refs[j])throw new Error(`schema with key or id "${j}" already exists`)}_compileSchemaEnv(j){if(j.meta?this._compileMetaSchema(j):s.compileSchema.call(this,j),!j.validate)throw new Error("ajv implementation error");return j.validate}_compileMetaSchema(j){const A=this.opts;this.opts=this._metaOpts;try{s.compileSchema.call(this,j)}finally{this.opts=A}}}g.ValidationError=n.default,g.MissingRefError=l.default,e.default=g;function d(D,j,A,k="error"){for(const b in D){const P=b;P in j&&this.logger[k](`${A}: option ${b}. ${D[P]}`)}}function _(D){return D=(0,u.normalizeId)(D),this.schemas[D]||this.refs[D]}function S(){const D=this.opts.schemas;if(D)if(Array.isArray(D))this.addSchema(D);else for(const j in D)this.addSchema(D[j],j)}function R(){for(const D in this.opts.formats){const j=this.opts.formats[D];j&&this.addFormat(D,j)}}function q(D){if(Array.isArray(D)){this.addVocabulary(D);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const j in D){const A=D[j];A.keyword||(A.keyword=j),this.addKeyword(A)}}function C(){const D={...this.opts};for(const j of $)delete D[j];return D}const O={log(){},warn(){},error(){}};function V(D){if(D===!1)return O;if(D===void 0)return console;if(D.log&&D.warn&&D.error)return D;throw new Error("logger must implement log, warn and error methods")}const U=/^[a-z_$][a-z0-9_$:-]*$/i;function L(D,j){const{RULES:A}=this;if((0,m.eachItem)(D,k=>{if(A.keywords[k])throw new Error(`Keyword ${k} is already defined`);if(!U.test(k))throw new Error(`Keyword ${k} has invalid name`)}),!!j&&j.$data&&!("code"in j||"validate"in j))throw new Error('$data keyword must have "code" or "validate" function')}function re(D,j,A){var k;const b=j?.post;if(A&&b)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:P}=this;let T=b?P.post:P.rules.find(({type:G})=>G===A);if(T||(T={type:A,rules:[]},P.rules.push(T)),P.keywords[D]=!0,!j)return;const H={keyword:D,definition:{...j,type:(0,p.getJSONTypes)(j.type),schemaType:(0,p.getJSONTypes)(j.schemaType)}};j.before?de.call(this,T,H,j.before):T.rules.push(H),P.all[D]=H,(k=j.implements)===null||k===void 0||k.forEach(G=>this.addKeyword(G))}function de(D,j,A){const k=D.rules.findIndex(b=>b.keyword===A);k>=0?D.rules.splice(k,0,j):(D.rules.push(j),this.logger.warn(`rule ${A} is not defined`))}function ie(D){let{metaSchema:j}=D;j!==void 0&&(D.$data&&this.opts.$data&&(j=le(j)),D.validateSchema=this.compile(j,!0))}const Q={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function le(D){return{anyOf:[D,Q]}}})(Ar)),Ar}var St={},Pt={},It={},Bn;function Fo(){if(Bn)return It;Bn=1,Object.defineProperty(It,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return It.default=e,It}var We={},Jn;function rn(){if(Jn)return We;Jn=1,Object.defineProperty(We,"__esModule",{value:!0}),We.callRef=We.getValidate=void 0;const e=yt(),t=Ce(),a=Y(),n=Me(),l=Sr(),r=ne(),s={keyword:"$ref",schemaType:"string",code(p){const{gen:m,schema:w,it:v}=p,{baseId:y,schemaEnv:$,validateName:E,opts:i,self:h}=v,{root:c}=$;if((w==="#"||w==="#/")&&y===c.baseId)return g();const f=l.resolveRef.call(h,c,y,w);if(f===void 0)throw new e.default(v.opts.uriResolver,y,w);if(f instanceof l.SchemaEnv)return d(f);return _(f);function g(){if($===c)return u(p,E,$,$.$async);const S=m.scopeValue("root",{ref:c});return u(p,(0,a._)`${S}.validate`,c,c.$async)}function d(S){const R=o(p,S);u(p,R,S,S.$async)}function _(S){const R=m.scopeValue("schema",i.code.source===!0?{ref:S,code:(0,a.stringify)(S)}:{ref:S}),q=m.name("valid"),C=p.subschema({schema:S,dataTypes:[],schemaPath:a.nil,topSchemaRef:R,errSchemaPath:w},q);p.mergeEvaluated(C),p.ok(q)}}};function o(p,m){const{gen:w}=p;return m.validate?w.scopeValue("validate",{ref:m.validate}):(0,a._)`${w.scopeValue("wrapper",{ref:m})}.validate`}We.getValidate=o;function u(p,m,w,v){const{gen:y,it:$}=p,{allErrors:E,schemaEnv:i,opts:h}=$,c=h.passContext?n.default.this:a.nil;v?f():g();function f(){if(!i.$async)throw new Error("async schema referenced by sync schema");const S=y.let("valid");y.try(()=>{y.code((0,a._)`await ${(0,t.callValidateCode)(p,m,c)}`),_(m),E||y.assign(S,!0)},R=>{y.if((0,a._)`!(${R} instanceof ${$.ValidationError})`,()=>y.throw(R)),d(R),E||y.assign(S,!1)}),p.ok(S)}function g(){p.result((0,t.callValidateCode)(p,m,c),()=>_(m),()=>d(m))}function d(S){const R=(0,a._)`${S}.errors`;y.assign(n.default.vErrors,(0,a._)`${n.default.vErrors} === null ? ${R} : ${n.default.vErrors}.concat(${R})`),y.assign(n.default.errors,(0,a._)`${n.default.vErrors}.length`)}function _(S){var R;if(!$.opts.unevaluated)return;const q=(R=w?.validate)===null||R===void 0?void 0:R.evaluated;if($.props!==!0)if(q&&!q.dynamicProps)q.props!==void 0&&($.props=r.mergeEvaluated.props(y,q.props,$.props));else{const C=y.var("props",(0,a._)`${S}.evaluated.props`);$.props=r.mergeEvaluated.props(y,C,$.props,a.Name)}if($.items!==!0)if(q&&!q.dynamicItems)q.items!==void 0&&($.items=r.mergeEvaluated.items(y,q.items,$.items));else{const C=y.var("items",(0,a._)`${S}.evaluated.items`);$.items=r.mergeEvaluated.items(y,C,$.items,a.Name)}}}return We.callRef=u,We.default=s,We}var Wn;function ys(){if(Wn)return Pt;Wn=1,Object.defineProperty(Pt,"__esModule",{value:!0});const e=Fo(),t=rn(),a=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return Pt.default=a,Pt}var jt={},Rt={},Yn;function Lo(){if(Yn)return Rt;Yn=1,Object.defineProperty(Rt,"__esModule",{value:!0});const e=Y(),t=e.operators,a={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},n={message:({keyword:r,schemaCode:s})=>(0,e.str)`must be ${a[r].okStr} ${s}`,params:({keyword:r,schemaCode:s})=>(0,e._)`{comparison: ${a[r].okStr}, limit: ${s}}`},l={keyword:Object.keys(a),type:"number",schemaType:"number",$data:!0,error:n,code(r){const{keyword:s,data:o,schemaCode:u}=r;r.fail$data((0,e._)`${o} ${a[s].fail} ${u} || isNaN(${o})`)}};return Rt.default=l,Rt}var kt={},Zn;function Ho(){if(Zn)return kt;Zn=1,Object.defineProperty(kt,"__esModule",{value:!0});const e=Y(),a={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:n})=>(0,e.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,e._)`{multipleOf: ${n}}`},code(n){const{gen:l,data:r,schemaCode:s,it:o}=n,u=o.opts.multipleOfPrecision,p=l.let("res"),m=u?(0,e._)`Math.abs(Math.round(${p}) - ${p}) > 1e-${u}`:(0,e._)`${p} !== parseInt(${p})`;n.fail$data((0,e._)`(${s} === 0 || (${p} = ${r}/${s}, ${m}))`)}};return kt.default=a,kt}var Nt={},Ot={},Xn;function Ko(){if(Xn)return Ot;Xn=1,Object.defineProperty(Ot,"__esModule",{value:!0});function e(t){const a=t.length;let n=0,l=0,r;for(;l<a;)n++,r=t.charCodeAt(l++),r>=55296&&r<=56319&&l<a&&(r=t.charCodeAt(l),(r&64512)===56320&&l++);return n}return Ot.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',Ot}var Qn;function Go(){if(Qn)return Nt;Qn=1,Object.defineProperty(Nt,"__esModule",{value:!0});const e=Y(),t=ne(),a=Ko(),l={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:s}){const o=r==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${o} than ${s} characters`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:s,data:o,schemaCode:u,it:p}=r,m=s==="maxLength"?e.operators.GT:e.operators.LT,w=p.opts.unicode===!1?(0,e._)`${o}.length`:(0,e._)`${(0,t.useFunc)(r.gen,a.default)}(${o})`;r.fail$data((0,e._)`${w} ${m} ${u}`)}};return Nt.default=l,Nt}var qt={},xn;function Bo(){if(xn)return qt;xn=1,Object.defineProperty(qt,"__esModule",{value:!0});const e=Ce(),t=Y(),n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:l})=>(0,t.str)`must match pattern "${l}"`,params:({schemaCode:l})=>(0,t._)`{pattern: ${l}}`},code(l){const{data:r,$data:s,schema:o,schemaCode:u,it:p}=l,m=p.opts.unicodeRegExp?"u":"",w=s?(0,t._)`(new RegExp(${u}, ${m}))`:(0,e.usePattern)(l,o);l.fail$data((0,t._)`!${w}.test(${r})`)}};return qt.default=n,qt}var Tt={},ea;function Jo(){if(ea)return Tt;ea=1,Object.defineProperty(Tt,"__esModule",{value:!0});const e=Y(),a={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:l}){const r=n==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${r} than ${l} properties`},params:({schemaCode:n})=>(0,e._)`{limit: ${n}}`},code(n){const{keyword:l,data:r,schemaCode:s}=n,o=l==="maxProperties"?e.operators.GT:e.operators.LT;n.fail$data((0,e._)`Object.keys(${r}).length ${o} ${s}`)}};return Tt.default=a,Tt}var At={},ta;function Wo(){if(ta)return At;ta=1,Object.defineProperty(At,"__esModule",{value:!0});const e=Ce(),t=Y(),a=ne(),l={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:r}})=>(0,t.str)`must have required property '${r}'`,params:({params:{missingProperty:r}})=>(0,t._)`{missingProperty: ${r}}`},code(r){const{gen:s,schema:o,schemaCode:u,data:p,$data:m,it:w}=r,{opts:v}=w;if(!m&&o.length===0)return;const y=o.length>=v.loopRequired;if(w.allErrors?$():E(),v.strictRequired){const c=r.parentSchema.properties,{definedProperties:f}=r.it;for(const g of o)if(c?.[g]===void 0&&!f.has(g)){const d=w.schemaEnv.baseId+w.errSchemaPath,_=`required property "${g}" is not defined at "${d}" (strictRequired)`;(0,a.checkStrictMode)(w,_,w.opts.strictRequired)}}function $(){if(y||m)r.block$data(t.nil,i);else for(const c of o)(0,e.checkReportMissingProp)(r,c)}function E(){const c=s.let("missing");if(y||m){const f=s.let("valid",!0);r.block$data(f,()=>h(c,f)),r.ok(f)}else s.if((0,e.checkMissingProp)(r,o,c)),(0,e.reportMissingProp)(r,c),s.else()}function i(){s.forOf("prop",u,c=>{r.setParams({missingProperty:c}),s.if((0,e.noPropertyInData)(s,p,c,v.ownProperties),()=>r.error())})}function h(c,f){r.setParams({missingProperty:c}),s.forOf(c,u,()=>{s.assign(f,(0,e.propertyInData)(s,p,c,v.ownProperties)),s.if((0,t.not)(f),()=>{r.error(),s.break()})},t.nil)}}};return At.default=l,At}var Mt={},ra;function Yo(){if(ra)return Mt;ra=1,Object.defineProperty(Mt,"__esModule",{value:!0});const e=Y(),a={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:l}){const r=n==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${r} than ${l} items`},params:({schemaCode:n})=>(0,e._)`{limit: ${n}}`},code(n){const{keyword:l,data:r,schemaCode:s}=n,o=l==="maxItems"?e.operators.GT:e.operators.LT;n.fail$data((0,e._)`${r}.length ${o} ${s}`)}};return Mt.default=a,Mt}var Ct={},Dt={},na;function nn(){if(na)return Dt;na=1,Object.defineProperty(Dt,"__esModule",{value:!0});const e=hs();return e.code='require("ajv/dist/runtime/equal").default',Dt.default=e,Dt}var aa;function Zo(){if(aa)return Ct;aa=1,Object.defineProperty(Ct,"__esModule",{value:!0});const e=_r(),t=Y(),a=ne(),n=nn(),r={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:s,j:o}})=>(0,t.str)`must NOT have duplicate items (items ## ${o} and ${s} are identical)`,params:({params:{i:s,j:o}})=>(0,t._)`{i: ${s}, j: ${o}}`},code(s){const{gen:o,data:u,$data:p,schema:m,parentSchema:w,schemaCode:v,it:y}=s;if(!p&&!m)return;const $=o.let("valid"),E=w.items?(0,e.getSchemaTypes)(w.items):[];s.block$data($,i,(0,t._)`${v} === false`),s.ok($);function i(){const g=o.let("i",(0,t._)`${u}.length`),d=o.let("j");s.setParams({i:g,j:d}),o.assign($,!0),o.if((0,t._)`${g} > 1`,()=>(h()?c:f)(g,d))}function h(){return E.length>0&&!E.some(g=>g==="object"||g==="array")}function c(g,d){const _=o.name("item"),S=(0,e.checkDataTypes)(E,_,y.opts.strictNumbers,e.DataType.Wrong),R=o.const("indices",(0,t._)`{}`);o.for((0,t._)`;${g}--;`,()=>{o.let(_,(0,t._)`${u}[${g}]`),o.if(S,(0,t._)`continue`),E.length>1&&o.if((0,t._)`typeof ${_} == "string"`,(0,t._)`${_} += "_"`),o.if((0,t._)`typeof ${R}[${_}] == "number"`,()=>{o.assign(d,(0,t._)`${R}[${_}]`),s.error(),o.assign($,!1).break()}).code((0,t._)`${R}[${_}] = ${g}`)})}function f(g,d){const _=(0,a.useFunc)(o,n.default),S=o.name("outer");o.label(S).for((0,t._)`;${g}--;`,()=>o.for((0,t._)`${d} = ${g}; ${d}--;`,()=>o.if((0,t._)`${_}(${u}[${g}], ${u}[${d}])`,()=>{s.error(),o.assign($,!1).break(S)})))}}};return Ct.default=r,Ct}var zt={},sa;function Xo(){if(sa)return zt;sa=1,Object.defineProperty(zt,"__esModule",{value:!0});const e=Y(),t=ne(),a=nn(),l={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:r})=>(0,e._)`{allowedValue: ${r}}`},code(r){const{gen:s,data:o,$data:u,schemaCode:p,schema:m}=r;u||m&&typeof m=="object"?r.fail$data((0,e._)`!${(0,t.useFunc)(s,a.default)}(${o}, ${p})`):r.fail((0,e._)`${m} !== ${o}`)}};return zt.default=l,zt}var Vt={},oa;function Qo(){if(oa)return Vt;oa=1,Object.defineProperty(Vt,"__esModule",{value:!0});const e=Y(),t=ne(),a=nn(),l={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:r})=>(0,e._)`{allowedValues: ${r}}`},code(r){const{gen:s,data:o,$data:u,schema:p,schemaCode:m,it:w}=r;if(!u&&p.length===0)throw new Error("enum must have non-empty array");const v=p.length>=w.opts.loopEnum;let y;const $=()=>y??(y=(0,t.useFunc)(s,a.default));let E;if(v||u)E=s.let("valid"),r.block$data(E,i);else{if(!Array.isArray(p))throw new Error("ajv implementation error");const c=s.const("vSchema",m);E=(0,e.or)(...p.map((f,g)=>h(c,g)))}r.pass(E);function i(){s.assign(E,!1),s.forOf("v",m,c=>s.if((0,e._)`${$()}(${o}, ${c})`,()=>s.assign(E,!0).break()))}function h(c,f){const g=p[f];return typeof g=="object"&&g!==null?(0,e._)`${$()}(${o}, ${c}[${f}])`:(0,e._)`${o} === ${g}`}}};return Vt.default=l,Vt}var ia;function gs(){if(ia)return jt;ia=1,Object.defineProperty(jt,"__esModule",{value:!0});const e=Lo(),t=Ho(),a=Go(),n=Bo(),l=Jo(),r=Wo(),s=Yo(),o=Zo(),u=Xo(),p=Qo(),m=[e.default,t.default,a.default,n.default,l.default,r.default,s.default,o.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,p.default];return jt.default=m,jt}var Ut={},rt={},ca;function _s(){if(ca)return rt;ca=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.validateAdditionalItems=void 0;const e=Y(),t=ne(),n={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:r}})=>(0,e.str)`must NOT have more than ${r} items`,params:({params:{len:r}})=>(0,e._)`{limit: ${r}}`},code(r){const{parentSchema:s,it:o}=r,{items:u}=s;if(!Array.isArray(u)){(0,t.checkStrictMode)(o,'"additionalItems" is ignored when "items" is not an array of schemas');return}l(r,u)}};function l(r,s){const{gen:o,schema:u,data:p,keyword:m,it:w}=r;w.items=!0;const v=o.const("len",(0,e._)`${p}.length`);if(u===!1)r.setParams({len:s.length}),r.pass((0,e._)`${v} <= ${s.length}`);else if(typeof u=="object"&&!(0,t.alwaysValidSchema)(w,u)){const $=o.var("valid",(0,e._)`${v} <= ${s.length}`);o.if((0,e.not)($),()=>y($)),r.ok($)}function y($){o.forRange("i",s.length,v,E=>{r.subschema({keyword:m,dataProp:E,dataPropType:t.Type.Num},$),w.allErrors||o.if((0,e.not)($),()=>o.break())})}}return rt.validateAdditionalItems=l,rt.default=n,rt}var Ft={},nt={},ua;function $s(){if(ua)return nt;ua=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.validateTuple=void 0;const e=Y(),t=ne(),a=Ce(),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(r){const{schema:s,it:o}=r;if(Array.isArray(s))return l(r,"additionalItems",s);o.items=!0,!(0,t.alwaysValidSchema)(o,s)&&r.ok((0,a.validateArray)(r))}};function l(r,s,o=r.schema){const{gen:u,parentSchema:p,data:m,keyword:w,it:v}=r;E(p),v.opts.unevaluated&&o.length&&v.items!==!0&&(v.items=t.mergeEvaluated.items(u,o.length,v.items));const y=u.name("valid"),$=u.const("len",(0,e._)`${m}.length`);o.forEach((i,h)=>{(0,t.alwaysValidSchema)(v,i)||(u.if((0,e._)`${$} > ${h}`,()=>r.subschema({keyword:w,schemaProp:h,dataProp:h},y)),r.ok(y))});function E(i){const{opts:h,errSchemaPath:c}=v,f=o.length,g=f===i.minItems&&(f===i.maxItems||i[s]===!1);if(h.strictTuples&&!g){const d=`"${w}" is ${f}-tuple, but minItems or maxItems/${s} are not specified or different at path "${c}"`;(0,t.checkStrictMode)(v,d,h.strictTuples)}}}return nt.validateTuple=l,nt.default=n,nt}var da;function xo(){if(da)return Ft;da=1,Object.defineProperty(Ft,"__esModule",{value:!0});const e=$s(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:a=>(0,e.validateTuple)(a,"items")};return Ft.default=t,Ft}var Lt={},la;function ei(){if(la)return Lt;la=1,Object.defineProperty(Lt,"__esModule",{value:!0});const e=Y(),t=ne(),a=Ce(),n=_s(),r={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{schema:o,parentSchema:u,it:p}=s,{prefixItems:m}=u;p.items=!0,!(0,t.alwaysValidSchema)(p,o)&&(m?(0,n.validateAdditionalItems)(s,m):s.ok((0,a.validateArray)(s)))}};return Lt.default=r,Lt}var Ht={},fa;function ti(){if(fa)return Ht;fa=1,Object.defineProperty(Ht,"__esModule",{value:!0});const e=Y(),t=ne(),n={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:l,max:r}})=>r===void 0?(0,e.str)`must contain at least ${l} valid item(s)`:(0,e.str)`must contain at least ${l} and no more than ${r} valid item(s)`,params:({params:{min:l,max:r}})=>r===void 0?(0,e._)`{minContains: ${l}}`:(0,e._)`{minContains: ${l}, maxContains: ${r}}`},code(l){const{gen:r,schema:s,parentSchema:o,data:u,it:p}=l;let m,w;const{minContains:v,maxContains:y}=o;p.opts.next?(m=v===void 0?1:v,w=y):m=1;const $=r.const("len",(0,e._)`${u}.length`);if(l.setParams({min:m,max:w}),w===void 0&&m===0){(0,t.checkStrictMode)(p,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(w!==void 0&&m>w){(0,t.checkStrictMode)(p,'"minContains" > "maxContains" is always invalid'),l.fail();return}if((0,t.alwaysValidSchema)(p,s)){let f=(0,e._)`${$} >= ${m}`;w!==void 0&&(f=(0,e._)`${f} && ${$} <= ${w}`),l.pass(f);return}p.items=!0;const E=r.name("valid");w===void 0&&m===1?h(E,()=>r.if(E,()=>r.break())):m===0?(r.let(E,!0),w!==void 0&&r.if((0,e._)`${u}.length > 0`,i)):(r.let(E,!1),i()),l.result(E,()=>l.reset());function i(){const f=r.name("_valid"),g=r.let("count",0);h(f,()=>r.if(f,()=>c(g)))}function h(f,g){r.forRange("i",0,$,d=>{l.subschema({keyword:"contains",dataProp:d,dataPropType:t.Type.Num,compositeRule:!0},f),g()})}function c(f){r.code((0,e._)`${f}++`),w===void 0?r.if((0,e._)`${f} >= ${m}`,()=>r.assign(E,!0).break()):(r.if((0,e._)`${f} > ${w}`,()=>r.assign(E,!1).break()),m===1?r.assign(E,!0):r.if((0,e._)`${f} >= ${m}`,()=>r.assign(E,!0)))}}};return Ht.default=n,Ht}var Hr={},ma;function an(){return ma||(ma=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Y(),a=ne(),n=Ce();e.error={message:({params:{property:u,depsCount:p,deps:m}})=>{const w=p===1?"property":"properties";return(0,t.str)`must have ${w} ${m} when property ${u} is present`},params:({params:{property:u,depsCount:p,deps:m,missingProperty:w}})=>(0,t._)`{property: ${u},
    missingProperty: ${w},
    depsCount: ${p},
    deps: ${m}}`};const l={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[p,m]=r(u);s(u,p),o(u,m)}};function r({schema:u}){const p={},m={};for(const w in u){if(w==="__proto__")continue;const v=Array.isArray(u[w])?p:m;v[w]=u[w]}return[p,m]}function s(u,p=u.schema){const{gen:m,data:w,it:v}=u;if(Object.keys(p).length===0)return;const y=m.let("missing");for(const $ in p){const E=p[$];if(E.length===0)continue;const i=(0,n.propertyInData)(m,w,$,v.opts.ownProperties);u.setParams({property:$,depsCount:E.length,deps:E.join(", ")}),v.allErrors?m.if(i,()=>{for(const h of E)(0,n.checkReportMissingProp)(u,h)}):(m.if((0,t._)`${i} && (${(0,n.checkMissingProp)(u,E,y)})`),(0,n.reportMissingProp)(u,y),m.else())}}e.validatePropertyDeps=s;function o(u,p=u.schema){const{gen:m,data:w,keyword:v,it:y}=u,$=m.name("valid");for(const E in p)(0,a.alwaysValidSchema)(y,p[E])||(m.if((0,n.propertyInData)(m,w,E,y.opts.ownProperties),()=>{const i=u.subschema({keyword:v,schemaProp:E},$);u.mergeValidEvaluated(i,$)},()=>m.var($,!0)),u.ok($))}e.validateSchemaDeps=o,e.default=l})(Hr)),Hr}var Kt={},ha;function ri(){if(ha)return Kt;ha=1,Object.defineProperty(Kt,"__esModule",{value:!0});const e=Y(),t=ne(),n={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:l})=>(0,e._)`{propertyName: ${l.propertyName}}`},code(l){const{gen:r,schema:s,data:o,it:u}=l;if((0,t.alwaysValidSchema)(u,s))return;const p=r.name("valid");r.forIn("key",o,m=>{l.setParams({propertyName:m}),l.subschema({keyword:"propertyNames",data:m,dataTypes:["string"],propertyName:m,compositeRule:!0},p),r.if((0,e.not)(p),()=>{l.error(!0),u.allErrors||r.break()})}),l.ok(p)}};return Kt.default=n,Kt}var Gt={},pa;function bs(){if(pa)return Gt;pa=1,Object.defineProperty(Gt,"__esModule",{value:!0});const e=Ce(),t=Y(),a=Me(),n=ne(),r={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:s})=>(0,t._)`{additionalProperty: ${s.additionalProperty}}`},code(s){const{gen:o,schema:u,parentSchema:p,data:m,errsCount:w,it:v}=s;if(!w)throw new Error("ajv implementation error");const{allErrors:y,opts:$}=v;if(v.props=!0,$.removeAdditional!=="all"&&(0,n.alwaysValidSchema)(v,u))return;const E=(0,e.allSchemaProperties)(p.properties),i=(0,e.allSchemaProperties)(p.patternProperties);h(),s.ok((0,t._)`${w} === ${a.default.errors}`);function h(){o.forIn("key",m,_=>{!E.length&&!i.length?g(_):o.if(c(_),()=>g(_))})}function c(_){let S;if(E.length>8){const R=(0,n.schemaRefOrVal)(v,p.properties,"properties");S=(0,e.isOwnProperty)(o,R,_)}else E.length?S=(0,t.or)(...E.map(R=>(0,t._)`${_} === ${R}`)):S=t.nil;return i.length&&(S=(0,t.or)(S,...i.map(R=>(0,t._)`${(0,e.usePattern)(s,R)}.test(${_})`))),(0,t.not)(S)}function f(_){o.code((0,t._)`delete ${m}[${_}]`)}function g(_){if($.removeAdditional==="all"||$.removeAdditional&&u===!1){f(_);return}if(u===!1){s.setParams({additionalProperty:_}),s.error(),y||o.break();return}if(typeof u=="object"&&!(0,n.alwaysValidSchema)(v,u)){const S=o.name("valid");$.removeAdditional==="failing"?(d(_,S,!1),o.if((0,t.not)(S),()=>{s.reset(),f(_)})):(d(_,S),y||o.if((0,t.not)(S),()=>o.break()))}}function d(_,S,R){const q={keyword:"additionalProperties",dataProp:_,dataPropType:n.Type.Str};R===!1&&Object.assign(q,{compositeRule:!0,createErrors:!1,allErrors:!1}),s.subschema(q,S)}}};return Gt.default=r,Gt}var Bt={},va;function ni(){if(va)return Bt;va=1,Object.defineProperty(Bt,"__esModule",{value:!0});const e=vt(),t=Ce(),a=ne(),n=bs(),l={keyword:"properties",type:"object",schemaType:"object",code(r){const{gen:s,schema:o,parentSchema:u,data:p,it:m}=r;m.opts.removeAdditional==="all"&&u.additionalProperties===void 0&&n.default.code(new e.KeywordCxt(m,n.default,"additionalProperties"));const w=(0,t.allSchemaProperties)(o);for(const i of w)m.definedProperties.add(i);m.opts.unevaluated&&w.length&&m.props!==!0&&(m.props=a.mergeEvaluated.props(s,(0,a.toHash)(w),m.props));const v=w.filter(i=>!(0,a.alwaysValidSchema)(m,o[i]));if(v.length===0)return;const y=s.name("valid");for(const i of v)$(i)?E(i):(s.if((0,t.propertyInData)(s,p,i,m.opts.ownProperties)),E(i),m.allErrors||s.else().var(y,!0),s.endIf()),r.it.definedProperties.add(i),r.ok(y);function $(i){return m.opts.useDefaults&&!m.compositeRule&&o[i].default!==void 0}function E(i){r.subschema({keyword:"properties",schemaProp:i,dataProp:i},y)}}};return Bt.default=l,Bt}var Jt={},ya;function ai(){if(ya)return Jt;ya=1,Object.defineProperty(Jt,"__esModule",{value:!0});const e=Ce(),t=Y(),a=ne(),n=ne(),l={keyword:"patternProperties",type:"object",schemaType:"object",code(r){const{gen:s,schema:o,data:u,parentSchema:p,it:m}=r,{opts:w}=m,v=(0,e.allSchemaProperties)(o),y=v.filter(g=>(0,a.alwaysValidSchema)(m,o[g]));if(v.length===0||y.length===v.length&&(!m.opts.unevaluated||m.props===!0))return;const $=w.strictSchema&&!w.allowMatchingProperties&&p.properties,E=s.name("valid");m.props!==!0&&!(m.props instanceof t.Name)&&(m.props=(0,n.evaluatedPropsToName)(s,m.props));const{props:i}=m;h();function h(){for(const g of v)$&&c(g),m.allErrors?f(g):(s.var(E,!0),f(g),s.if(E))}function c(g){for(const d in $)new RegExp(g).test(d)&&(0,a.checkStrictMode)(m,`property ${d} matches pattern ${g} (use allowMatchingProperties)`)}function f(g){s.forIn("key",u,d=>{s.if((0,t._)`${(0,e.usePattern)(r,g)}.test(${d})`,()=>{const _=y.includes(g);_||r.subschema({keyword:"patternProperties",schemaProp:g,dataProp:d,dataPropType:n.Type.Str},E),m.opts.unevaluated&&i!==!0?s.assign((0,t._)`${i}[${d}]`,!0):!_&&!m.allErrors&&s.if((0,t.not)(E),()=>s.break())})})}}};return Jt.default=l,Jt}var Wt={},ga;function si(){if(ga)return Wt;ga=1,Object.defineProperty(Wt,"__esModule",{value:!0});const e=ne(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(a){const{gen:n,schema:l,it:r}=a;if((0,e.alwaysValidSchema)(r,l)){a.fail();return}const s=n.name("valid");a.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),a.failResult(s,()=>a.reset(),()=>a.error())},error:{message:"must NOT be valid"}};return Wt.default=t,Wt}var Yt={},_a;function oi(){if(_a)return Yt;_a=1,Object.defineProperty(Yt,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ce().validateUnion,error:{message:"must match a schema in anyOf"}};return Yt.default=t,Yt}var Zt={},$a;function ii(){if($a)return Zt;$a=1,Object.defineProperty(Zt,"__esModule",{value:!0});const e=Y(),t=ne(),n={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:l})=>(0,e._)`{passingSchemas: ${l.passing}}`},code(l){const{gen:r,schema:s,parentSchema:o,it:u}=l;if(!Array.isArray(s))throw new Error("ajv implementation error");if(u.opts.discriminator&&o.discriminator)return;const p=s,m=r.let("valid",!1),w=r.let("passing",null),v=r.name("_valid");l.setParams({passing:w}),r.block(y),l.result(m,()=>l.reset(),()=>l.error(!0));function y(){p.forEach(($,E)=>{let i;(0,t.alwaysValidSchema)(u,$)?r.var(v,!0):i=l.subschema({keyword:"oneOf",schemaProp:E,compositeRule:!0},v),E>0&&r.if((0,e._)`${v} && ${m}`).assign(m,!1).assign(w,(0,e._)`[${w}, ${E}]`).else(),r.if(v,()=>{r.assign(m,!0),r.assign(w,E),i&&l.mergeEvaluated(i,e.Name)})})}}};return Zt.default=n,Zt}var Xt={},ba;function ci(){if(ba)return Xt;ba=1,Object.defineProperty(Xt,"__esModule",{value:!0});const e=ne(),t={keyword:"allOf",schemaType:"array",code(a){const{gen:n,schema:l,it:r}=a;if(!Array.isArray(l))throw new Error("ajv implementation error");const s=n.name("valid");l.forEach((o,u)=>{if((0,e.alwaysValidSchema)(r,o))return;const p=a.subschema({keyword:"allOf",schemaProp:u},s);a.ok(s),a.mergeEvaluated(p)})}};return Xt.default=t,Xt}var Qt={},wa;function ui(){if(wa)return Qt;wa=1,Object.defineProperty(Qt,"__esModule",{value:!0});const e=Y(),t=ne(),n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:r})=>(0,e.str)`must match "${r.ifClause}" schema`,params:({params:r})=>(0,e._)`{failingKeyword: ${r.ifClause}}`},code(r){const{gen:s,parentSchema:o,it:u}=r;o.then===void 0&&o.else===void 0&&(0,t.checkStrictMode)(u,'"if" without "then" and "else" is ignored');const p=l(u,"then"),m=l(u,"else");if(!p&&!m)return;const w=s.let("valid",!0),v=s.name("_valid");if(y(),r.reset(),p&&m){const E=s.let("ifClause");r.setParams({ifClause:E}),s.if(v,$("then",E),$("else",E))}else p?s.if(v,$("then")):s.if((0,e.not)(v),$("else"));r.pass(w,()=>r.error(!0));function y(){const E=r.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},v);r.mergeEvaluated(E)}function $(E,i){return()=>{const h=r.subschema({keyword:E},v);s.assign(w,v),r.mergeValidEvaluated(h,w),i?s.assign(i,(0,e._)`${E}`):r.setParams({ifClause:E})}}}};function l(r,s){const o=r.schema[s];return o!==void 0&&!(0,t.alwaysValidSchema)(r,o)}return Qt.default=n,Qt}var xt={},Ea;function di(){if(Ea)return xt;Ea=1,Object.defineProperty(xt,"__esModule",{value:!0});const e=ne(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:a,parentSchema:n,it:l}){n.if===void 0&&(0,e.checkStrictMode)(l,`"${a}" without "if" is ignored`)}};return xt.default=t,xt}var Sa;function ws(){if(Sa)return Ut;Sa=1,Object.defineProperty(Ut,"__esModule",{value:!0});const e=_s(),t=xo(),a=$s(),n=ei(),l=ti(),r=an(),s=ri(),o=bs(),u=ni(),p=ai(),m=si(),w=oi(),v=ii(),y=ci(),$=ui(),E=di();function i(h=!1){const c=[m.default,w.default,v.default,y.default,$.default,E.default,s.default,o.default,r.default,u.default,p.default];return h?c.push(t.default,n.default):c.push(e.default,a.default),c.push(l.default),c}return Ut.default=i,Ut}var er={},at={},Pa;function Es(){if(Pa)return at;Pa=1,Object.defineProperty(at,"__esModule",{value:!0}),at.dynamicAnchor=void 0;const e=Y(),t=Me(),a=Sr(),n=rn(),l={keyword:"$dynamicAnchor",schemaType:"string",code:o=>r(o,o.schema)};function r(o,u){const{gen:p,it:m}=o;m.schemaEnv.root.dynamicAnchors[u]=!0;const w=(0,e._)`${t.default.dynamicAnchors}${(0,e.getProperty)(u)}`,v=m.errSchemaPath==="#"?m.validateName:s(o);p.if((0,e._)`!${w}`,()=>p.assign(w,v))}at.dynamicAnchor=r;function s(o){const{schemaEnv:u,schema:p,self:m}=o.it,{root:w,baseId:v,localRefs:y,meta:$}=u.root,{schemaId:E}=m.opts,i=new a.SchemaEnv({schema:p,schemaId:E,root:w,baseId:v,localRefs:y,meta:$});return a.compileSchema.call(m,i),(0,n.getValidate)(o,i)}return at.default=l,at}var st={},Ia;function Ss(){if(Ia)return st;Ia=1,Object.defineProperty(st,"__esModule",{value:!0}),st.dynamicRef=void 0;const e=Y(),t=Me(),a=rn(),n={keyword:"$dynamicRef",schemaType:"string",code:r=>l(r,r.schema)};function l(r,s){const{gen:o,keyword:u,it:p}=r;if(s[0]!=="#")throw new Error(`"${u}" only supports hash fragment reference`);const m=s.slice(1);if(p.allErrors)w();else{const y=o.let("valid",!1);w(y),r.ok(y)}function w(y){if(p.schemaEnv.root.dynamicAnchors[m]){const $=o.let("_v",(0,e._)`${t.default.dynamicAnchors}${(0,e.getProperty)(m)}`);o.if($,v($,y),v(p.validateName,y))}else v(p.validateName,y)()}function v(y,$){return $?()=>o.block(()=>{(0,a.callRef)(r,y),o.let($,!0)}):()=>(0,a.callRef)(r,y)}}return st.dynamicRef=l,st.default=n,st}var tr={},ja;function li(){if(ja)return tr;ja=1,Object.defineProperty(tr,"__esModule",{value:!0});const e=Es(),t=ne(),a={keyword:"$recursiveAnchor",schemaType:"boolean",code(n){n.schema?(0,e.dynamicAnchor)(n,""):(0,t.checkStrictMode)(n.it,"$recursiveAnchor: false is ignored")}};return tr.default=a,tr}var rr={},Ra;function fi(){if(Ra)return rr;Ra=1,Object.defineProperty(rr,"__esModule",{value:!0});const e=Ss(),t={keyword:"$recursiveRef",schemaType:"string",code:a=>(0,e.dynamicRef)(a,a.schema)};return rr.default=t,rr}var ka;function mi(){if(ka)return er;ka=1,Object.defineProperty(er,"__esModule",{value:!0});const e=Es(),t=Ss(),a=li(),n=fi(),l=[e.default,t.default,a.default,n.default];return er.default=l,er}var nr={},ar={},Na;function hi(){if(Na)return ar;Na=1,Object.defineProperty(ar,"__esModule",{value:!0});const e=an(),t={keyword:"dependentRequired",type:"object",schemaType:"object",error:e.error,code:a=>(0,e.validatePropertyDeps)(a)};return ar.default=t,ar}var sr={},Oa;function pi(){if(Oa)return sr;Oa=1,Object.defineProperty(sr,"__esModule",{value:!0});const e=an(),t={keyword:"dependentSchemas",type:"object",schemaType:"object",code:a=>(0,e.validateSchemaDeps)(a)};return sr.default=t,sr}var or={},qa;function vi(){if(qa)return or;qa=1,Object.defineProperty(or,"__esModule",{value:!0});const e=ne(),t={keyword:["maxContains","minContains"],type:"array",schemaType:"number",code({keyword:a,parentSchema:n,it:l}){n.contains===void 0&&(0,e.checkStrictMode)(l,`"${a}" without "contains" is ignored`)}};return or.default=t,or}var Ta;function yi(){if(Ta)return nr;Ta=1,Object.defineProperty(nr,"__esModule",{value:!0});const e=hi(),t=pi(),a=vi(),n=[e.default,t.default,a.default];return nr.default=n,nr}var ir={},cr={},Aa;function gi(){if(Aa)return cr;Aa=1,Object.defineProperty(cr,"__esModule",{value:!0});const e=Y(),t=ne(),a=Me(),l={keyword:"unevaluatedProperties",type:"object",schemaType:["boolean","object"],trackErrors:!0,error:{message:"must NOT have unevaluated properties",params:({params:r})=>(0,e._)`{unevaluatedProperty: ${r.unevaluatedProperty}}`},code(r){const{gen:s,schema:o,data:u,errsCount:p,it:m}=r;if(!p)throw new Error("ajv implementation error");const{allErrors:w,props:v}=m;v instanceof e.Name?s.if((0,e._)`${v} !== true`,()=>s.forIn("key",u,i=>s.if($(v,i),()=>y(i)))):v!==!0&&s.forIn("key",u,i=>v===void 0?y(i):s.if(E(v,i),()=>y(i))),m.props=!0,r.ok((0,e._)`${p} === ${a.default.errors}`);function y(i){if(o===!1){r.setParams({unevaluatedProperty:i}),r.error(),w||s.break();return}if(!(0,t.alwaysValidSchema)(m,o)){const h=s.name("valid");r.subschema({keyword:"unevaluatedProperties",dataProp:i,dataPropType:t.Type.Str},h),w||s.if((0,e.not)(h),()=>s.break())}}function $(i,h){return(0,e._)`!${i} || !${i}[${h}]`}function E(i,h){const c=[];for(const f in i)i[f]===!0&&c.push((0,e._)`${h} !== ${f}`);return(0,e.and)(...c)}}};return cr.default=l,cr}var ur={},Ma;function _i(){if(Ma)return ur;Ma=1,Object.defineProperty(ur,"__esModule",{value:!0});const e=Y(),t=ne(),n={keyword:"unevaluatedItems",type:"array",schemaType:["boolean","object"],error:{message:({params:{len:l}})=>(0,e.str)`must NOT have more than ${l} items`,params:({params:{len:l}})=>(0,e._)`{limit: ${l}}`},code(l){const{gen:r,schema:s,data:o,it:u}=l,p=u.items||0;if(p===!0)return;const m=r.const("len",(0,e._)`${o}.length`);if(s===!1)l.setParams({len:p}),l.fail((0,e._)`${m} > ${p}`);else if(typeof s=="object"&&!(0,t.alwaysValidSchema)(u,s)){const v=r.var("valid",(0,e._)`${m} <= ${p}`);r.if((0,e.not)(v),()=>w(v,p)),l.ok(v)}u.items=!0;function w(v,y){r.forRange("i",y,m,$=>{l.subschema({keyword:"unevaluatedItems",dataProp:$,dataPropType:t.Type.Num},v),u.allErrors||r.if((0,e.not)(v),()=>r.break())})}}};return ur.default=n,ur}var Ca;function $i(){if(Ca)return ir;Ca=1,Object.defineProperty(ir,"__esModule",{value:!0});const e=gi(),t=_i(),a=[e.default,t.default];return ir.default=a,ir}var dr={},lr={},Da;function bi(){if(Da)return lr;Da=1,Object.defineProperty(lr,"__esModule",{value:!0});const e=Y(),a={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>(0,e.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,e._)`{format: ${n}}`},code(n,l){const{gen:r,data:s,$data:o,schema:u,schemaCode:p,it:m}=n,{opts:w,errSchemaPath:v,schemaEnv:y,self:$}=m;if(!w.validateFormats)return;o?E():i();function E(){const h=r.scopeValue("formats",{ref:$.formats,code:w.code.formats}),c=r.const("fDef",(0,e._)`${h}[${p}]`),f=r.let("fType"),g=r.let("format");r.if((0,e._)`typeof ${c} == "object" && !(${c} instanceof RegExp)`,()=>r.assign(f,(0,e._)`${c}.type || "string"`).assign(g,(0,e._)`${c}.validate`),()=>r.assign(f,(0,e._)`"string"`).assign(g,c)),n.fail$data((0,e.or)(d(),_()));function d(){return w.strictSchema===!1?e.nil:(0,e._)`${p} && !${g}`}function _(){const S=y.$async?(0,e._)`(${c}.async ? await ${g}(${s}) : ${g}(${s}))`:(0,e._)`${g}(${s})`,R=(0,e._)`(typeof ${g} == "function" ? ${S} : ${g}.test(${s}))`;return(0,e._)`${g} && ${g} !== true && ${f} === ${l} && !${R}`}}function i(){const h=$.formats[u];if(!h){d();return}if(h===!0)return;const[c,f,g]=_(h);c===l&&n.pass(S());function d(){if(w.strictSchema===!1){$.logger.warn(R());return}throw new Error(R());function R(){return`unknown format "${u}" ignored in schema at path "${v}"`}}function _(R){const q=R instanceof RegExp?(0,e.regexpCode)(R):w.code.formats?(0,e._)`${w.code.formats}${(0,e.getProperty)(u)}`:void 0,C=r.scopeValue("formats",{key:u,ref:R,code:q});return typeof R=="object"&&!(R instanceof RegExp)?[R.type||"string",R.validate,(0,e._)`${C}.validate`]:["string",R,C]}function S(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!y.$async)throw new Error("async format in sync schema");return(0,e._)`await ${g}(${s})`}return typeof f=="function"?(0,e._)`${g}(${s})`:(0,e._)`${g}.test(${s})`}}}};return lr.default=a,lr}var za;function Ps(){if(za)return dr;za=1,Object.defineProperty(dr,"__esModule",{value:!0});const t=[bi().default];return dr.default=t,dr}var Qe={},Va;function Is(){return Va||(Va=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.contentVocabulary=Qe.metadataVocabulary=void 0,Qe.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Qe.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),Qe}var Ua;function wi(){if(Ua)return St;Ua=1,Object.defineProperty(St,"__esModule",{value:!0});const e=ys(),t=gs(),a=ws(),n=mi(),l=yi(),r=$i(),s=Ps(),o=Is(),u=[n.default,e.default,t.default,(0,a.default)(!0),s.default,o.metadataVocabulary,o.contentVocabulary,l.default,r.default];return St.default=u,St}var fr={},dt={},Fa;function Ei(){if(Fa)return dt;Fa=1,Object.defineProperty(dt,"__esModule",{value:!0}),dt.DiscrError=void 0;var e;return(function(t){t.Tag="tag",t.Mapping="mapping"})(e||(dt.DiscrError=e={})),dt}var La;function js(){if(La)return fr;La=1,Object.defineProperty(fr,"__esModule",{value:!0});const e=Y(),t=Ei(),a=Sr(),n=yt(),l=ne(),s={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:o,tagName:u}})=>o===t.DiscrError.Tag?`tag "${u}" must be string`:`value of tag "${u}" must be in oneOf`,params:({params:{discrError:o,tag:u,tagName:p}})=>(0,e._)`{error: ${o}, tag: ${p}, tagValue: ${u}}`},code(o){const{gen:u,data:p,schema:m,parentSchema:w,it:v}=o,{oneOf:y}=w;if(!v.opts.discriminator)throw new Error("discriminator: requires discriminator option");const $=m.propertyName;if(typeof $!="string")throw new Error("discriminator: requires propertyName");if(m.mapping)throw new Error("discriminator: mapping is not supported");if(!y)throw new Error("discriminator: requires oneOf keyword");const E=u.let("valid",!1),i=u.const("tag",(0,e._)`${p}${(0,e.getProperty)($)}`);u.if((0,e._)`typeof ${i} == "string"`,()=>h(),()=>o.error(!1,{discrError:t.DiscrError.Tag,tag:i,tagName:$})),o.ok(E);function h(){const g=f();u.if(!1);for(const d in g)u.elseIf((0,e._)`${i} === ${d}`),u.assign(E,c(g[d]));u.else(),o.error(!1,{discrError:t.DiscrError.Mapping,tag:i,tagName:$}),u.endIf()}function c(g){const d=u.name("valid"),_=o.subschema({keyword:"oneOf",schemaProp:g},d);return o.mergeEvaluated(_,e.Name),d}function f(){var g;const d={},_=R(w);let S=!0;for(let O=0;O<y.length;O++){let V=y[O];if(V?.$ref&&!(0,l.schemaHasRulesButRef)(V,v.self.RULES)){const L=V.$ref;if(V=a.resolveRef.call(v.self,v.schemaEnv.root,v.baseId,L),V instanceof a.SchemaEnv&&(V=V.schema),V===void 0)throw new n.default(v.opts.uriResolver,v.baseId,L)}const U=(g=V?.properties)===null||g===void 0?void 0:g[$];if(typeof U!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${$}"`);S=S&&(_||R(V)),q(U,O)}if(!S)throw new Error(`discriminator: "${$}" must be required`);return d;function R({required:O}){return Array.isArray(O)&&O.includes($)}function q(O,V){if(O.const)C(O.const,V);else if(O.enum)for(const U of O.enum)C(U,V);else throw new Error(`discriminator: "properties/${$}" must have "const" or "enum"`)}function C(O,V){if(typeof O!="string"||O in d)throw new Error(`discriminator: "${$}" values must be unique strings`);d[O]=V}}}};return fr.default=s,fr}var mr={};const Si="https://json-schema.org/draft/2020-12/schema",Pi="https://json-schema.org/draft/2020-12/schema",Ii={"https://json-schema.org/draft/2020-12/vocab/core":!0,"https://json-schema.org/draft/2020-12/vocab/applicator":!0,"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0,"https://json-schema.org/draft/2020-12/vocab/validation":!0,"https://json-schema.org/draft/2020-12/vocab/meta-data":!0,"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0,"https://json-schema.org/draft/2020-12/vocab/content":!0},ji="meta",Ri="Core and Validation specifications meta-schema",ki=[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/unevaluated"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}],Ni=["object","boolean"],Oi="This meta-schema also defines keywords that have appeared in previous drafts in order to prevent incompatible extensions as they remain in common use.",qi={definitions:{$comment:'"definitions" has been replaced by "$defs".',type:"object",additionalProperties:{$dynamicRef:"#meta"},deprecated:!0,default:{}},dependencies:{$comment:'"dependencies" has been split and replaced by "dependentSchemas" and "dependentRequired" in order to serve their differing semantics.',type:"object",additionalProperties:{anyOf:[{$dynamicRef:"#meta"},{$ref:"meta/validation#/$defs/stringArray"}]},deprecated:!0,default:{}},$recursiveAnchor:{$comment:'"$recursiveAnchor" has been replaced by "$dynamicAnchor".',$ref:"meta/core#/$defs/anchorString",deprecated:!0},$recursiveRef:{$comment:'"$recursiveRef" has been replaced by "$dynamicRef".',$ref:"meta/core#/$defs/uriReferenceString",deprecated:!0}},Ti={$schema:Si,$id:Pi,$vocabulary:Ii,$dynamicAnchor:ji,title:Ri,allOf:ki,type:Ni,$comment:Oi,properties:qi},Ai="https://json-schema.org/draft/2020-12/schema",Mi="https://json-schema.org/draft/2020-12/meta/applicator",Ci={"https://json-schema.org/draft/2020-12/vocab/applicator":!0},Di="meta",zi="Applicator vocabulary meta-schema",Vi=["object","boolean"],Ui={prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"#meta"},contains:{$dynamicRef:"#meta"},additionalProperties:{$dynamicRef:"#meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},propertyNames:{format:"regex"},default:{}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},propertyNames:{$dynamicRef:"#meta"},if:{$dynamicRef:"#meta"},then:{$dynamicRef:"#meta"},else:{$dynamicRef:"#meta"},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"#meta"}},Fi={schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"#meta"}}},Li={$schema:Ai,$id:Mi,$vocabulary:Ci,$dynamicAnchor:Di,title:zi,type:Vi,properties:Ui,$defs:Fi},Hi="https://json-schema.org/draft/2020-12/schema",Ki="https://json-schema.org/draft/2020-12/meta/unevaluated",Gi={"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0},Bi="meta",Ji="Unevaluated applicator vocabulary meta-schema",Wi=["object","boolean"],Yi={unevaluatedItems:{$dynamicRef:"#meta"},unevaluatedProperties:{$dynamicRef:"#meta"}},Zi={$schema:Hi,$id:Ki,$vocabulary:Gi,$dynamicAnchor:Bi,title:Ji,type:Wi,properties:Yi},Xi="https://json-schema.org/draft/2020-12/schema",Qi="https://json-schema.org/draft/2020-12/meta/content",xi={"https://json-schema.org/draft/2020-12/vocab/content":!0},ec="meta",tc="Content vocabulary meta-schema",rc=["object","boolean"],nc={contentEncoding:{type:"string"},contentMediaType:{type:"string"},contentSchema:{$dynamicRef:"#meta"}},ac={$schema:Xi,$id:Qi,$vocabulary:xi,$dynamicAnchor:ec,title:tc,type:rc,properties:nc},sc="https://json-schema.org/draft/2020-12/schema",oc="https://json-schema.org/draft/2020-12/meta/core",ic={"https://json-schema.org/draft/2020-12/vocab/core":!0},cc="meta",uc="Core vocabulary meta-schema",dc=["object","boolean"],lc={$id:{$ref:"#/$defs/uriReferenceString",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{$ref:"#/$defs/uriString"},$ref:{$ref:"#/$defs/uriReferenceString"},$anchor:{$ref:"#/$defs/anchorString"},$dynamicRef:{$ref:"#/$defs/uriReferenceString"},$dynamicAnchor:{$ref:"#/$defs/anchorString"},$vocabulary:{type:"object",propertyNames:{$ref:"#/$defs/uriString"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"#meta"}}},fc={anchorString:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"},uriString:{type:"string",format:"uri"},uriReferenceString:{type:"string",format:"uri-reference"}},mc={$schema:sc,$id:oc,$vocabulary:ic,$dynamicAnchor:cc,title:uc,type:dc,properties:lc,$defs:fc},hc="https://json-schema.org/draft/2020-12/schema",pc="https://json-schema.org/draft/2020-12/meta/format-annotation",vc={"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0},yc="meta",gc="Format vocabulary meta-schema for annotation results",_c=["object","boolean"],$c={format:{type:"string"}},bc={$schema:hc,$id:pc,$vocabulary:vc,$dynamicAnchor:yc,title:gc,type:_c,properties:$c},wc="https://json-schema.org/draft/2020-12/schema",Ec="https://json-schema.org/draft/2020-12/meta/meta-data",Sc={"https://json-schema.org/draft/2020-12/vocab/meta-data":!0},Pc="meta",Ic="Meta-data vocabulary meta-schema",jc=["object","boolean"],Rc={title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean",default:!1},readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0}},kc={$schema:wc,$id:Ec,$vocabulary:Sc,$dynamicAnchor:Pc,title:Ic,type:jc,properties:Rc},Nc="https://json-schema.org/draft/2020-12/schema",Oc="https://json-schema.org/draft/2020-12/meta/validation",qc={"https://json-schema.org/draft/2020-12/vocab/validation":!0},Tc="meta",Ac="Validation vocabulary meta-schema",Mc=["object","boolean"],Cc={type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]},const:!0,enum:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger",default:1},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeIntegerDefault0"},required:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}}},Dc={nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{$ref:"#/$defs/nonNegativeInteger",default:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},zc={$schema:Nc,$id:Oc,$vocabulary:qc,$dynamicAnchor:Tc,title:Ac,type:Mc,properties:Cc,$defs:Dc};var Ha;function Vc(){if(Ha)return mr;Ha=1,Object.defineProperty(mr,"__esModule",{value:!0});const e=Ti,t=Li,a=Zi,n=ac,l=mc,r=bc,s=kc,o=zc,u=["/properties"];function p(m){return[e,t,a,n,l,w(this,r),s,w(this,o)].forEach(v=>this.addMetaSchema(v,void 0,!1)),this;function w(v,y){return m?v.$dataMetaSchema(y,u):y}}return mr.default=p,mr}var Ka;function Uc(){return Ka||(Ka=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv2020=void 0;const a=vs(),n=wi(),l=js(),r=Vc(),s="https://json-schema.org/draft/2020-12/schema";class o extends a.default{constructor(y={}){super({...y,dynamicRef:!0,next:!0,unevaluated:!0})}_addVocabularies(){super._addVocabularies(),n.default.forEach(y=>this.addVocabulary(y)),this.opts.discriminator&&this.addKeyword(l.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema();const{$data:y,meta:$}=this.opts;$&&(r.default.call(this,y),this.refs["http://json-schema.org/schema"]=s)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(s)?s:void 0)}}t.Ajv2020=o,e.exports=t=o,e.exports.Ajv2020=o,Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var u=vt();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var p=Y();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return p._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return p.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return p.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return p.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return p.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return p.CodeGen}});var m=Er();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return m.default}});var w=yt();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return w.default}})})(_t,_t.exports)),_t.exports}var Fc=Uc();const Lc=ls(Fc);var hr={exports:{}},Kr={},Ga;function Hc(){return Ga||(Ga=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(O,V){return{validate:O,compare:V}}e.fullFormats={date:t(r,s),time:t(u(!0),p),"date-time":t(v(!0),y),"iso-time":t(u(),m),"iso-date-time":t(v(),$),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:h,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:C,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:f,int32:{type:"number",validate:_},int64:{type:"number",validate:S},float:{type:"number",validate:R},double:{type:"number",validate:R},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,s),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,p),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,y),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,m),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,$),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function a(O){return O%4===0&&(O%100!==0||O%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,l=[0,31,28,31,30,31,30,31,31,30,31,30,31];function r(O){const V=n.exec(O);if(!V)return!1;const U=+V[1],L=+V[2],re=+V[3];return L>=1&&L<=12&&re>=1&&re<=(L===2&&a(U)?29:l[L])}function s(O,V){if(O&&V)return O>V?1:O<V?-1:0}const o=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function u(O){return function(U){const L=o.exec(U);if(!L)return!1;const re=+L[1],de=+L[2],ie=+L[3],Q=L[4],le=L[5]==="-"?-1:1,D=+(L[6]||0),j=+(L[7]||0);if(D>23||j>59||O&&!Q)return!1;if(re<=23&&de<=59&&ie<60)return!0;const A=de-j*le,k=re-D*le-(A<0?1:0);return(k===23||k===-1)&&(A===59||A===-1)&&ie<61}}function p(O,V){if(!(O&&V))return;const U=new Date("2020-01-01T"+O).valueOf(),L=new Date("2020-01-01T"+V).valueOf();if(U&&L)return U-L}function m(O,V){if(!(O&&V))return;const U=o.exec(O),L=o.exec(V);if(U&&L)return O=U[1]+U[2]+U[3],V=L[1]+L[2]+L[3],O>V?1:O<V?-1:0}const w=/t|\s/i;function v(O){const V=u(O);return function(L){const re=L.split(w);return re.length===2&&r(re[0])&&V(re[1])}}function y(O,V){if(!(O&&V))return;const U=new Date(O).valueOf(),L=new Date(V).valueOf();if(U&&L)return U-L}function $(O,V){if(!(O&&V))return;const[U,L]=O.split(w),[re,de]=V.split(w),ie=s(U,re);if(ie!==void 0)return ie||p(L,de)}const E=/\/|:/,i=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function h(O){return E.test(O)&&i.test(O)}const c=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function f(O){return c.lastIndex=0,c.test(O)}const g=-2147483648,d=2**31-1;function _(O){return Number.isInteger(O)&&O<=d&&O>=g}function S(O){return Number.isInteger(O)}function R(){return!0}const q=/[^\\]\\Z/;function C(O){if(q.test(O))return!1;try{return new RegExp(O),!0}catch{return!1}}})(Kr)),Kr}var Gr={},pr={exports:{}},vr={},Ba;function Kc(){if(Ba)return vr;Ba=1,Object.defineProperty(vr,"__esModule",{value:!0});const e=ys(),t=gs(),a=ws(),n=Ps(),l=Is(),r=[e.default,t.default,(0,a.default)(),n.default,l.metadataVocabulary,l.contentVocabulary];return vr.default=r,vr}const Gc="http://json-schema.org/draft-07/schema#",Bc="http://json-schema.org/draft-07/schema#",Jc="Core schema meta-schema",Wc={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Yc=["object","boolean"],Zc={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Xc={$schema:Gc,$id:Bc,title:Jc,definitions:Wc,type:Yc,properties:Zc,default:!0};var Ja;function Qc(){return Ja||(Ja=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const a=vs(),n=Kc(),l=js(),r=Xc,s=["/properties"],o="http://json-schema.org/draft-07/schema";class u extends a.default{_addVocabularies(){super._addVocabularies(),n.default.forEach($=>this.addVocabulary($)),this.opts.discriminator&&this.addKeyword(l.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const $=this.opts.$data?this.$dataMetaSchema(r,s):r;this.addMetaSchema($,o,!1),this.refs["http://json-schema.org/schema"]=o}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(o)?o:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var p=vt();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return p.KeywordCxt}});var m=Y();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return m._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return m.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return m.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return m.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return m.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return m.CodeGen}});var w=Er();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return w.default}});var v=yt();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return v.default}})})(pr,pr.exports)),pr.exports}var Wa;function xc(){return Wa||(Wa=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=Qc(),a=Y(),n=a.operators,l={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},r={message:({keyword:o,schemaCode:u})=>(0,a.str)`should be ${l[o].okStr} ${u}`,params:({keyword:o,schemaCode:u})=>(0,a._)`{comparison: ${l[o].okStr}, limit: ${u}}`};e.formatLimitDefinition={keyword:Object.keys(l),type:"string",schemaType:"string",$data:!0,error:r,code(o){const{gen:u,data:p,schemaCode:m,keyword:w,it:v}=o,{opts:y,self:$}=v;if(!y.validateFormats)return;const E=new t.KeywordCxt(v,$.RULES.all.format.definition,"format");E.$data?i():h();function i(){const f=u.scopeValue("formats",{ref:$.formats,code:y.code.formats}),g=u.const("fmt",(0,a._)`${f}[${E.schemaCode}]`);o.fail$data((0,a.or)((0,a._)`typeof ${g} != "object"`,(0,a._)`${g} instanceof RegExp`,(0,a._)`typeof ${g}.compare != "function"`,c(g)))}function h(){const f=E.schema,g=$.formats[f];if(!g||g===!0)return;if(typeof g!="object"||g instanceof RegExp||typeof g.compare!="function")throw new Error(`"${w}": format "${f}" does not define "compare" function`);const d=u.scopeValue("formats",{key:f,ref:g,code:y.code.formats?(0,a._)`${y.code.formats}${(0,a.getProperty)(f)}`:void 0});o.fail$data(c(d))}function c(f){return(0,a._)`${f}.compare(${p}, ${m}) ${l[w].fail} 0`}},dependencies:["format"]};const s=o=>(o.addKeyword(e.formatLimitDefinition),o);e.default=s})(Gr)),Gr}var Ya;function eu(){return Ya||(Ya=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const a=Hc(),n=xc(),l=Y(),r=new l.Name("fullFormats"),s=new l.Name("fastFormats"),o=(p,m={keywords:!0})=>{if(Array.isArray(m))return u(p,m,a.fullFormats,r),p;const[w,v]=m.mode==="fast"?[a.fastFormats,s]:[a.fullFormats,r],y=m.formats||a.formatNames;return u(p,y,w,v),m.keywords&&(0,n.default)(p),p};o.get=(p,m="full")=>{const v=(m==="fast"?a.fastFormats:a.fullFormats)[p];if(!v)throw new Error(`Unknown format "${p}"`);return v};function u(p,m,w,v){var y,$;(y=($=p.opts.code).formats)!==null&&y!==void 0||($.formats=(0,l._)`require("ajv-formats/dist/formats").${v}`);for(const E of m)p.addFormat(E,w[E])}e.exports=t=o,Object.defineProperty(t,"__esModule",{value:!0}),t.default=o})(hr,hr.exports)),hr.exports}var tu=eu();const ru=ls(tu),nu="https://json-schema.org/draft/2020-12/schema",au="https://example.org/image-alignment-project.schema.json",su="Image Alignment Project",ou="object",iu=["version","createdAt","images","groups","alignments"],cu=!1,uu={version:{type:"string",pattern:"^0\\.\\d+$"},createdAt:{type:"string",format:"date-time"},images:{type:"array",items:{$ref:"#/$defs/imageSource"},minItems:1},groups:{type:"array",items:{$ref:"#/$defs/imageGroup"}},alignments:{type:"array",items:{$ref:"#/$defs/imageAlignment"}},notes:{type:"string"},annotations:{type:"array",items:{type:"object",required:["baseImageContentHash","data"],additionalProperties:!1,properties:{baseImageContentHash:{type:"string",minLength:32},comparedImageContentHash:{type:"string",minLength:32},alignmentId:{type:"string"},data:{type:"object",additionalProperties:!0}}}}},du={imageSource:{type:"object",required:["id","sourceType","uri","hashes","dimensions"],additionalProperties:!1,properties:{id:{type:"string"},sourceType:{type:"string",enum:["local","url","iiif"]},uri:{type:"string"},label:{type:"string"},hashes:{type:"object",required:["contentHash"],additionalProperties:!1,properties:{contentHash:{type:"string",minLength:32},perceptualHash:{type:"string"}}},dimensions:{type:"object",required:["width","height"],additionalProperties:!1,properties:{width:{type:"number"},height:{type:"number"}}},metadata:{type:"object",additionalProperties:!0}}},imageGroup:{type:"object",required:["id","baseImageId","imageIds","locked"],additionalProperties:!1,properties:{id:{type:"string"},baseImageId:{type:"string"},imageIds:{type:"array",items:{type:"string"},minItems:1},locked:{type:"boolean"}}},imageAlignment:{type:"object",required:["sourceImageId","targetImageId","sourceContentHash","targetContentHash","transform","confidence","method"],additionalProperties:!1,properties:{sourceImageId:{type:"string"},targetImageId:{type:"string"},sourceContentHash:{type:"string"},targetContentHash:{type:"string"},confidence:{type:"number",minimum:0,maximum:1},method:{type:"string"},transform:{type:"object",required:["type","matrix"],additionalProperties:!1,properties:{type:{type:"string",enum:["affine","homography"]},matrix:{type:"array",items:{type:"number"},minItems:9,maxItems:9}}}}}},lu={$schema:nu,$id:au,title:su,type:ou,required:iu,additionalProperties:cu,properties:uu,$defs:du},Rs=new Lc({allErrors:!0,strict:!1});ru(Rs);const Za=Rs.compile(lu);function fu(e){return Za(e)?{valid:!0}:{valid:!1,errors:Za.errors?.map(a=>`${a.instancePath||"/"} ${a.message}`)}}const ks=et({version:"0.2",createdAt:new Date().toISOString()}),Ie=et([]),Ne=et([]),sn=et([]),on=et([]),Ns=Be(Ie,e=>Object.fromEntries(e.map(t=>[t.id,t])));Be(Ne,e=>Object.fromEntries(e.map(t=>[t.id,t])));Be(sn,e=>{const t=new Map;for(const a of e)t.has(a.sourceImageId)||t.set(a.sourceImageId,[]),t.get(a.sourceImageId).push(a);return t});Be([on,Ie],([e,t])=>{if(e.length===0)return"none";const a=new Set(t.map(l=>l.hashes.contentHash));return e.some(l=>!a.has(l.baseImageContentHash))?"mismatch":"valid"});const Xa=Be([ks,Ie,Ne,sn,on],([e,t,a,n,l])=>t.length===0?null:{version:e.version,createdAt:e.createdAt,images:t,groups:a,alignments:n,notes:e.notes,annotations:l.length?l:void 0});function mu(e){ks.set({version:e.version,createdAt:e.createdAt,notes:e.notes}),Ie.set(e.images.map(t=>({...t,uri:""}))),Ne.set(e.groups),sn.set(e.alignments),on.set(e.annotations??[])}function hu(e){Ie.update(t=>[...t,e])}function pu(e){return is(Ie).find(t=>t.hashes.contentHash===e)}function vu(e,t){Ie.update(a=>{const n=a.findIndex(r=>r.hashes.contentHash===e);if(n===-1)return a;const l=[...a];return l[n]=t(l[n]),l})}Be(Ie,e=>new Set(e.filter(t=>t.uri&&t.uri.length>0).map(t=>t.hashes.contentHash)));function yu(e){Ne.update(t=>[...t,e])}function gu(e){for(const t of e)yu(t)}function _u(e,t){Ne.update(a=>a.map(n=>n.id===e&&!n.imageIds.includes(t)?{...n,imageIds:[...n.imageIds,t]}:n))}function $u(e,t){Ne.update(a=>a.flatMap(n=>{if(n.id!==e)return n;const l=n.imageIds.filter(s=>s!==t);if(l.length<2)return[];const r=n.baseImageId===t?l[0]:n.baseImageId;return{...n,imageIds:l,baseImageId:r}}))}function bu(e){Ne.update(t=>t.filter(a=>a.id!==e))}function wu(e,t){Ne.update(a=>a.map(n=>n.id===e&&n.imageIds.includes(t)?{...n,baseImageId:t}:n))}var Eu=Z("<button>Load Project</button>");function Su(e,t){pe(t,!1);async function a(){const l=document.createElement("input");l.type="file",l.accept="application/json",l.onchange=async()=>{const r=l.files?.[0];if(!r)return;const s=await r.text();let o;try{o=JSON.parse(s)}catch{alert("Invalid JSON file");return}const u=So(o),p=fu(u);p.valid||console.warn("Project validation warnings:",p.errors),mu(u)},l.click()}he();var n=Eu();fe("click",n,a),B(e,n),ve()}var Pu=Z("<button>Save</button>");function Iu(e,t){pe(t,!1);const a=()=>be(Xa,"$project",n),[n,l]=Ve();function r(){const o=is(Xa);if(!o)return;const u=JSON.stringify(o,null,2),p=new Blob([u],{type:"application/json"}),m=document.createElement("a");m.href=URL.createObjectURL(p),m.download="image-alignment-project.json",m.click(),URL.revokeObjectURL(m.href)}he();var s=Pu();$e(()=>s.disabled=a()===null),fe("click",s,r),B(e,s),ve(),l()}let Br=null;function ju(){return Br||(Br=new Worker(new URL(""+new URL("../workers/hasher.worker-BdwMdHhR.js",import.meta.url).href,import.meta.url),{type:"module"})),Br}function Qa(e){return new Promise((t,a)=>{const n=ju(),l=s=>{n.removeEventListener("message",l),n.removeEventListener("error",r),s.data?.error?a(new Error(s.data.error)):t(s.data)},r=s=>{n.removeEventListener("message",l),n.removeEventListener("error",r),a(s)};n.addEventListener("message",l),n.addEventListener("error",r),n.postMessage(e)})}async function Ru(e){const t=await e.arrayBuffer(),{contentHash:a}=await Qa({type:"content-hash",buffer:t}),n=await createImageBitmap(e),{perceptualHash:l}=await Qa({type:"perceptual-hash",bitmap:n});return{contentHash:a,perceptualHash:l}}function ku(){return"showDirectoryPicker"in window}var Nu=Z("<button>Import Images</button>");function Ou(e,t){pe(t,!1);async function a(){if(ku()){const r=await window.showDirectoryPicker();for await(const s of r.values()){if(s.kind!=="file")continue;const o=await s.getFile();o.type.startsWith("image/")&&await n(o)}}else{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0,r.multiple=!0,r.onchange=async()=>{for(const s of Array.from(r.files??[]))s.type.startsWith("image/")&&await n(s)},r.click()}}async function n(r){const s=await createImageBitmap(r),{contentHash:o,perceptualHash:u}=await Ru(r),p=pu(o),m=URL.createObjectURL(r);p?vu(o,w=>(w.uri.startsWith("blob:")&&URL.revokeObjectURL(w.uri),{...w,uri:m,label:r.name})):hu({id:crypto.randomUUID(),sourceType:"local",uri:m,label:r.name,hashes:{contentHash:o,perceptualHash:u},dimensions:{width:s.width,height:s.height}})}he();var l=Nu();fe("click",l,a),B(e,l),ve()}var qu=Z('<header class="header svelte-5d73cm"><div class="actions svelte-5d73cm"><!> <!> <!> <button>Help</button> <button>About</button></div> <div class="title svelte-5d73cm"><a href="https://github.com/UoMLibrary/uom-open-annotator/" target="_blank" rel="noopener noreferrer" class="svelte-5d73cm">Image Alignment Tool</a></div></header>');function Tu(e,t){pe(t,!1);const a=pt();he();var n=qu(),l=W(n),r=W(l);Ou(r,{});var s=X(r,2);Su(s,{});var o=X(s,2);Iu(o,{});var u=X(o,2),p=X(u,2);J(l),$r(2),J(n),fe("click",u,()=>a("help")),fe("click",p,()=>a("about")),B(e,n),ve()}var Au=Z('<div class="panel-content svelte-pknzy6"><!></div>'),Mu=Z('<div><aside class="svelte-pknzy6"><header class="svelte-pknzy6"><!></header> <!></aside> <button class="toggle svelte-pknzy6" aria-label="Toggle panel"><!></button></div>');function Cu(e,t){pe(t,!1);let a=we(t,"side",8,"left"),n=we(t,"open",12,!0),l=we(t,"width",8,260);const r=pt();function s(){n(!n()),r("toggle",n())}function o(f){f.target instanceof HTMLElement&&["INPUT","TEXTAREA"].includes(f.target.tagName)||(a()==="left"&&f.key==="["&&(f.preventDefault(),s()),a()==="right"&&f.key==="]"&&(f.preventDefault(),s()))}os(()=>{window.addEventListener("keydown",o)}),so(()=>{window.removeEventListener("keydown",o)}),he();var u=Mu();let p;var m=W(u),w=W(m),v=W(w);Zr(v,t,"header",{}),J(w);var y=X(w,2);{var $=f=>{var g=Au(),d=W(g);Zr(d,t,"default",{}),J(g),B(f,g)};ce(y,f=>{n()&&f($)})}J(m);var E=X(m,2),i=W(E);{var h=f=>{var g=Jr();$e(()=>ke(g,n()?"⟨":"⟩")),B(f,g)},c=f=>{var g=Jr();$e(()=>ke(g,n()?"⟩":"⟨")),B(f,g)};ce(i,f=>{a()==="left"?f(h):f(c,!1)})}J(E),J(u),$e(()=>{p=tn(u,1,`side-panel ${a()??""}`,"svelte-pknzy6",p,{collapsed:!n()}),fo(u,`--panel-width: ${l()??""}px`)}),fe("click",E,s),B(e,u),ve()}var Du=Z('<img class="svelte-oejrku"/>'),zu=Z('<div class="placeholder svelte-oejrku"><div class="placeholder-icon svelte-oejrku">🖼️</div> <div class="placeholder-text svelte-oejrku">Re-import folder<br/>to relink</div></div>'),Vu=Z('<div class="label svelte-oejrku"> </div>'),Uu=Z('<div class="thumb svelte-oejrku"><!> <!></div>');function mt(e,t){let a=we(t,"src",8),n=we(t,"label",8,void 0),l=me(!1);var r=Uu(),s=W(r);{var o=w=>{var v=Du();$e(()=>{hn(v,"src",a()),hn(v,"alt",n()??"Image")}),fe("error",v,()=>ue(l,!0)),fe("load",v,()=>ue(l,!1)),B(w,v)},u=w=>{var v=zu();B(w,v)};ce(s,w=>{z(l)?w(u,!1):w(o)})}var p=X(s,2);{var m=w=>{var v=Vu(),y=W(v,!0);J(v),$e(()=>ke(y,n())),B(w,v)};ce(p,w=>{n()&&w(m)})}J(r),B(e,r)}var Fu=Z('<div class="summary svelte-12tbsdu"><!> <div class="meta svelte-12tbsdu"><div class="count"> </div> <div class="base"> </div></div></div>');function Lu(e,t){pe(t,!1);const a=()=>be(Ns,"$imagesById",n),[n,l]=Ve(),r=me();let s=we(t,"group",8);ze(()=>(a(),Ke(s())),()=>{ue(r,a()[s().baseImageId])}),xe(),he();var o=Fu(),u=W(o);{let $=yr(()=>(z(r),te(()=>z(r)?.uri))),E=yr(()=>(z(r),te(()=>z(r)?.label)));mt(u,{get src(){return z($)},get label(){return z(E)}})}var p=X(u,2),m=W(p),w=W(m);J(m);var v=X(m,2),y=W(v);J(v),J(p),J(o),$e(()=>{ke(w,`${Ke(s()),te(()=>s().imageIds.length)??""} images`),ke(y,`Base: ${z(r),te(()=>z(r)?.label)??""}`)}),B(e,o),ve(),l()}const Re=et({proposals:[],selected:new Set}),Hu=Be(Ne,e=>{const t=new Set;for(const a of e)for(const n of a.imageIds)t.add(n);return t}),Ku=Be(Re,e=>{const t=new Set;for(const a of e.proposals)for(const n of a.imageIds)t.add(n);return t}),Os=Be([Ie,Hu,Ku],([e,t,a])=>e.map(n=>n.id).filter(n=>!t.has(n)&&!a.has(n)));var Gu=Z("<button>Set as base</button>"),Bu=Z('<span class="base-label">Base</span>'),Ju=Z('<div><!> <div class="actions"><!> <button class="danger">Remove</button></div></div>'),Wu=Z('<div class="variant add svelte-19fgzuk"><!> <span class="action svelte-19fgzuk">Add</span></div>'),Yu=Z('<h4>Add images to group</h4> <div class="variants addable svelte-19fgzuk"></div>',1),Zu=Z('<div class="editor"><h4>Base image</h4> <div class="base"><!></div> <h4>Group images</h4> <div class="variants"></div> <!> <div class="group-actions"><button class="danger">Ungroup</button></div></div>');function Xu(e,t){pe(t,!1);const a=()=>be(Ns,"$imagesById",l),n=()=>be(Os,"$ungroupedImageIds",l),[l,r]=Ve();let s=we(t,"group",8);function o(g){g!==s().baseImageId&&wu(s().id,g)}function u(g){$u(s().id,g)}function p(){bu(s().id)}function m(g){_u(s().id,g)}he();var w=Zu(),v=X(W(w),2),y=W(v);{var $=g=>{mt(g,{get src(){return a(),Ke(s()),te(()=>a()[s().baseImageId].uri)},get label(){return a(),Ke(s()),te(()=>a()[s().baseImageId].label)}})};ce(y,g=>{a(),Ke(s()),te(()=>a()[s().baseImageId])&&g($)})}J(v);var E=X(v,4);ht(E,5,()=>(Ke(s()),te(()=>s().imageIds)),pn,(g,d)=>{var _=Ye(),S=De(_);{var R=q=>{var C=Ju();let O;var V=W(C);mt(V,{get src(){return a(),z(d),te(()=>a()[z(d)].uri)},get label(){return a(),z(d),te(()=>a()[z(d)].label)}});var U=X(V,2),L=W(U);{var re=Q=>{var le=Gu();fe("click",le,Xr(()=>o(z(d)))),B(Q,le)},de=Q=>{var le=Bu();B(Q,le)};ce(L,Q=>{z(d),Ke(s()),te(()=>z(d)!==s().baseImageId)?Q(re):Q(de,!1)})}var ie=X(L,2);J(U),J(C),$e(()=>O=tn(C,1,"variant",null,O,{base:z(d)===s().baseImageId})),fe("click",ie,Xr(()=>u(z(d)))),B(q,C)};ce(S,q=>{a(),z(d),te(()=>a()[z(d)])&&q(R)})}B(g,_)}),J(E);var i=X(E,2);{var h=g=>{var d=Yu(),_=X(De(d),2);ht(_,5,n,pn,(S,R)=>{var q=Ye(),C=De(q);{var O=V=>{var U=Wu(),L=W(U);mt(L,{get src(){return a(),z(R),te(()=>a()[z(R)].uri)},get label(){return a(),z(R),te(()=>a()[z(R)].label)}}),$r(2),J(U),fe("click",U,()=>m(z(R))),B(V,U)};ce(C,V=>{a(),z(R),te(()=>a()[z(R)])&&V(O)})}B(S,q)}),J(_),B(g,d)};ce(i,g=>{n(),te(()=>n().length>0)&&g(h)})}var c=X(i,2),f=W(c);J(c),J(w),fe("click",f,p),B(e,w),ve(),r()}var Qu=Z("<div><!></div>"),xu=Z('<div class="group-item svelte-1tynw99"><!></div>');function ed(e,t){pe(t,!1);let a=we(t,"group",8),n=we(t,"selected",8,!1);const l=pt();he();var r=xu(),s=W(r);{var o=p=>{Xu(p,{get group(){return a()}})},u=p=>{var m=Qu(),w=W(m);Lu(w,{get group(){return a()}}),J(m),fe("click",m,()=>l("select")),B(p,m)};ce(s,p=>{n()?p(o):p(u,!1)})}J(r),B(e,r),ve()}var td=Z("<li><!></li>"),rd=Z('<ul class="group-list svelte-192w4q8"></ul>');function nd(e,t){pe(t,!1);let a=we(t,"groups",24,()=>[]),n=we(t,"selectedGroupId",8,null);const l=pt();function r(o){l("select",{id:o})}he();var s=rd();ht(s,5,a,o=>o.id,(o,u)=>{var p=td(),m=W(p);{let w=yr(()=>(z(u),Ke(n()),te(()=>z(u).id===n())));ed(m,{get group(){return z(u)},get selected(){return z(w)},$$events:{select:()=>r(z(u).id)}})}J(p),B(o,p)}),J(s),B(e,s),ve()}var ad=Z('<div class="grid svelte-13w7x4e"></div>');function qs(e,t){pe(t,!1);const a=()=>be(Ie,"$images",n),[n,l]=Ve();let r=we(t,"visibleImageIds",24,()=>[]);he();var s=ad();ht(s,5,()=>(a(),Ke(r()),te(()=>a().filter(o=>r().includes(o.id)))),o=>o.id,(o,u)=>{mt(o,{get src(){return z(u),te(()=>z(u).uri)},get label(){return z(u),te(()=>z(u).label)}})}),J(s),B(e,s),ve(),l()}var sd=Z('<p class="empty svelte-11kqp5s">No grouping proposals. Try running a different strategy.</p>'),od=Z('<span class="confidence svelte-11kqp5s"> </span>'),id=Z('<div class="reason svelte-11kqp5s"> </div>'),cd=Z('<div class="proposal svelte-11kqp5s"><label class="header svelte-11kqp5s"><input type="checkbox"/> <span class="title svelte-11kqp5s"> </span> <!></label> <!> <!></div>'),ud=Z('<div class="controls svelte-11kqp5s"><button class="svelte-11kqp5s">Select all</button> <button class="svelte-11kqp5s">Clear</button> <button class="svelte-11kqp5s">Confirm selected</button> <span class="count svelte-11kqp5s"> </span></div> <!>',1),dd=Z('<div class="group-proposal-list svelte-11kqp5s"><!></div>');function cn(e,t){pe(t,!1);const a=()=>be(Re,"$groupingState",n),[n,l]=Ve();let r=me([]),s=me(new Set);function o(E){Re.update(i=>{const h=new Set(i.selected);return h.has(E)?h.delete(E):h.add(E),{...i,selected:h}})}function u(){Re.update(E=>({...E,selected:new Set(E.proposals.map(i=>i.id))}))}function p(){Re.update(E=>({...E,selected:new Set}))}function m(){const E=z(r).filter(i=>z(s).has(i.id)).map(i=>{const[h,c,...f]=i.imageIds;if(!h||!c)throw new Error("Cannot create group with fewer than 2 images");return{id:crypto.randomUUID(),baseImageId:h,imageIds:[h,c,...f],locked:!1}});E.length!==0&&(gu(E),Re.set({proposals:[],selected:new Set}))}ze(()=>a(),()=>{ue(r,a().proposals)}),ze(()=>a(),()=>{ue(s,a().selected)}),xe(),he();var w=dd(),v=W(w);{var y=E=>{var i=sd();B(E,i)},$=E=>{var i=ud(),h=De(i),c=W(h),f=X(c,2),g=X(f,2),d=X(g,2),_=W(d);J(d),J(h);var S=X(h,2);ht(S,1,()=>z(r),R=>R.id,(R,q)=>{var C=cd(),O=W(C),V=W(O);en(V);var U=X(V,2),L=W(U);J(U);var re=X(U,2);{var de=D=>{var j=od(),A=W(j);J(j),$e(k=>ke(A,`${k??""}%`),[()=>(z(q),te(()=>Math.round(z(q).confidence*100)))]),B(D,j)};ce(re,D=>{z(q),te(()=>z(q).confidence!==void 0)&&D(de)})}J(O);var ie=X(O,2);{var Q=D=>{var j=id(),A=W(j,!0);J(j),$e(()=>ke(A,(z(q),te(()=>z(q).reason)))),B(D,j)};ce(ie,D=>{z(q),te(()=>z(q).reason)&&D(Q)})}var le=X(ie,2);qs(le,{get visibleImageIds(){return z(q),te(()=>z(q).imageIds)}}),J(C),$e(D=>{no(V,D),ke(L,`Group of ${z(q),te(()=>z(q).imageIds.length)??""} images`)},[()=>(z(s),z(q),te(()=>z(s).has(z(q).id)))]),fe("change",V,()=>o(z(q).id)),B(R,C)}),$e(()=>{g.disabled=(z(s),te(()=>z(s).size===0)),ke(_,`${z(s),te(()=>z(s).size)??""} / ${z(r),te(()=>z(r).length)??""} selected`)}),fe("click",c,u),fe("click",f,p),fe("click",g,m),B(E,i)};ce(v,E=>{z(r),te(()=>z(r).length===0)?E(y):E($,!1)})}J(w),B(e,w),ve(),l()}function ld(e){const t=new Map;for(const a of e){if(!a.label)continue;const n=a.label.toLowerCase().replace(/\.(jpg|jpeg|png|tif|tiff)$/i,"").replace(/[_-]?\d+$/,"");t.has(n)||t.set(n,[]),t.get(n).push(a.id)}return[...t.entries()].filter(([,a])=>a.length>1).map(([a,n])=>({id:crypto.randomUUID(),imageIds:n,reason:`Filename stem: ${a}`}))}var fd=Z('<div class="tool svelte-yqaj7r"><p class="description svelte-yqaj7r">Group images based on shared filename patterns.</p> <!></div>');function md(e,t){pe(t,!1);const a=()=>be(Ne,"$groups",l),n=()=>be(Ie,"$images",l),[l,r]=Ve();ze(()=>(a(),n(),Re),()=>{const u=new Set(a().flatMap(w=>w.imageIds)),p=n().filter(w=>!u.has(w.id)),m=ld(p);Re.set({proposals:m,selected:new Set})}),xe(),he();var s=fd(),o=X(W(s),2);cn(o,{}),J(s),B(e,s),ve(),r()}function hd(e,t){if(e.length!==t.length)return 0;let a=0;for(let n=0;n<e.length;n++)e[n]===t[n]&&a++;return a/e.length}function pd(e,t){const a=new Set,n=[];for(let l=0;l<e.length;l++){const r=e[l];if(!r.hashes.perceptualHash||a.has(r.id))continue;const s=[r.id];for(let o=l+1;o<e.length;o++){const u=e[o];if(!u.hashes.perceptualHash||a.has(u.id))continue;hd(r.hashes.perceptualHash,u.hashes.perceptualHash)>=t&&(s.push(u.id),a.add(u.id))}s.length>1&&(s.forEach(o=>a.add(o)),n.push({id:crypto.randomUUID(),imageIds:s,confidence:t,reason:`pHash ≥ ${Math.round(t*100)}%`}))}return n}var vd=Z('<div class="tool svelte-1lqrhx8"><p class="description svelte-1lqrhx8">Group images based on perceptual hash (pHash) similarity.</p> <label class="slider svelte-1lqrhx8"> <input type="range" min="0.2" max="1" step="0.01"/></label> <!></div>');function yd(e,t){pe(t,!1);const a=()=>be(Ne,"$groups",l),n=()=>be(Ie,"$images",l),[l,r]=Ve();let s=me(.95);ze(()=>(a(),n(),z(s),Re),()=>{const v=new Set(a().flatMap(E=>E.imageIds)),y=n().filter(E=>!v.has(E.id)),$=pd(y,z(s));Re.set({proposals:$,selected:new Set})}),xe(),he();var o=vd(),u=X(W(o),2),p=W(u),m=X(p);en(m),J(u);var w=X(u,2);cn(w,{}),J(o),$e(v=>ke(p,`Similarity: ${v??""}% `),[()=>(z(s),te(()=>Math.round(z(s)*100)))]),us(m,()=>z(s),v=>ue(s,v)),B(e,o),ve(),r()}function gd(e,t){let a=0,n=0,l=0;for(let r=0;r<e.length;r++)a+=e[r]*t[r],n+=e[r]*e[r],l+=t[r]*t[r];return a/(Math.sqrt(n)*Math.sqrt(l))}function _d(e,t,a){const n=new Set,l=[];for(let r=0;r<e.length;r++){const s=e[r];if(n.has(s.id))continue;const o=t.get(s.id);if(!o)continue;const u=[s.id];for(let p=r+1;p<e.length;p++){const m=e[p];if(n.has(m.id))continue;const w=t.get(m.id);w&&gd(o,w)>=a&&(u.push(m.id),n.add(m.id))}u.length>1&&(u.forEach(p=>n.add(p)),l.push({id:crypto.randomUUID(),imageIds:u,reason:`Visual profile ≥ ${Math.round(a*100)}%`}))}return l}function $d(e,t=16){const a=Math.min(e.width,e.height),n=document.createElement("canvas");n.width=n.height=a;const l=n.getContext("2d");l.drawImage(e,(e.width-a)/2,(e.height-a)/2,a,a,0,0,a,a);const r=l.getImageData(0,0,a,a).data,s=new Array(t*3).fill(0);for(let u=0;u<r.length;u+=4){const p=r[u]/255,m=r[u+1]/255,w=r[u+2]/255,v=Math.max(p,m,w),y=Math.min(p,m,w),$=v,E=v===0?0:(v-y)/v;let i=0;v!==y&&(v===p?i=(m-w)/(v-y):v===m?i=2+(w-p)/(v-y):i=4+(p-m)/(v-y),i=(i*60+360)%360);const h=Math.floor(i/360*t),c=Math.floor(E*t),f=Math.floor($*t);s[h]++,s[t+c]++,s[2*t+f]++}const o=s.reduce((u,p)=>u+p,0);return s.map(u=>u/o)}var bd=Z('<p class="hint svelte-7v8cmg">Computing visual profiles…</p>'),wd=Z('<div class="tool svelte-7v8cmg"><p class="description svelte-7v8cmg">Group images by overall colour and tone, ignoring layout and exact pixels.</p> <label class="slider svelte-7v8cmg"> <input type="range" min="0.5" max="1" step="0.01"/></label> <!> <!></div>');function Ed(e,t){pe(t,!1);const a=()=>be(Ie,"$images",l),n=()=>be(Ne,"$groups",l),[l,r]=Ve();let s=me(.9),o=new Map,u=me(!1),p=me(!1);async function m(){ue(p,!0),o.clear();for(const g of a()){if(!g.uri)continue;const d=new Image;d.src=g.uri,await d.decode(),o.set(g.id,$d(d))}ue(u,!0),ue(p,!1)}let w=me(0);async function v(){if(z(p))return;z(u)||await m();const g=new Set(n().flatMap(_=>_.imageIds)),d=a().filter(_=>!g.has(_.id));Re.set({proposals:_d(d,o,z(s)),selected:new Set})}ze(()=>(a(),z(w)),()=>{a().length!==z(w)&&(ue(u,!1),ue(w,a().length))}),ze(()=>{},()=>{v()}),xe(),he();var y=wd(),$=X(W(y),2),E=W($),i=X(E);en(i),J($);var h=X($,2);{var c=g=>{var d=bd();B(g,d)};ce(h,g=>{z(p)&&g(c)})}var f=X(h,2);cn(f,{}),J(y),$e(g=>ke(E,`Similarity: ${g??""}% `),[()=>(z(s),te(()=>Math.round(z(s)*100)))]),us(i,()=>z(s),g=>ue(s,g)),B(e,y),ve(),r()}var Sd=Z('<div class="group-panel"><header class="controls"><select><option>Group by filename</option><option>Group by visual similarity (pHash)</option><option>Group by visual profile (colour & tone)</option></select></header> <!></div>');function Pd(e,t){pe(t,!1);let a=me("filename"),n=me(null);ze(()=>(z(a),z(n),Re),()=>{z(a)!==z(n)&&(Re.set({proposals:[],selected:new Set}),ue(n,z(a)))}),xe(),he();var l=Sd(),r=W(l),s=W(r);$e(()=>{z(a),to(()=>{})});var o=W(s);o.value=o.__value="filename";var u=X(o);u.value=u.__value="phash";var p=X(u);p.value=p.__value="visual-profile",J(s),J(r);var m=X(r,2);{var w=y=>{md(y,{})},v=y=>{var $=Ye(),E=De($);{var i=c=>{yd(c,{})},h=c=>{var f=Ye(),g=De(f);{var d=_=>{Ed(_,{})};ce(g,_=>{z(a)==="visual-profile"&&_(d)},!0)}B(c,f)};ce(E,c=>{z(a)==="phash"?c(i):c(h,!1)},!0)}B(y,$)};ce(m,y=>{z(a)==="filename"?y(w):y(v,!1)})}J(l),ho(s,()=>z(a),y=>ue(a,y)),B(e,l),ve()}var Id=Z('<div class="empty svelte-1mg5mqj">&nbsp;</div>'),jd=Z('<div class="empty svelte-1mg5mqj">&nbsp;</div>'),Rd=Z('<span slot="header" class="panel-title svelte-1mg5mqj">Groups</span>'),kd=Z('<div class="empty svelte-1mg5mqj">Import images to begin</div>'),Nd=Z('<div class="app svelte-1mg5mqj"><!> <!> <div class="workspace svelte-1mg5mqj"><!> <div class="main-content svelte-1mg5mqj"><div class="main-content svelte-1mg5mqj"><!> <!></div></div></div> <!> <!></div>');function Od(e,t){pe(t,!1);const a=()=>be(Ie,"$images",r),n=()=>be(Ne,"$groups",r),l=()=>be(Os,"$ungroupedImageIds",r),[r,s]=Ve(),o=me();let u=me(!1),p=me(!1),m=me(!0),w=me(null),v=me(0);ze(()=>a(),()=>{ue(o,a().map(O=>O.id))}),ze(()=>(n(),z(v)),()=>{const O=n().length;O>0&&z(v)===0&&ue(m,!0),ue(v,O)}),xe(),he();var y=Nd(),$=W(y);go($,{});var E=X($,2);Tu(E,{$$events:{help:()=>ue(u,!0),about:()=>ue(p,!0)}});var i=X(E,2),h=W(i);Cu(h,{side:"left",get open(){return z(m)},set open(O){ue(m,O)},children:(O,V)=>{var U=Ye(),L=De(U);{var re=ie=>{nd(ie,{get groups(){return n()},get selectedGroupId(){return z(w)},$$events:{select:Q=>ue(w,Q.detail.id)}})},de=ie=>{var Q=Ye(),le=De(Q);{var D=A=>{var k=Id();B(A,k)},j=A=>{var k=jd();B(A,k)};ce(le,A=>{a(),te(()=>a().length>0)?A(D):A(j,!1)},!0)}B(ie,Q)};ce(L,ie=>{n(),te(()=>n().length>0)?ie(re):ie(de,!1)})}B(O,U)},$$slots:{default:!0,header:(O,V)=>{var U=Rd();B(O,U)}},$$legacy:!0});var c=X(h,2),f=W(c),g=W(f);{var d=O=>{qs(O,{get visibleImageIds(){return l()}})},_=O=>{var V=kd();B(O,V)};ce(g,O=>{a(),te(()=>a().length>0)?O(d):O(_,!1)})}var S=X(g,2);{var R=O=>{Pd(O,{})};ce(S,O=>{l(),te(()=>l().length>0)&&O(R)})}J(f),J(c),J(i);var q=X(i,2);bo(q,{get open(){return z(u)},set open(O){ue(u,O)},$$legacy:!0});var C=X(q,2);Eo(C,{get open(){return z(p)},set open(O){ue(p,O)},$$legacy:!0}),J(y),B(e,y),ve(),s()}var qd=Z('<meta name="description" content="Experimental image alignment and registration tool for research, exploration, and prototyping workflows."/>'),Td=Z('<main class="svelte-11or6yc"><!></main>');function Ad(e){var t=Td();ao("11or6yc",n=>{var l=qd();as(()=>{ro.title="Image Alignment Tool"}),B(n,l)});var a=W(t);Od(a,{}),J(t),B(e,t)}function Ld(e){Ad(e)}export{Ld as component};
