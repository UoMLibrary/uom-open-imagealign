import{c as F,a as c,f as h,t as R}from"../chunks/BNXAmcI_.js";import{i as g}from"../chunks/CsVMf1gv.js";import{h as M,C as q,a2 as V,t as k,v as H,x as w,y as p,z as u,w as z,A as f,av as S,N as y,l as T,M as D}from"../chunks/_yfJwgyk.js";import{s as N,e as b}from"../chunks/Cyjm9et-.js";import{i as x,s as W,a as Z,p as I}from"../chunks/CT0Wj-GA.js";import{w as G,c as $,o as J}from"../chunks/eLtsEgJi.js";function Q(n,t,e,a,r){M&&q();var o=t.$$slots?.[e],i=!1;o===!0&&(o=t.children,i=!0),o===void 0||o(n,i?()=>a:a)}function X(n,t,e){var a=n==null?"":""+n;return a=a?a+" "+t:t,a===""?null:a}function Y(n,t,e,a,r,o){var i=n.__className;if(M||i!==e||i===void 0){var s=X(e,a);(!M||s!==n.getAttribute("class"))&&(s==null?n.removeAttribute("class"):n.className=s),n.__className=e}return o}function ee(n){return function(...t){var e=t[0];return e.stopPropagation(),n?.apply(this,t)}}function te(n,t){var e=n.$$events?.[t.type],a=V(e)?e.slice():e==null?[]:[e];for(var r of a)r.call(this,t)}const ae=G(null);var oe=h("<div> </div>");function ne(n,t){k(t,!1);const e=()=>Z(ae,"$toast",a),[a,r]=W();g();var o=F(),i=H(o);{var s=l=>{var v=oe(),d=p(v,!0);u(v),z(()=>{Y(v,1,`toast ${e().type??""}`,"svelte-1fk2ial"),N(d,e().message)}),c(l,v)};x(i,l=>{e()&&l(s)})}c(n,o),w(),r()}var ie=h('<div class="backdrop svelte-9pi54v"><div class="modal svelte-9pi54v"><header class="modal-header svelte-9pi54v"><div class="modal-title svelte-9pi54v"><!></div> <button class="close-button svelte-9pi54v" aria-label="Close">×</button></header> <div class="modal-body svelte-9pi54v"><!></div></div></div>');function B(n,t){k(t,!1);let e=I(t,"open",8,!1),a=I(t,"title",8,"");const r=$();function o(){r("close")}function i(d){d.key==="Escape"&&o()}J(()=>(window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i))),g();var s=F(),l=H(s);{var v=d=>{var _=ie(),A=p(_),P=p(A),j=p(P),C=p(j);{var K=m=>{var L=R();z(()=>N(L,a())),c(m,L)};x(C,m=>{a()&&m(K)})}u(j);var O=f(j,2);u(P);var E=f(P,2),U=p(E);Q(U,t,"default",{}),u(E),u(A),u(_),b("click",O,o),b("click",A,ee(function(m){te.call(this,t,m)})),b("click",_,o),c(d,_)};x(l,d=>{e()&&d(v)})}c(n,s),w()}function re(){return"showDirectoryPicker"in window}var se=h("<button>Load</button>");function le(n,t){k(t,!1);const e=$();async function a(){if(re()){const o=await window.showDirectoryPicker(),i=new Map;for await(const s of o.values())if(s.kind==="file"){const l=await s.getFile();i.set(l.name,l)}e("load",{files:i,dir:o})}else{const o=document.createElement("input");o.type="file",o.webkitdirectory=!0,o.multiple=!0,o.onchange=()=>{const i=new Map(Array.from(o.files).map(s=>[s.name,s]));e("load",{files:i,dir:null})},o.click()}}g();var r=se();b("click",r,a),c(n,r),w()}var de=h("<button>Save</button>");function ce(n,t){k(t,!1);const e=$();let a=I(t,"disabled",8,!1);g();var r=de();z(()=>r.disabled=a()),b("click",r,()=>e("save")),c(n,r),w()}var ve=h('<header class="header svelte-zne36e"><div class="actions svelte-zne36e"><!> <!> <button>Help</button> <button>About</button></div> <div class="title svelte-zne36e"><a href="https://github.com/UoMLibrary/uom-open-annotator/" target="_blank" rel="noopener noreferrer" class="svelte-zne36e">Image Alignment Tool</a></div></header>');function pe(n,t){k(t,!1);const e=$();g();var a=ve(),r=p(a),o=p(r);le(o,{$$events:{load:v=>e("load-project",v.detail)}});var i=f(o,2);ce(i,{$$events:{save:()=>e("save-project")}});var s=f(i,2),l=f(s,2);u(r),S(2),u(a),b("click",s,()=>e("help")),b("click",l,()=>e("about")),c(n,a),w()}var ue=h(`<p>This tool allows you to compare pairs of images using overlays and add structured annotations
			for visual analysis.</p> <h3>Basic usage</h3> <ul><li>Select an image pair from the left sidebar</li> <li>Pan and zoom images in sync</li> <li>Add annotations directly in the viewer</li> <li>Annotations are saved per image pair</li></ul> <h3>Keyboard & mouse controls</h3> <ul><li><kbd>[</kbd> — Open image pair sidebar</li> <li><kbd>]</kbd> — Open annotations sidebar</li> <li><kbd>Escape</kbd> or <kbd>1</kbd> — Pan image mode</li> <li><kbd>B</kbd> or <kbd>2</kbd> — Rectangle annotation mode</li> <li><kbd>P</kbd> or <kbd>3</kbd> — Polygon annotation mode</li> <li><kbd>Mouse wheel</kbd> — Zoom</li> <li><kbd>Shift</kbd> + <kbd>Mouse wheel</kbd> — Fade between images</li></ul>`,1),fe=h(`<p>Designed for visual comparison, this application allows pairs of images to be overlaid and
			annotated to support detailed analysis.</p> <p>It runs entirely in the browser and can load projects directly from a local folder, with
			annotations saved back to the project file where the browser allows.</p> <h3>Technologies used</h3> <ul><li><a href="https://svelte.dev/docs/kit/introduction" target="_blank" rel="noopener noreferrer">SvelteKit</a> — application framework and UI architecture</li> <li><a href="https://openseadragon.github.io/" target="_blank" rel="noopener noreferrer">OpenSeadragon</a> — high-resolution image viewing and deep zoom</li> <li><a href="https://annotorious.dev/" target="_blank" rel="noopener noreferrer">Annotorious</a> — annotation primitives and interaction models</li></ul> <p>Rather than acting as a single, all-in-one solution, the tool is intended to form part of a
			broader workflow. Additional tools are planned to support related stages, such as image
			alignment, comparison preparation, and transformation of annotation outputs for downstream
			use.</p> <p class="muted">This is an experimental application and a work in progress, intended for research,
			exploration, and prototyping workflows.</p> <p class="muted">For any enquiries or suggestions for further development, please contact Christopher Wilson —
			Software Developer, Artificial Intelligence and Ideas Adoption (AIIA), The University of
			Manchester.</p>`,1),he=h('<div class="app"><!> <!> <div class="workspace"></div> <!> <!></div>');function be(n){let t=D(!1),e=D(!1);var a=he(),r=p(a);ne(r,{});var o=f(r,2);pe(o,{$$events:{"load-project":handleLoadProject,"save-project":handleSaveProject,help:()=>y(t,!0),about:()=>y(e,!0)}});var i=f(o,4);B(i,{get open(){return T(t)},title:"How to use this tool",$$events:{close:()=>y(t,!1)},children:(l,v)=>{var d=ue();S(8),c(l,d)},$$slots:{default:!0}});var s=f(i,2);B(s,{get open(){return T(e)},title:"About this tool",$$events:{close:()=>y(e,!1)},children:(l,v)=>{var d=fe();S(12),c(l,d)},$$slots:{default:!0}}),u(a),c(n,a)}function $e(n){be(n)}export{$e as component};
